{"version":3,"file":"static/js/135.0828f21a.chunk.js","mappings":"mBAAO,MACMA,EAAS,SACTC,EAAU,UACVC,EAAQ,QACRC,EAAU,UCkBVC,EAAgB,CAC3B,cACA,SACA,UACA,uBACA,YACA,UACA,aACA,YACA,UACA,aACA,UACA,UACA,QACA,eACA,aACA,WACA,UACA,yBACA,UACA,SACA,UACA,SACA,SACA,SACA,WACA,2BACA,SACA,cACA,QACA,QACA,cACA,WACA,mCACA,wBACA,WACA,aACA,OACA,SACA,iBACA,UACA,WACA,UACA,qBACA,UACA,UACA,QACA,UACA,QACA,UACA,WACA,UACA,OACA,mBACA,SACA,QACA,iBACA,UACA,QACA,SACA,SACA,gBACA,oBACA,SACA,YACA,YACA,SACA,WACA,UACA,QACA,UACA,YACA,QACA,UACA,OACA,OACA,UACA,SACA,QACA,UACA,SACA,QACA,aACA,QACA,aACA,WACA,cACA,SACA,SACA,OACA,UACA,UACA,QACA,YACA,UACA,YACA,aACA,SACA,UACA,UACA,aACA,SACA,YACA,OACA,UACA,aACA,WACA,aACA,aACA,SACA,WACA,UACA,gBACA,QACA,UACA,YACA,cACA,SACA,QACA,cACA,OACA,WACA,SACA,OACA,cACA,mBACA,SACA,cACA,cACA,WACA,WACA,QACA,UACA,SACA,SACA,iBACA,eACA,QACA,cACA,UACA,kBACA,eACA,cACA,UACA,SACA,WACA,WACA,WACA,SACA,YACA,QACA,OACA,OACA,WACA,aACA,eACA,aACA,sBACA,UACA,SACA,SACA,WACA,SACA,UACA,UACA,gBACA,aACA,YACA,UACA,UACA,QACA,eACA,SACA,YCzJK,MAAMC,EAAgD,CAC3D,YArCF,SAA+BC,EAAiBC,GAE9C,MAAMC,EAAqBJ,EAAcK,QACvCC,IAAcJ,EAAMK,mBAAmBC,SAASF,KAIlD,GAAkC,IAA9BF,EAAmBK,OACrB,OAAO,KAIT,MAAMC,EAAgBP,GAAUC,EAAmBO,KAAKC,MAAMD,KAAKE,SAAWT,EAAmBK,SAGjG,MAAO,CACLK,GAAI,cACJC,KAAM,gBACNC,KAAM,GAAGN,wH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","sources":["app/constants.ts","constants.ts","Events.ts","Projects.ts","Problems.ts","News.ts","Talents.ts","Upgrades.ts","app/gameLoop.ts"],"sourcesContent":["export const MANUAL = 'manual' as const;\nexport const COMMON = 'common' as const;\nexport const SCIENCE = 'science' as const;\nexport const FAITH = 'faith' as const;\nexport const ECONOMY = 'economy' as const;\n\nexport const EVENT_AUTO_CLOSE_TIME = 30000; // Время автоматического закрытия события в мс\n\n// Константы для новостей\nexport const NEWS_DISPLAY_TIME = 10000; // 10 секунд\nexport const NEWS_INTERVAL =  30000; // 30 секунд\n\n// Константы для первой стадии\nexport const TOTAL_RESOURCES_FOR_FIRST_STAGE = 100000; // 100k resources\nexport const SCIENCE_RESOURCES_FOR_FIRST_STAGE = 50000; // 50k science\nexport const FAITH_RESOURCES_FOR_FIRST_STAGE = 50000; // 50k faith\nexport const ECONOMY_RESOURCES_FOR_FIRST_STAGE = 200000; // 200k economy\n\n\n","// Цвета для золотых частиц\r\nexport const GOLD_COLORS = [\r\n  '#FFD700', // Золотой\r\n  '#FFC125', // Насыщенный золотой\r\n  '#FFCC33', // Яркий золотой\r\n  '#E6BE8A', // Песочный золотой\r\n  '#DAA520'  // Тёмный золотой\r\n];\r\n\r\nexport const COLORS = {\r\n  \"White smoke\":\"#efefed\",\r\n  \"Alabaster\":\"#ebe3d8\",\r\n  \"Light yellow\":\"#ffffe3\",\r\n  \"Melon\":\"#FFB096\",\r\n  \"Tomato\":\"#ff6048\",\r\n  \"Cinnabar\":\"#db5f43\",\r\n  \"Cornell red\":\"#af1510\",\r\n  \"Eerie black\":\"#1d1b1c\",\r\n  \"Gunmetal\":\"#2e3439\"\r\n}\r\n\r\n// Country names from the geoJSON data\r\nexport const COUNTRY_NAMES = [\r\n  'Afghanistan',\r\n  'Angola',\r\n  'Albania',\r\n  'United Arab Emirates',\r\n  'Argentina',\r\n  'Armenia',\r\n  'Antarctica',\r\n  'Australia',\r\n  'Austria',\r\n  'Azerbaijan',\r\n  'Burundi',\r\n  'Belgium',\r\n  'Benin',\r\n  'Burkina Faso',\r\n  'Bangladesh',\r\n  'Bulgaria',\r\n  'Bahamas',\r\n  'Bosnia and Herzegovina',\r\n  'Belarus',\r\n  'Belize',\r\n  'Bolivia',\r\n  'Brazil',\r\n  'Brunei',\r\n  'Bhutan',\r\n  'Botswana',\r\n  'Central African Republic',\r\n  'Canada',\r\n  'Switzerland',\r\n  'Chile',\r\n  'China',\r\n  'Ivory Coast',\r\n  'Cameroon',\r\n  'Democratic Republic of the Congo',\r\n  'Republic of the Congo',\r\n  'Colombia',\r\n  'Costa Rica',\r\n  'Cuba',\r\n  'Cyprus',\r\n  'Czech Republic',\r\n  'Germany',\r\n  'Djibouti',\r\n  'Denmark',\r\n  'Dominican Republic',\r\n  'Algeria',\r\n  'Ecuador',\r\n  'Egypt',\r\n  'Eritrea',\r\n  'Spain',\r\n  'Estonia',\r\n  'Ethiopia',\r\n  'Finland',\r\n  'Fiji',\r\n  'Falkland Islands',\r\n  'France',\r\n  'Gabon',\r\n  'United Kingdom',\r\n  'Georgia',\r\n  'Ghana',\r\n  'Guinea',\r\n  'Gambia',\r\n  'Guinea-Bissau',\r\n  'Equatorial Guinea',\r\n  'Greece',\r\n  'Greenland',\r\n  'Guatemala',\r\n  'Guyana',\r\n  'Honduras',\r\n  'Croatia',\r\n  'Haiti',\r\n  'Hungary',\r\n  'Indonesia',\r\n  'India',\r\n  'Ireland',\r\n  'Iran',\r\n  'Iraq',\r\n  'Iceland',\r\n  'Israel',\r\n  'Italy',\r\n  'Jamaica',\r\n  'Jordan',\r\n  'Japan',\r\n  'Kazakhstan',\r\n  'Kenya',\r\n  'Kyrgyzstan',\r\n  'Cambodia',\r\n  'South Korea',\r\n  'Kosovo',\r\n  'Kuwait',\r\n  'Laos',\r\n  'Lebanon',\r\n  'Liberia',\r\n  'Libya',\r\n  'Sri Lanka',\r\n  'Lesotho',\r\n  'Lithuania',\r\n  'Luxembourg',\r\n  'Latvia',\r\n  'Morocco',\r\n  'Moldova',\r\n  'Madagascar',\r\n  'Mexico',\r\n  'Macedonia',\r\n  'Mali',\r\n  'Myanmar',\r\n  'Montenegro',\r\n  'Mongolia',\r\n  'Mozambique',\r\n  'Mauritania',\r\n  'Malawi',\r\n  'Malaysia',\r\n  'Namibia',\r\n  'New Caledonia',\r\n  'Niger',\r\n  'Nigeria',\r\n  'Nicaragua',\r\n  'Netherlands',\r\n  'Norway',\r\n  'Nepal',\r\n  'New Zealand',\r\n  'Oman',\r\n  'Pakistan',\r\n  'Panama',\r\n  'Peru',\r\n  'Philippines',\r\n  'Papua New Guinea',\r\n  'Poland',\r\n  'Puerto Rico',\r\n  'North Korea',\r\n  'Portugal',\r\n  'Paraguay',\r\n  'Qatar',\r\n  'Romania',\r\n  'Russia',\r\n  'Rwanda',\r\n  'Western Sahara',\r\n  'Saudi Arabia',\r\n  'Sudan',\r\n  'South Sudan',\r\n  'Senegal',\r\n  'Solomon Islands',\r\n  'Sierra Leone',\r\n  'El Salvador',\r\n  'Somalia',\r\n  'Serbia',\r\n  'Suriname',\r\n  'Slovakia',\r\n  'Slovenia',\r\n  'Sweden',\r\n  'Swaziland',\r\n  'Syria',\r\n  'Chad',\r\n  'Togo',\r\n  'Thailand',\r\n  'Tajikistan',\r\n  'Turkmenistan',\r\n  'East Timor',\r\n  'Trinidad and Tobago',\r\n  'Tunisia',\r\n  'Turkey',\r\n  'Taiwan',\r\n  'Tanzania',\r\n  'Uganda',\r\n  'Ukraine',\r\n  'Uruguay',\r\n  'United States',\r\n  'Uzbekistan',\r\n  'Venezuela',\r\n  'Vietnam',\r\n  'Vanuatu',\r\n  'Yemen',\r\n  'South Africa',\r\n  'Zambia',\r\n  'Zimbabwe'\r\n];\r\n","import { EventGenerator, GameEvent, GameState } from \"./types\";\nimport { SCIENCE, FAITH, ECONOMY, COMMON, MANUAL } from \"./app/constants\";\nimport { COUNTRY_NAMES } from \"./constants\";\n\n\n// Функция для генерации события захвата страны\nfunction createBuyCountryEvent(state: GameState,target?: string): GameEvent | null {\n  // Получаем список незахваченных стран\n  const availableCountries = COUNTRY_NAMES.filter(\n    countryId => !state.conqueredCountries.includes(countryId)\n  );\n  \n  // Если нет доступных стран, не создаем событие\n  if (availableCountries.length === 0) {\n    return null;\n  }\n  \n  // Выбираем случайную страну для захвата\n  const targetCountry = target || availableCountries[Math.floor(Math.random() * availableCountries.length)];\n  \n  // Создаем событие для конкретной страны\n  return {\n    id: \"BUY_COUNTRY\",\n    type: \"countryAction\",\n    name: `${targetCountry} хочет присоедениться`,\n    description: \"Возможность захватить новую страну\",\n    icon: \"🌍\",\n    message: \"Новая страна готова к захвату!\",\n    weight: 50,\n    conditions: [\n      (state) => state.conqueredCountries.length < COUNTRY_NAMES.length\n    ],\n    effects: [\n      (state) => {\n        state.conqueredCountries.push(targetCountry);\n      }\n    ],\n    cooldown: 30000,\n    status: 'in_progress',\n    targetCountry: targetCountry\n  };\n}\nexport const DynamicEvents: Record<string, EventGenerator> = {\n  \"BUY_COUNTRY\": createBuyCountryEvent,\n};\n\n// Cтатическ события игры\nexport const GAME_EVENTS: Record<string, GameEvent> = {\n  \"SCIENTIFIC_BREAKTHROUGH\": {\n    id: \"SCIENTIFIC_BREAKTHROUGH\",\n    type: \"random\",\n    name: \"Ученые совершили прорыв в квантовой физике!\",\n    description: \"Ученые совершили прорыв в квантовой физике!\",\n    icon: \"🧠\",\n    position: \"random\",\n    message: \"Ученые совершили прорыв в квантовой физике!\",\n    effects: [\n      (state) => {\n        state.spheres[SCIENCE].resources += 500;\n        state.spheres[ECONOMY].resources += 200;\n      }\n    ],\n    weight: 0.1,\n    conditions: [\n      (state) => state.spheres[SCIENCE].resources > 1000,\n    ],\n    cooldown: 3600000,\n    once: false\n  },\n  \"RELIGIOUS_REVELATION\": {\n    id: \"RELIGIOUS_REVELATION\",\n    type: \"random\",\n    name: \"Явилось божественное знамение!\",\n    description: \"Явилось божественное знамение!\",\n    icon: \"🔱\",\n    position: \"random\",\n    message: \"Явилось божественное знамение!\",\n    effects: [\n      (state) => {\n        state.multipliers[FAITH] *= 1.5;\n        state.spheres[SCIENCE].resources -= 100;\n      }\n    ],\n    weight: 0.1,\n    conditions: [\n      (state) => state.spheres[FAITH].resources > 500,\n      (state) => state.spheres[SCIENCE].resources < 300\n    ],\n    cooldown: 3600000,\n    once: true\n  },\n  \"RESORCES_DISCOVERY\": { \n    id: \"RESORCES_DISCOVERY\",\n    type: \"random\",\n    name: \"Были открыты новые ресурсы!\",\n    description: \"Были открыты новые ресурсы!\",\n    icon: \"💰\",\n    position: \"random\",\n    message: \"Были открыты новые ресурсы!\",\n    effects: [\n      (state) => {\n        state.resources *=  1.01;\n      }\n    ],\n    weight: 1,\n    conditions: [\n      (state) => state.resources > 10,\n    ],\n    cooldown: 1000 * 10,\n    once: false\n  },\n  \"RESEARCH_ARTIFACT\": {\n    id: \"RESEARCH_ARTIFACT\",\n    type: \"random\",\n    name: \"Монахи нашли древний священный артефакт!\",\n    description: \"Монахи нашли древний священный артефакт!\",\n    icon: \"🙏🏻\",\n    position: \"random\",\n    message: \"Монахи нашли древний священный артефакт!\",\n    effects: [\n      (state) => {\n        state.spheres[FAITH].resources += 1000;\n        const artefacts = ['artifact1', 'artifact2', 'artifact3', 'Holy Grail'];\n        const randomArtefact = artefacts[Math.floor(Math.random() * artefacts.length)];\n        // TODO: news about artefact with image\n        if (randomArtefact === 'Holy Grail') {\n          state.spheres[FAITH].resources += 10000;\n          state.secondStage.push({\n            id: \"HOLY_GRAIL\"})\n        }\n      },\n    ],\n    weight: 0.05,\n    conditions: [\n      (state) => state.activeProjects.some(project => project.id === 'research-artifact'),\n    ],\n    cooldown: 1000 * 10,\n    once: false\n  },\n  \"RESOURCE_BOOST\": {\n    id: \"RESOURCE_BOOST\",\n    type: \"random\",\n    name: \"Увеличение ресурсов\",\n    description: \"Временное увеличение производства ресурсов\",\n    icon: \"📈\",\n    position: \"random\",\n    message: \"Производство ресурсов временно увеличено!\",\n    effects: [\n      (state) => {\n        state.multipliers[ECONOMY] *= 1.5;\n        state.multipliers[FAITH] *= 1.5;\n        state.multipliers[SCIENCE] *= 1.5;\n        setTimeout(() => {\n          state.multipliers[ECONOMY] /= 1.5;\n          state.multipliers[FAITH] /= 1.5;\n          state.multipliers[SCIENCE] /= 1.5;\n        }, 30000);\n      }\n    ],\n    weight: 0.02,\n    conditions: [\n      (state) => state.resources > 1000\n    ],\n    cooldown: 60000,\n    once: false\n  },\n  \"OPEN_PLANET\": {\n    id: \"OPEN_PLANET\",\n    type: \"random\",\n    name: \"Открытие новой планеты\",\n    description: \"Открытие новой планеты\",\n    icon: \"🌍\",\n    position: \"random\", \n    message: \"Открытие новой планеты\",\n    effects: [\n      (state) => {\n        //research new planet\n      }\n    ],\n    weight: 0.01,\n    conditions: [\n      (state) => state.cosmicCivilization.conquest === true\n    ],\n    cooldown: 1000 * 10,\n    once: false\n  },\n  \"GOLD_BAR\": { \n    id: \"GOLD_BAR\",\n    type: \"random\",\n    name: \"Золотой слиток\",\n    description: \"Золотой слиток\",\n    icon: \"💰\",\n    position: \"random\",\n    message: \"Золотая баржа\",\n    effects: [\n      (state) => {\n        state.resources += 10000;\n      }\n    ],\n    weight: 0.01,\n    conditions: [\n      (state) => state.resources > 10000\n    ],\n    cooldown: 1000 * 10,\n    once: false\n  }\n};","import { ECONOMY, FAITH, SCIENCE } from \"./app/constants\";\nimport { Project } from \"./types\";\n\n\n\nexport const Projects: Record<string, Project> = {\n    'research-lab': {\n        id: 'research-lab',\n        name: 'Research Lab',\n        description: 'A facility dedicated to scientific research and development.',\n        icon: '🔬',\n        progress: 0,\n        speed: 1,\n        effects: [\n            (state) => state.multipliers[SCIENCE] += 0.2 \n        ],\n        failEffects: [\n            (state) => state.resources -= 100 \n        ],\n        problems: [\n            (state) => {\n                if (state.spheres[FAITH].resources > 1000) {\n                    state.problems.push({\n                        id: 'religios-fanatics',\n                        projectId: 'research-lab'\n                    });\n                }\n            }\n        ]\n    },\n    'advanced-research-lab': {\n        id: 'advanced-research-lab',\n        name: 'Advanced Research Lab',\n        description: 'An upgraded research facility with cutting-edge equipment.',\n        icon: '🧪',\n        progress: 0,\n        speed: 1,\n        effects: [\n            (state) => state.multipliers[SCIENCE] += 0.30,\n            \n        ],\n        failEffects: [\n            (state) => state.resources -= 200 \n        ],\n        problems: [\n            (state) => {\n                if (state.spheres[FAITH].resources > 10000) {\n                    state.problems.push({\n                        id: 'religios-fanatics',\n                        projectId: 'advanced-research-lab'\n                    });\n                }\n            }\n        ]\n    },\n    'global-security-system': {\n        id: 'global-security-system',\n        name: 'Глобальная система безопасности',\n        description: 'Система, обеспечивающая безопасность всего человечества. Провал приведет к катастрофе!',\n        icon: '🛡️',\n        progress: 0,\n        speed: 0.5, // Медленный прогресс\n        effects: [\n            (state) => state.multipliers[SCIENCE] += 0.50,\n            (state) => state.multipliers[ECONOMY] += 0.30,\n            (state) => state.multipliers[FAITH] += 0.30\n        ],\n        failEffects: [\n            (state) => state.resources -= 1000\n        ],\n        problems: [\n            (state) => {\n                if (state.spheres[ECONOMY].resources > 10000) {\n                    state.problems.push({\n                        id: 'libs',\n                        projectId: 'global-security-system'\n                    });\n                }\n            }\n        ]\n        \n    },\n    'new-material': {\n        id: 'new-material',\n        name: 'New Material',\n        description: 'Начать разработку новых материалов',\n        icon: '🧬',\n        progress:0,\n        speed: 0.01,\n        effects: [\n            (state) => {\n                const materials = ['nanotubes', 'quantum-threads', 'dark-matter', 'negative-mass-matter'];\n                const randomMaterial = materials[Math.floor(Math.random() * materials.length)];\n                state.secondStage.push(randomMaterial);\n            },  \n        ],\n        failEffects: [\n            (state) => state.resources -= 3000\n        ]\n    },\n    'antiair-gun': {\n        id: 'antiair-gun',\n        name: 'Antiair Gun',\n        description: 'Создать пушку, что сможет отклонить снаряд от земли',\n        icon: '💂‍♀️🧬',\n        progress: 0,\n        speed: 0.004,\n        effects: [\n            (state) => state.multipliers[ECONOMY] += 0.20,\n            (state) => state.secondStage.push('antiair-gun')\n        ],\n        failEffects: [\n            (state) => state.resources -= 4000\n        ],\n        problems: [\n            (state) => {\n                if (state.conqueredCountries.length < 25) {\n                    state.problems.push({\n                        id: 'antigun',\n                        projectId: 'antiair-gun'    \n                    });\n                }\n            }\n        ]\n    },\n    'dyson-swarm': {\n        id: 'dyson-swarm',\n        name: 'Dyson Swarm',\n        description: 'Создать рой из спутников, вокруг Солнца.',\n        icon: '🛰',\n        progress: 0,\n        speed: 0.5,\n        effects: [\n            (state) => state.multipliers[SCIENCE] += 0.20,\n            (state) => state.secondStage.push('dyson-swarm')\n        ],\n        failEffects: [\n            (state) => state.resources -= 1000\n        ]\n    },\n    'dyson-circle': {\n        id: 'dyson-circle',\n        name: 'Dyson Circle',\n        description: 'Создать кольцо из спутников, вокруг Солнца.',\n        icon: '🛰',\n        progress: 0,\n        speed: 0.04,\n        effects: [\n            (state) => state.multipliers[SCIENCE] += 0.50,\n            (state) => state.secondStage.push('dyson-circle')\n        ],\n        failEffects: [\n            (state) => state.resources -= 5000,\n            (state) => state.conquestSpeed -= 0.50\n        ],\n        problems: [\n            (state) => {\n                if (state.seed > 0.9) {\n                    state.problems.push({\n                        id: 'gravitation',\n                        projectId: 'dyson-circle'\n                    });\n                }\n            }\n        ]\n    },\n    'dyson-sphere': {\n        id: 'dyson-sphere',\n        name: 'Dyson Sphere',\n        description: 'Создать сферу из спутников, вокруг Солнца.',\n        icon: '🛰',\n        progress: 0,\n        speed: 0.001,\n        effects: [\n            (state) => state.multipliers[SCIENCE] += 2,\n            (state) => state.secondStage.push('dyson-sphere')\n        ],\n        failEffects: [\n            (state) => state.resources -= 10000,\n            (state) => state.conquestSpeed -= 0.50\n        ],\n        problems: [\n            (state) => {\n                if (state.seed > 0.9) {\n                    state.problems.push({\n                        id: 'gravitation',\n                        projectId: 'dyson-sphere'\n                    });\n                }\n            }\n        ]\n    },\n    'research-artifact': {\n        id: 'research-artifact',\n        name: 'Research Artifact',\n        description: 'Создать группу монахов, что будут искать древние священные артефакты',\n        icon: '🧬',\n        progress: 0,\n        speed: 0.00006,\n        effects: [\n            // will turn RESEARCH_ARTIFACT on\n        ],\n        failEffects: [\n            (state) => state.resources -= 1500\n        ],\n        problems: [\n            (state) => {\n                if (state.spheres[ECONOMY].resources > 10000) {\n                    state.problems.push({\n                        id: 'capitalists',\n                        projectId: 'research-artifact'\n                    });\n                }\n            }\n        ]\n    },\n    'extraterrestrial-search': {\n        id: 'extraterrestrial-search',\n        name: 'Extraterrestrial Search',\n        description: 'Создать массив спутников и радаров, что будут искать контакт с внеземными цивилизациями',\n        icon: '🌌',\n        progress: 0,\n        speed: 0.000001,\n        effects: [\n            (state) => {\n                if (Math.random() < 0.5) {\n                    state.secondStage.push('contact')\n                    state.newsQueue.push('special-contact');\n                }\n            }\n        ],\n        failEffects: [\n            (state) => state.resources -= 2000\n        ],\n        problems: [\n            (state) => {\n                if (state.spheres[ECONOMY].resources > 10000) {\n                    state.problems.push({\n                        id: 'capitalists',\n                        projectId: 'extraterrestrial-search'\n                    });\n                }\n                state.problems.push({\n                    id: 'rationalists',\n                    projectId: 'extraterrestrial-search'\n                });\n            }\n        ]\n    },\n    'strange-dust': {\n        id: 'strange-dust',\n        name: 'Strange Dust',\n        description: 'Проводится эксперимент по созданию странного вещества, которое может стать ответом на наши вопросы',\n        icon: '🧬',\n        progress: 0,\n        speed: 0.2,\n        effects: [\n            (state) => state.secondStage.push('spice')\n        ],\n        failEffects: [\n            (state) => state.resources -= 1500\n        ],\n        problems: [\n            (state) => {\n                \n                state.problems.push({\n                    id: 'spice-explosion',\n                    projectId: 'strange-dust'\n                });\n                state.problems.push({\n                    id: 'spice-empty',\n                    projectId: 'strange-dust'\n                });\n            }\n        ]\n    },\n    'nanoshield': {\n        id: 'nanoshield',\n        name: 'Nanoshield',\n        description: 'Создать щит, защищающий корабль от опасностей при быстром перемещении',\n        icon: '🌌',\n        progress: 0,\n        speed: 0.5,\n        effects: [\n            (state) => state.cosmicCivilization.shipShield = true\n        ],\n        failEffects: [\n\n        ],\n        problems: [\n\n        ]\n    },\n    'spice-shield': {\n        id: 'spice-shield',\n        name: 'Spice Shield',\n        description: 'Создать щит, защищающий корабль от опасностей при быстром перемещении',\n        icon: '🌌',\n        progress: 0,\n        speed: 0.5,\n        effects: [\n            (state) => state.cosmicCivilization.shipShield = true\n        ],\n        failEffects: [\n            (state) => state.resources -= 1500\n        ],\n        problems: [\n            \n        ]\n    },\n    'quantum-beacon': {\n        id: 'quantum-beacon',\n        name: 'Quantum Beacon',\n        description: 'Создание квантовых маяков, что позволит нам перемещаться между планетами',\n        icon: '🌌',\n        progress: 0,\n        speed: 0.1,\n        effects: [\n            (state) => state.cosmicCivilization.conquest = true\n        ],\n        failEffects: [\n\n        ],\n        problems: [\n            \n        ]\n    },\n    'space-folding-engine': {\n        id: 'space-folding-engine',\n        name: 'Space Folding Engine',\n        description: 'Создание двигателя, что позволит нам перемещаться между планетами',\n        icon: '🌌',\n        progress: 0,\n        speed: 0.1,\n        effects: [\n            (state) => state.cosmicCivilization.FTL = true\n        ],\n        failEffects: [\n            (state) => state.resources -= 1500\n        ],\n        problems: [\n            \n        ]\n    },\n    'white-hole': {\n        id: 'white-hole',\n        name: 'White Hole',\n        description: 'Создание чревоточины, что позволит нам перемещаться между планетами',\n        icon: '🌌',\n        progress: 0,\n        speed: 0.11,\n        effects: [\n            (state) => state.cosmicCivilization.FTL = true\n        ],\n        failEffects: [\n            (state) => state.resources -= 1500\n        ],\n        problems: [\n            (state) => {\n                state.problems.push({\n                    id: 'collapse',\n                    projectId: 'white-hole'\n                });\n            }\n        ]\n    },\n    'big-fold': {\n        id: 'big-fold',\n        name: 'Big Fold',\n        description: 'Сворачивание пространства от нас прямо к врагу!',\n        icon: '🌌', \n        progress: 0,\n        speed: 0.11,\n        effects: [\n            (state) => state.cosmicCivilization.FTL = true\n        ],\n        failEffects: [\n            (state) => state.resources -= 1500\n        ],\n        problems: [\n            (state) => {\n                state.problems.push({\n                    id: 'big-collapse',\n                    projectId: 'big-fold'\n                });\n            }\n        ]\n    },\n    'obsidian-portal': {\n        id: 'obsidian-portal',\n        name: 'Obsidian Portal',\n        description: 'Создание портала, что позволит нам перемещаться между планетами',\n        icon: '🌌',\n        progress: 0,\n        speed: 0.11,\n        effects: [\n            (state) => state.cosmicCivilization.FTL = true,\n            (state) => state.cosmicCivilization.conquest = true,\n            (state) => state.activeEvents.push({\n                id: 'gold-bar',\n                position: [0,0]\n            })\n        ],\n        failEffects: [\n            (state) => state.resources -= 1500\n        ],\n        problems: [\n            (state) => {\n                state.problems.push({\n                    id: 'cripper',\n                    projectId: 'obsidian-portal'\n                });\n            }\n        ]\n    }\n};\n","import { GameState, Problem } from \"./types\";\n\nexport const Problems: Record<string, Problem> = {\n    'religios-fanatics': {\n        id: 'religios-fanatics',\n        name: 'Религиозные фанатики',\n        description: 'Религиозные фанатики недовольны вашим научным прогрессом',\n        icon: '🔮',\n        position: 'random',\n        weight: 10,\n        amount: 50,\n        time: 1000 * 25\n    },\n    'libs': {\n        id: 'libs',\n        name: 'Либералы',\n        description: 'Люди уверены что все ваши усилия направлены на контроль, а не на безопасность',\n        icon: '🛂',\n        position: 'random',\n        weight: 10,\n        amount: 50, \n        time: 1000 * 25\n    },\n    'antigun': {\n        id: 'antigun',\n        name: 'Противники оружия',\n        description: 'Лобби против оружия, не хотят видеть огромную пушку, которую видно везде',\n        icon: '🔫',\n        position: 'random',\n        weight: 3,\n        amount: 50,\n        time: 1000 * 25\n    },\n    'gravitation': {\n        id: 'gravitation',\n        name: 'Гравитация',\n        description: 'Сфера начала рушится под своим весом',\n        icon: '💥',\n        position: 'random',\n        weight: 10,\n        amount: 200,\n        time: 1000 * 250\n    },\n    'capitalists': {\n        id: 'capitalists',\n        name: 'Капиталисты',\n        description: 'Людей не устраивает проект, деньги можно потратить выгоднее',\n        icon: '💰',\n        position: 'random',\n        weight: 10,\n        amount: 200,\n        time: 1000 * 250\n    },\n    'rationalists': {\n        id: 'rationalists',\n        name: 'Рационалисты',\n        description: 'Что за чушь? Это невозможно!',\n        icon: '🤡',\n        position: 'random',\n        weight: 10,\n        amount: 200,\n        time: 1000 * 250\n    },\n    'spice-explosion': {\n        id: 'spice-explosion',\n        name: 'Взрыв странного вещества',\n        description: 'Странное вещество взорвалось',\n        icon: '💥',\n        position: 'random',\n        weight: 10,\n        amount: 50,\n        time: 1000 * 60\n    },\n    'spice-empty': {\n        id: 'spice-empty',\n        name: 'Пустота',\n        description: 'Странное вещество это пустышка!',\n        icon: '💥',\n        position: 'random',\n        weight: 10,\n        amount: 20,\n        time: 1000 * 60\n    },\n    'cripper': {\n        id: 'cripper',\n        name: 'Криппер',\n        description: 'Что он тут делает?',\n        icon: '💥', \n        position: 'random',\n        weight: 10,\n        amount: 200,\n        time: 1000 * 400\n    },\n    'collapse': {\n        id: 'collapse',\n        name: 'Схлопывание',\n        description: 'Ваш проект схлопывается под своим весом!',\n        icon: '💥',\n        position: 'random',\n        weight: 10,\n        amount: 200,\n        time: 1000 * 400\n    },\n    'big-collapse': {\n        id: 'big-collapse',\n        name: 'Схлопывание',\n        description: 'Ваш проект схлопывается под своим весом!',\n        icon: '💥',\n        position: 'random',\n        weight: 80,\n        amount: 20,\n        time: 1000 * 20\n    }\n};\n","import { NewsItem } from \"./types\";\nimport { NEWS_DISPLAY_TIME, NEWS_INTERVAL } from \"./app/constants\";\n\nexport { NEWS_DISPLAY_TIME, NEWS_INTERVAL };\n\nexport const News: Record<string, NewsItem> = {\n  \n  'news1': {\n    id: 'news1',\n    text: 'Глобальный саммит по выбору общего гимна. После 72 часов дебатов лидеры согласились, что гимном Земли станет кавер Metallica на песню \"We Are the World\" в исполнении роботов-певцов. Китай настаивал на традиционной опере, но Билл Гейтс предложил NFT-гимн, который меняется каждый час.',\n    stage: 1\n  },\n  'news2': {\n    id: 'news2',\n    text: 'Дизайн флага объединенной Земли вызвал скандал: делегаты не могут решить, что важнее — пиксельное изображение кота (предложение Швеции) или голограмма Илона Маска на фоне радуги (идея Марса-колонии). Пока используют временный флаг — фото бутерброда с авокадо',\n    stage: 1\n  },\n  'news3': {\n    id: 'news3',\n    text: 'Саммит G20 приостановлен из-за нехватки эспрессо-машин. Италия отказалась делиться рецептом, пока ее не включили в список \"самых стильных флотов\". Космонавты МКС предложили вакуумные кофеварки, но их идею назвали \"слишком логичной\".',\n    stage: 1\n  },\n  'news4': {\n    id: 'news4',\n    text: 'США и Россия провели совместные учения \"Привет, пришельцы!\": войска изображали инопланетян, атакуя друг друга надувными мечами. Китай раскритиковал \"детский подход\" и показал роботов-панд с лазерами. Швейцария предложила своих наемников инопланетянам.',\n    stage: 1\n  },\n  'news5': {\n    id: 'news5',\n    text: 'Спутниковый интернет Земли взломан хакерами-котами. Злоумышленники требуют 10 млн тонн корма и пожизненный доступ к YouTube с роликами про птиц. Глава IT-комитета заявил: \"Это месть за то, что мы до сих пор не изобрели вечный лазер-дразнилку\".',\n    stage: 1\n  },\n  'news6': {\n    id: 'news6',\n    text: 'Создан \"Комитет по борьбе с комитетами\": 500 страниц устава, 200 подкомиссий и 1 робот-секретарь, который постоянно повторяет: \"Ваш запрос рассматривается\". Первое решение — утвердить форму заявки на спасение мира в 3 экземплярах.',\n    stage: 1\n  },\n  'news7': {\n    id: 'news7',\n    text: 'Фестиваль \"Единая кухня Земли\" закрыт после инцидента с суши-пиццей. Франция объявила гастрономический террор, Индия потребовала карри-версию шаурмы, а Британия... Британия просто жарила бобы. Шеф-повар МКС: \"В космосе все едят из тюбиков — вот и решение!\"',\n    stage: 1\n  },\n  'news8': {\n    id: 'news8',\n    text: 'Ученые пытаются подключить дельфинов к обороне Земли: \"Они умнее политиков и уже давно контролируют 70% океана\". Проблема: дельфины требуют, чтобы все переговоры велись под водой, а в качестве оплаты — запрет на пластиковые пакеты.',\n    stage: 1\n  },\n  'news9': {  \n    id: 'news9',\n    text: 'Под хештегом #SaveEarthChallenge пользователи снимают ролики, как \"защищают\" планету: от танцев с пылесосами до битв подушками в костюмах пришельцев. Пентагон: \"Если это не сработает, мы хотя бы станем вирусными\".',\n    stage: 1\n  },\n  'news10': {\n    id: 'news10',\n    text: 'Плоскоземельники обвиняют NASA: \"Пришельцы — это проект Илона Маска по продаже космических биткоинов!\"',\n    stage: 1\n  },\n  'news11': {\n    id: 'news11',\n    text: 'Секта \"Луна — это сыр\" требует немедленно накормить инопланетян фондю. \"Они прилетели за рецептом!\"',\n    stage: 1\n  },\n  'news12': {\n    id: 'news12',\n    text: 'Анонимный источник: Грета Тунберг — инопланетный шпион. Доказательство: её глаза всегда светятся в темноте.',\n    stage: 1\n  },\n  'news13': {\n    id: 'news13',\n    text: 'Инсайдеры: Пришельцы внедрили алгоритм TikTok, чтобы люди забыли строить защиту. Доказательство: все танцуют под \"Alien Pop\"!',\n    stage: 1\n  },\n  'news14': {\n    id: 'news14',\n    text: 'Секретный доклад: Джефф Безос строит космический лифт не для людей — это \"троянский конь\" для марсианских корпораций!',\n    stage: 1\n  },\n  'news15': {\n    id: 'news15',\n    text: 'Учёные в панике: кошки — инопланетные дроны! Их мурлыканье — зашифрованные послания Центаврианскому Совету.',\n    stage: 1\n  },\n  'news16': {\n    id: 'news16',\n    text: 'Анонимный блогер: 5G вышки — это антенны для приёма рецепта идеального кофе от Плутона. NASA скрывает!',\n    stage: 1\n  },\n  'news17': {\n    id: 'news17',\n    text: 'Тайные записи: Биткоин создан пришельцами, чтобы купить Землю за 1 сатоши. Сатоши Накамото — псевдоним инопланетного риелтора',\n    stage: 1\n  },\n  'news18': {\n    id: 'news18',\n    text: 'Вирусное видео: растения зомбируют людей через фотосинтез. \"Они хотят, чтобы мы стали их садовниками!\" — кричит ботаник-отщепенец.',\n    stage: 1\n  },  \n  'news19': {\n    id: 'news19',\n    text: 'Уфологи: Норвегия не существует — это голограмма для прикрытия портала в созвездии Рака. Фьорды? Проекция!\".',\n    stage: 1\n  },  \n  'news20': {\n    id: 'news20',\n    text: 'Телеграм-канал \"Истина\": птицы — беспилотники рептилоидов. Голубиная почта? Шпионаж за шаурмой!',\n    stage: 1\n  },  \n  'news21': {\n    id: 'news21',\n    text: 'Срочно в эфир! Пингвины Антарктиды тайно копают тоннель к ядру Земли. Цель: предложить его в качестве курорта пришельцам-туристам.',\n    stage: 1\n  },  \n  'news22': {\n    id: 'news22',\n    text: 'Срочно! Марсоход Perseverance нашел следы межгалактического Starbucks. \"Они пьют латте из черных дыр!\" — паникуют бариста.',\n    stage: 1\n  },  \n  // Специальные новости для добавления через очередь\n  'initial-news': {\n    id: 'initial-news',\n    text: 'Добро пожаловать в мир глобального доминирования! Начните с малого, захватите планету!',\n    stage: 'special'\n  },\n  'special-conquest': {\n    id: 'special-conquest',\n    text: 'Еще одна страна пала перед вашим могуществом! Мировые лидеры в панике!',\n    stage: 'special'\n  },\n  'special-project-complete': {\n    id: 'special-project-complete',\n    text: 'Проект завершен успешно! Ваши подданные аплодируют вашей несравненной мудрости!',\n    stage: 'special'\n  },\n  'special-problem-solved': {\n    id: 'special-problem-solved',\n    text: 'Проблема решена! Враги дрожат, союзники восхищаются вашей решительностью!',\n    stage: 'special'\n  },\n  'special-talent-unlocked': {\n    id: 'special-talent-unlocked',\n    text: 'Новый талант раскрыт! Ваши способности растут, и мир трепещет!',\n    stage: 'special'\n  },\n  'special-contact': {\n    id: 'special-contact',\n    text: 'Мы нашли контакт с внеземными цивилизациями!',\n    stage: 'special'\n  },\n  'special-hell': {\n    id: 'special-hell',\n    text: 'Почему в этом измерении так много свиней?',\n    stage: 'special'\n  },\n  'special-hell2': {\n    id: 'special-hell2',\n    text: 'В этом измерении все такое красное, это что? Это коммунизм, сынок!',\n    stage: 'special'\n  },\n  'ship-shield': {\n    id: 'ship-shield',\n    text: 'Агентство внешнего космоса напоминает, пена с силовых щитов хоть и вкусная, едой не является, пожалуйста воздержитесь от ее поедания, рабочие наносят ее уже в 4й раз за неделю.',\n    stage: 'special'\n  },\n};","import { COMMON, ECONOMY, FAITH, SCIENCE } from \"./app/constants\";\nimport { COUNTRY_NAMES } from \"./constants\";\nimport { Talent } from \"./types\";\n\n\n// one row is 500 resource\n\n// available classes:\n// .positive\n// .negative\n// .project\n// .cost\n// .economy-req\n// .science-req\n// .faith-req\n// .resource-req\n// .talent-name\n\nexport const TALENTS: Talent[] = [\n  {\n    id: 'global-trader',\n    name: 'Global Trader',\n    description: 'Ваша торговля улучшает взаимотношения с другими странами',\n    category: ECONOMY,\n    position: [3, 3],\n    requires: [],\n    state: 'locked',\n    visible: [ () => true],\n    available: [ (state) => state.spheres[ECONOMY].resources >= 3000, (state) => state.stage < 2],\n    icon: '🌐💰',\n    effects: [\n      (state) => { state.conquestSpeed += 0.10 },\n    ],\n    meta: {\n      effectDesctription: 'Скорость завоевания <span class=\"positive\">+10%</span>',\n      requirementsDescription: '<span class=\"science-req\">3000</span> 🧬',\n      flavorText: 'Как и было предсказано Зальцманом.',\n    }\n  },\n  {\n    id: 'banker',\n    name: 'Banker',\n    description: 'Развитие экономики дает вам дополнительные ресурсы',\n    category: ECONOMY,\n    position: [2, 4],\n    requires: [],\n    state: 'locked',\n    visible: [ () => true],\n    available: [ (state) => state.spheres[ECONOMY].resources >= 4000, (state) => state.stage < 2],\n    shade: [ (state) => state.spheres[ECONOMY].resources < 1000],\n    icon: '🏦',\n    effects: [\n      (state) => { state.autoClickPower += 0.10 }, \n      (state) => { state.multipliers[COMMON] += 0.10 },\n    ],\n    meta: {\n      effectDesctription: 'Добыча ₿ <span class=\"positive\">+10%</span>',\n      requirementsDescription: '<span class=\"economy-req\">4000</span> 💸',\n    }\n  },\n  {\n    id: 'infrastructure-magnate',\n    name: 'Infrastructure Magnate',\n    description: 'Усильте вашу инфраструктуру, это увеличит скорость строительства проектов',\n    category: ECONOMY,\n    position: [2, 5],\n    requires: [],\n    state: 'locked',\n    visible: [ () => true],\n    shade: [ (state) => state.spheres[ECONOMY].resources < 3000],\n    available: [ (state) => state.spheres[ECONOMY].resources >= 5000, (state) => state.stage < 2],\n    icon: '👌',\n    effects: [\n      (state) => { state.projectSpeed += 0.20 }\n    ],\n  },\n  {\n    id: 'cooperation-master',\n    name: 'Cooperation Master',\n    description: 'Вы усиливаете другие сферы',\n    category: ECONOMY,\n    position: [3, 7],\n    requires: [],\n    state: 'locked',\n    visible: [ () => true],\n    shade: [ (state) => state.spheres[ECONOMY].resources < 4000],\n    available: [ (state) => state.spheres[ECONOMY].resources >= 7000, (state) => state.stage < 2],\n    icon: '💸',\n    effects: [\n      (state) => { state.multipliers[FAITH] += 0.10 },\n      (state) => { state.multipliers[SCIENCE] += 0.10 },\n    ],\n  },\n  {\n    id: 'cyber-integration',\n    name: 'Cyber Integration',\n    description: 'Вклад в науку увеличен на 20%',\n    category: ECONOMY,\n    position: [2, 9],\n    requires: [],\n    state: 'locked',\n    visible: [ () => true],\n    shade: [ (state) => state.spheres[ECONOMY].resources < 2000],\n    available: [ (state) => state.spheres[ECONOMY].resources >= 5000, (state) => state.stage < 2],\n    icon: '🧬',\n    effects: [\n      (state) => { state.multipliers[SCIENCE] += 0.20 }\n    ],\n  },\n  {\n    id: 'new-material',\n    name: 'New Material',\n    description: 'Начать разработку новых материалов',\n    category: ECONOMY,\n    position: [2, 11],\n    requires: [],\n    state: 'locked',\n    visible: [ () => true],\n    shade: [ (state) => state.spheres[ECONOMY].resources < 6000],\n    available: [ (state) => state.spheres[ECONOMY].resources >= 11000, (state) => state.stage < 2],\n    icon: '🧬',\n    effects: [\n      (state) => { state.activeProjects.push({id: 'new-material', status: 'in_progress', progress: 0}) }\n    ],\n  },\n  {\n    id: 'banker2',\n    name: 'Banker lvl2',\n    description: 'Развитие экономики дает вам дополнительные ресурсы',\n    category: ECONOMY,\n    position: [2, 12],\n    requires: [ {\n      talentId: 'banker',\n    }],\n    state: 'locked',\n    visible: [ () => true],\n    shade: [ (state) => state.spheres[ECONOMY].resources < 10000],\n    available: [ (state) => state.spheres[ECONOMY].resources >= 12000, (state) => state.stage < 2],\n    icon: '🏦',\n    effects: [\n      (state) => { state.autoClickPower += 200 },\n      (state) => { state.multipliers[COMMON] += 0.20 },\n    ],\n  },\n  {\n    id: 'weapon-domination',\n    name: 'Weapon Domination',\n    description: 'Ваше доминирование в оружии неоспоримо',\n    category: ECONOMY,\n    position: [3, 13],\n    requires: [],\n    state: 'locked',\n    visible: [ () => true],\n    shade: [ (state) => state.spheres[ECONOMY].resources < 9000],\n    available: [ (state) => state.spheres[ECONOMY].resources >= 13000, (state) => state.stage < 2],\n    icon: '🧬',\n    effects: [\n      (state) => { state.multipliers[ECONOMY] += 0.20 },\n      (state) => { state.multipliers[FAITH] += 0.20 },\n      (state) => { state.multipliers[SCIENCE] += 0.20 },\n      (state) => { state.conquestSpeed += 0.50 },\n    ],\n    meta: {\n      isCrossCategory: true,\n    }\n  },\n  {\n    id: 'antiair-gun',\n    name: 'Antiair Gun',\n    description: 'Создать пушку, что сможет отклонить снаряд от земли',\n    category: ECONOMY,\n    position: [2, 15],\n    requires: [],\n    state: 'locked',\n    visible: [ (state) => state.spheres[ECONOMY].resources >= 9000],\n    shade: [ (state) => state.spheres[ECONOMY].resources < 12000],\n    available: [ (state) => state.spheres[ECONOMY].resources >= 15000, (state) => state.stage < 2],\n    icon: '💂‍♀️🧬',\n    effects: [\n      (state) => { state.activeProjects.push({id: 'antiair-gun', status: 'in_progress', progress: 0}) },\n      (state) => { \n        state.conqueredCountries.push(\n          COUNTRY_NAMES.filter(\n            (country) => !state.conqueredCountries.includes(country)\n          )\n          [Math.floor(Math.random() * COUNTRY_NAMES.length)]\n        )\n      }\n    ],\n  },\n  {\n    id: 'Brutal-force',\n    name: 'Brutal Force',\n    description: 'Перед вами трепещут от вашей силы, несколько стран идут к вам добровольно',\n    category: ECONOMY,\n    position: [2, 25],\n    requires: [],\n    state: 'locked',\n    visible: [ (state) => state.spheres[ECONOMY].resources >= 10000],\n    shade: [ (state) => state.spheres[ECONOMY].resources < 16000],\n    available: [ (state) => state.spheres[ECONOMY].resources >= 25000, (state) => state.stage < 2],\n    icon: '💪',\n    effects: [\n      (state) => { state.conquestSpeed += 0.50 },\n      (state) => { state.multipliers[SCIENCE] -= 0.50 },\n      (state) => { \n        state.conqueredCountries.push(\n          ...COUNTRY_NAMES.filter(\n            (country) => !state.conqueredCountries.includes(country)\n          ).slice(0, Math.floor(Math.random() * 45)+5) // 5-50 стран\n        )\n       },\n    ],\n  },\n  {\n    id: 'cold-fission',\n    name: 'Cold Fission',\n    description: 'Вы открываете холодный ядерный синтез',\n    category: ECONOMY,\n    position: [3, 20],\n    requires: [{\n      talentId: 'new-material',\n    }],\n    state: 'locked',\n    visible: [ (state) => state.spheres[ECONOMY].resources >= 14000],\n    shade: [ (state) => state.spheres[ECONOMY].resources < 16000],\n    available: [ \n      (state) => state.spheres[ECONOMY].resources >= 20000,\n      (state) => state.spheres[SCIENCE].resources >= 10000,\n      (state) => state.stage < 2,\n    ],\n    icon: '☢️🧊',\n    effects: [\n      (state) => { state.multipliers[ECONOMY] += 0.50 },\n      (state) => { state.multipliers[SCIENCE] += 0.50 },\n    ],\n    meta: {\n      isCrossCategory: true,\n    }\n  },\n  {\n    id: 'science-freak',\n    name: 'Science Freak',\n    description: 'Наука это наш путь к победе',\n    category: SCIENCE,\n    position: [4, 2],\n    requires: [],\n    state: 'locked',\n    visible: [ () => true],\n    available: [ (state) => state.spheres[SCIENCE].resources >= 2000, (state) => state.stage < 2],\n    icon: '🧬',\n    effects: [\n      (state) => { state.multipliers[SCIENCE] += 0.50 },\n    ],\n  },\n  {\n    id: 'defensive-swarm',\n    name: 'Defensive Swarm',\n    description: 'Создать рой из спутников на орбите, для защиты от атаки. -1000₿',\n    category: SCIENCE,\n    position: [4, 10],\n    requires: [],\n    state: 'locked',\n    visible: [ () => true],\n    available: [ \n      (state) => state.spheres[SCIENCE].resources >= 10000,\n      (state) => state.resources >= 1000,\n      (state) => state.stage < 2,\n    ],\n    shade: [ (state) => state.spheres[SCIENCE].resources < 2000],\n    icon: '🛰',\n    effects: [\n      (state) => { state.resources -= 1000 },\n      (state) => { state.multipliers[SCIENCE] += 0.20 },\n      (state) => { state.manualClickPower += 10 },\n      (state) => { state.conquestSpeed += 0.10 }\n    ],\n  },\n  {\n    id: 'dyson-swarm',\n    name: 'Dyson Swarm',\n    description: 'Создать рой из спутников, вокруг Солнца.',\n    category: SCIENCE,\n    position: [4, 14],\n    requires: [],\n    state: 'locked',\n    visible: [ () => true],\n    available: [ \n      (state) => state.spheres[SCIENCE].resources >= 14000,\n      (state) => state.stage < 2,\n    ],\n    shade: [ (state) => state.spheres[SCIENCE].resources < 4500],\n    icon: '🛰',\n    effects: [\n      (state) => { state.activeProjects.push({id: 'dyson-swarm', status: 'in_progress', progress: 0}) }\n    ],\n  },\n  {\n    id: 'dyson-circle',\n    name: 'Dyson Circle',\n    description: 'Создать кольцо из спутников, вокруг Солнца.',\n    category: SCIENCE,\n    position: [4, 18],\n    requires: [{\n      talentId: 'dyson-swarm',\n    }],\n    state: 'locked',\n    visible: [ (state) => state.spheres[SCIENCE].resources >= 5000],\n    shade: [ (state) => state.spheres[SCIENCE].resources < 1300],\n    available: [ \n      (state) => state.spheres[SCIENCE].resources >= 18000,\n      (state) => state.stage < 2,\n    ],\n    icon: '🛰',\n    effects: [\n      (state) => { state.activeProjects.push({id: 'dyson-circle', status: 'in_progress', progress: 0}) }\n    ],\n  },\n  {\n    id: 'dyson-sphere',\n    name: 'Dyson Sphere',\n    description: 'Создать сферу из спутников, вокруг Солнца.',\n    category: SCIENCE,\n    position: [4, 22],\n    requires: [{\n      talentId: 'dyson-circle',\n    }],\n    state: 'locked',\n    visible: [ (state) => state.spheres[SCIENCE].resources >= 9000],\n    shade: [ (state) => state.spheres[SCIENCE].resources < 17000],\n    available: [ \n      (state) => state.spheres[SCIENCE].resources >= 22000,\n      (state) => state.resources >= 10000,\n      (state) => state.stage < 2,\n    ],\n    icon: '🛰',\n    effects: [\n      (state) => { state.activeProjects.push({id: 'dyson-sphere', status: 'in_progress', progress: 0}) }\n    ],\n  },\n  {\n    id: 'explosion-of-knowledge',\n    name: 'Explosion of Knowledge',\n    description: 'Ваши ученые обращаются к неизвестным силам, 50% провал, x1000 всего при успехе',\n    category: SCIENCE,\n    position: [4, 10],\n    requires: [],\n    state: 'locked',\n    visible: [ (state) => {\n      return state.spheres[FAITH].resources >= 2500 && state.spheres[SCIENCE].resources >= state.spheres[ECONOMY].resources;\n    }],\n    available: [ (state) => state.spheres[SCIENCE].resources >= 10000, (state) => state.stage < 2],\n    icon: '🤯',\n    effects: [\n      (state) => { \n        if (Math.random() < 0.5) {\n          state.resources += 1000;\n          state.spheres[SCIENCE].resources *= 1000;\n          state.spheres[FAITH].resources *= 1000;\n          state.spheres[ECONOMY].resources *= 1000;\n        } else {\n          state.resources = 0;\n          state.spheres[SCIENCE].resources = 0;\n          state.spheres[FAITH].resources = 0;\n          state.spheres[ECONOMY].resources = 0;\n          state.multipliers[SCIENCE] = 0.01;\n          state.multipliers[FAITH] = 0.01;\n          state.multipliers[ECONOMY] = 0.01;\n          state.conquestSpeed = 0.01;\n          state.projectSpeed = 0.01;\n          state.manualClickPower = 0.01;\n          state.autoClickPower = 0.01;\n        }\n      },\n    ],\n  },\n  {\n    id: 'transmutation',\n    name: 'Transmutation',\n    description: 'Превратить немного свинца в золото',\n    category: SCIENCE,\n    position: [4, 12],\n    requires: [],\n    state: 'locked',\n    visible: [ () => true],\n    available: [ (state) => state.spheres[SCIENCE].resources >= 12000, (state) => state.stage < 2],\n    icon: '🧊',\n    effects: [\n      (state) => { state.resources += 7000 },\n    ],\n  },\n  {\n    id: 'science-freak2',\n    name: 'Science Freak lvl2',\n    description: 'Только наука может спасти нас',\n    category: SCIENCE,\n    position: [4, 26],\n    requires: [],\n    state: 'locked',\n    visible: [ (state) => state.spheres[SCIENCE].resources >= 12000],\n    shade: [ (state) => state.spheres[SCIENCE].resources < 20000],\n    available: [ (state) => state.spheres[SCIENCE].resources >= 26000, (state) => state.stage < 2],\n    icon: '🧬',\n    effects: [\n      (state) => { state.multipliers[SCIENCE] += 0.50 },\n      (state) => { state.spheres[FAITH].resources > 10000 && (state.spheres[FAITH].resources -= 5000)  },\n      (state) => { state.spheres[ECONOMY].resources > 10000 && (state.spheres[ECONOMY].resources -= 5000)  },\n    ],\n  },\n  {\n    id: 'human-experiment',\n    name: 'Human Experiment',\n    description: 'Разрешить ученым проводить эксперименты на людях',\n    category: SCIENCE,\n    position: [4, 28],\n    requires: [],\n    state: 'locked',\n    visible: [ (state) => state.spheres[SCIENCE].resources >= 15000],\n    shade: [ (state) => state.spheres[SCIENCE].resources < 22000],\n    available: [ (state) => state.spheres[SCIENCE].resources >= 28000, (state) => state.stage < 2],\n    icon: '🧬',\n    effects: [\n      (state) => { state.multipliers[SCIENCE] += 0.50 },\n      (state) => { state.projectSpeed += 2 },\n      (state) => { state.conquestSpeed += 2 },\n      (state) => { state.manualClickPower *= 2 },\n      (state) => { state.autoClickPower *= 2 },\n      (state) => { state.spheres[FAITH].resources > 10000 && (state.spheres[FAITH].resources -= 5000)  },\n      (state) => { state.multipliers[ECONOMY] -= 0.50 },\n    ],\n    meta: {\n      effectDesctription: 'Наука <span class=\"positive\">+50%</span>,<br />скорость проектов <span class=\"positive\">+ х2</span>,<br /> скорость завоевания <span class=\"positive\">+ х2</span>,<br /> клики <span class=\"positive\">х2</span>,<br /> экономика <span class=\"negative\">-50%</span>,<br /> вера <span class=\"positive\">+50%</span>',\n      requirementsDescription: '<span class=\"science-req\">28000<span>🧬',\n      flavorText: 'Это может привести к гибели многих людей, но в скором времени мы сможем спасти их всех',\n    }\n  },\n  {\n    id: 'robots',\n    name: 'Robots',\n    description: 'Последнее слово робототехники',\n    category: SCIENCE,\n    position: [4, 35],\n    requires: [],\n    state: 'locked',\n    visible: [ (state) => state.spheres[SCIENCE].resources >= 25000],\n    shade: [ (state) => state.spheres[SCIENCE].resources < 31000],\n    available: [ (state) => state.spheres[SCIENCE].resources >= 35000,\n     (state) => state.spheres[ECONOMY].resources >= 10000,\n     (state)=>state.resources > 10000,\n      (state) => state.stage < 2\n    ],\n    icon: '🤖',\n    effects: [\n      (state) => { state.projectSpeed += 2 },\n    ],\n    meta: {\n      effectDesctription: 'Скорость проектов <span class=\"positive\">+2</span>',\n      requirementsDescription: '<span class=\"science-req\">35000<span>🧬, <br /> <span class=\"economy-req\">10000<span>💸, <br /> <span class=\"resources-req\">10000<span>💰',\n      flavorText: 'Тут нам не обойтись без денег',\n    }\n  },\n  // При 75% науки, таланты смещаются в веру и требуют столько же веры\n  {\n    id: 'summon-knowledge',\n    name: 'Summon Knowledge',\n    description: 'Призвать знания из неизвестных источников',\n    category: SCIENCE,\n    position: [5, 38],\n    requires: [],\n    state: 'locked',\n    visible: [ (state) => state.spheres[SCIENCE].resources >= 35000, (state) => state.spheres[FAITH].resources >= 35000],\n    shade: [ (state) => state.spheres[SCIENCE].resources < 41000],\n    available: [ (state) => state.spheres[FAITH].resources >= 38000, (state) => state.spheres[FAITH].resources >= 38000, (state) => state.stage < 2],\n    icon: '🧬',\n    effects: [\n      (state) => { state.multipliers[SCIENCE] += 0.50 },\n      (state) => { state.multipliers[FAITH] += 0.50 },\n      (state) => { state.multipliers[ECONOMY] -= 0.50 },\n      (state) => { state.projectSpeed += [10,100,1000][Math.floor(Math.random() * 3)] },\n    ],\n    meta: {\n      effectDesctription: 'Наука <span class=\"positive\">+50%</span>,<br />Вера <span class=\"positive\">+50%</span>,<br />Экономика <span class=\"negative\">-50%</span>,<br />Скорость проектов <span class=\"positive\">+10-100-1000</span>',\n      requirementsDescription: '<span class=\"science-req\">35000<span>🧬, <br /> <span class=\"faith-req\">35000<span>🙏🏻',\n      flavorText: 'Это оно?',\n    }\n  },\n  {\n    id: 'quark-control',\n    name: 'Quark Control',\n    description: 'Эксперименты в коллайдеры принесли свои плоды, мы можем создавать любую материю, которая нам нужна',\n    category: SCIENCE,\n    position: [5, 40],\n    requires: [ {\n      talentId: 'new-materials',\n    }],\n    state: 'locked',\n    visible: [ (state) => state.spheres[SCIENCE].resources >= 35000, (state) => state.spheres[FAITH].resources >= 35000],\n    shade: [ (state) => state.spheres[SCIENCE].resources < 40000],\n    available: [ (state) => state.spheres[SCIENCE].resources >= 40000, (state) => state.spheres[FAITH].resources >= 40000, (state) => state.stage < 2],\n    icon: '🧬',\n    effects: [\n      (state) => { state.projectSpeed *= 2 },\n    ],\n    meta: {\n      effectDesctription: 'Скорость проектов <span class=\"positive\">х2</span>',\n      requirementsDescription: '<span class=\"science-req\">40000<span>🧬, <br /> <span class=\"faith-req\">40000<span>🙏🏻',\n    }\n  },\n  {\n    id: 'elexir-of-undying',\n    name: 'Elexir of Undying',\n    description: 'Создать элексир, который позволит вашим ученым жить вечно.(вера, наука +50%, экономика -50%)',\n    category: SCIENCE,\n    position: [4, 18],\n    requires: [],\n    state: 'locked',\n    visible: [ (state) => state.spheres[FAITH].resources >= 3000 && state.spheres[SCIENCE].resources >= 3000 && state.spheres[ECONOMY].resources <= 4500],\n    shade: [ (state) => state.spheres[SCIENCE].resources < 10000],\n    available: [ (state) => state.spheres[SCIENCE].resources >= 18000, (state) => state.stage < 2],\n    icon: '🧊',\n    effects: [\n      (state) => { state.multipliers[SCIENCE] += 0.50 },\n      (state) => { state.multipliers[FAITH] += 0.50 },\n      (state) => { state.multipliers[ECONOMY] -= 0.50 },\n    ],\n  },\n  {\n    id: 'hand-of-god',\n    name: 'Hand of God',\n    description: 'Ваши ручные клики, дают очки в сфере веры',\n    category: FAITH,\n    position: [6, 2],\n    requires: [],\n    state: 'locked',\n    visible: [ () => true],\n    available: [ (state) => state.spheres[FAITH].resources >= 2000, (state) => state.stage < 2],\n    icon: '🙏🏻',\n    effects: [\n      (state) => { \n        state.clickEffects[FAITH] += 1;\n      }\n    ],\n  },\n  {\n    id: 'research-artifact',\n    name: 'Research Artifact',\n    description: 'Создать группу монахов, что будут искать древние священные артефакты',\n    category: FAITH,\n    position: [6, 6],\n    requires: [],\n    state: 'locked',\n    visible: [ () => true],\n    available: [ (state) => state.spheres[FAITH].resources >= 6000, (state) => state.stage < 2],\n    icon: '🧬',\n    effects: [\n      (state) => { state.activeProjects.push({id: 'research-artifact', status: 'in_progress', progress: 0}) }\n    ],\n  },\n  {\n    id: 'extraterrestrial-search',\n    name: 'Extraterrestrial Search',\n    description: 'Создать массив спутников и радаров, что будут искать контакт с внеземными цивилизациями',\n    category: FAITH,\n    position: [6, 8],\n    requires: [],\n    state: 'locked',\n    visible: [ () => true],\n    available: [ \n      (state) => state.spheres[FAITH].resources >= 8000,\n      (state) => state.spheres[SCIENCE].resources >= 4000,\n      (state) => state.stage < 2,\n    ],\n    icon: '🌌',\n    effects: [\n      (state) => { state.activeProjects.push({id: 'extraterrestrial-search', status: 'in_progress', progress: 0}) } \n    ],\n  },\n  {\n    id: 'unortodox-experiment',\n    name: 'Unortodox Experiment',\n    description: 'Используя экспериментальные вещества из котокомб Ватикана, ваши Волхвы расширяют сознание',\n    category: FAITH,\n    position: [6, 12],\n    requires: [{\n      talentId: 'extraterrestrial-search',\n    }],\n    state: 'locked',\n    visible: [ (state) => {\n      return !!state.secondStage.find((item) => item.id === 'contact');\n    }],\n    available: [ (state) => state.spheres[FAITH].resources >= 12000, (state) => state.stage < 2],\n    icon: '🧊',\n    effects: [\n      (state) => { state.multipliers[FAITH] += 0.50 },\n      (state) => { state.secondStage.push({\n        id: 'spice',\n        name: 'Spice',\n        description: 'Вы можете управлять пространством',\n        icon: '🚀',\n      }) }\n    ],\n  },\n  {\n    id: 'teleportation',// stargate ref\n    name: 'Teleportation',\n    description: 'Вы открываете телепортацию, вы можете создавать порталы',\n    category: FAITH,\n    position: [6, 22],\n    requires: [],\n    state: 'locked',\n    visible: [ (state) => {\n      if (state.secondStage.find((item) => item.id === 'holygrail')) {// TODO: check artefact name\n        return Math.random() < 0.90;\n      }\n      return state.seed < 0.05;\n    }],\n    available: [ (state) => state.spheres[FAITH].resources >= 22000, (state) => state.stage < 2],\n    icon: '🚀',\n    effects: [\n      (state) => { state.secondStage.push({\n        id: 'teleportation',\n        name: 'Teleportation',\n        description: 'Вы открываете телепортацию, вы можете создавать порталы',\n        icon: '🚀',\n      }) },\n    ]\n  },\n  {\n    id: 'strange-dust',\n    name: 'Strange dust',\n    description: 'Удивительное вещество, может ли оно стать ответом на наши вопросы? Проведем эксперименты',\n    category: FAITH,\n    position: [6, 24],\n    requires: [],\n    state: 'locked',\n    visible: [ (state) => {\n      return state.seed > 0.05 && state.seed < 0.25;\n    }],\n    available: [ (state) => state.spheres[FAITH].resources >= 24000, (state) => state.stage < 2],\n    icon: '🔥',\n    effects: [\n      (state) => { \n        state.activeProjects.push({\n          id: 'strange-dust',\n          progress: 0,\n          status: 'in_progress',\n        })\n      },\n    ],\n  },\n  {\n    id: 'triumvirate',\n    name: 'Triumvirate',\n    description: 'Равномерное развитие всех сфер очень привлекательно для других стран',\n    category: SCIENCE,\n    position: [4, 22],\n    requires: [],\n    state: 'locked',\n    visible: [ \n      (state) => state.spheres[FAITH].resources >= 1000,\n      (state) => state.spheres[ECONOMY].resources >= 1000,\n      (state) => state.spheres[SCIENCE].resources >= 1000,\n    ],\n    available: [ \n      (state) => state.spheres[SCIENCE].resources >= 22000,\n      (state) => state.spheres[ECONOMY].resources >= 5000,\n      (state) => state.spheres[ECONOMY].resources <= 20000,\n      (state) => state.spheres[FAITH].resources >= 5000,\n      (state) => state.spheres[FAITH].resources <= 20000,\n      (state) => state.stage < 2,\n    ],\n    icon: '🚀',\n    effects: [\n      (state) => { state.conquestSpeed += 10 },\n    ],\n    meta: {\n      isCrossCategory: true,\n    }\n  },\n  // second stage\n  {\n    id: 'nanoshield',\n    name: 'Nanoshield',\n    description: 'Разработать щит, защищающий корабль от опасностей при быстром перемещении',\n    category: SCIENCE,\n    position: [4, 55],\n    requires: [],\n    state: 'locked',\n    visible: [ (state) => {\n      return state.stage >= 2;\n    }],\n    available: [ (state) => state.spheres[SCIENCE].resources >= 55000],\n    icon: '🌌',\n    effects: [\n      (state) => { state.activeProjects.push({\n        id: 'nanoshield',\n        progress: 0,\n        status: 'in_progress',\n      }) },\n    ],\n  },\n  {\n    id: 'spice-shield',\n    name: 'Spice Shield',\n    description: 'Разработать щит, защищающий корабль от опасностей при быстром перемещении',\n    category: FAITH,\n    position: [6, 55],\n    requires: [],\n    state: 'locked',  \n    visible: [ (state) => {\n      return state.stage >= 2;\n    },\n    (state) => {\n      return state.secondStage.find((item) => item.id === 'spice');\n    }\n    ],\n    available: [ (state) => state.spheres[FAITH].resources >= 55000],\n    icon: '🌌',\n    effects: [\n      (state) => { state.activeProjects.push({\n        id: 'spice-shield',\n        progress: 0,\n        status: 'in_progress',\n      }) },\n    ],\n  },\n  {\n    id: 'Genetic-memory',\n    name: 'Genetic Memory',\n    description: 'Благодаря специи, ваши провидцы извлекают знания предков',\n    category: FAITH,\n    position: [6, 60],\n    requires: [],\n    state: 'locked',\n    visible: [ (state) => {\n      return state.secondStage.find((item) => item.id === 'spice');\n    }],\n    available: [ (state) => state.spheres[FAITH].resources >= 60000],\n    icon: '🌌',\n    effects: [\n      (state) => { \n        // TODO: add postGame effect\n        state.multipliers[FAITH] += 0.5;\n      },\n    ],\n  },\n  {\n    id: 'foresight',\n    name: 'Foresight',\n    description: 'Вы можете предвидеть будущие проблемы',\n    category: FAITH,\n    position: [6, 65],  \n    requires: [],\n    state: 'locked',\n    visible: [ (state) => {\n      return state.secondStage.find((item) => item.id === 'spice');\n    }],\n    available: [ (state) => state.spheres[FAITH].resources >= 65000],\n    icon: '🌌',\n    effects: [\n      (state) => { \n        // TODO: add more time for problems\n        state.multipliers[FAITH] += 0.5;\n      },\n    ],\n  },\n  {\n    id: 'quantum-beacon',\n    name: 'Quantum Beacon',\n    description: 'Вы можете создавать квантовые порталы',\n    category: SCIENCE,\n    position: [4, 70],\n    requires: [],\n    state: 'locked',\n    visible: [ (state) => {\n      return state.secondStage.find((item) => item.id === 'quantum-threads');\n    }],\n    available: [ (state) => state.spheres[SCIENCE].resources >= 70000],\n    icon: '🌌',\n    effects: [\n      (state) => {  \n        state.activeProjects.push({\n          // Открывает возможность захватывать планеты\n          id: 'quantum-beacon',\n          progress: 0,\n          status: 'in_progress',\n        })\n      },\n    ],\n  },\n  {\n    id: 'space-folding-engine',\n    name: 'Space Folding Engine',\n    description: 'Разработка двигателя, позволяющего перемещаться быстрее скорости света',\n    category: SCIENCE,\n    position: [4, 75],\n    requires: [],\n    state: 'locked',\n    visible: [ (state) => {\n      return state.secondStage.find((item) => item.id === 'dark-matter' || item.id === 'spice' || item.id === 'negative-mass-matter');\n    }],\n    available: [ (state) => state.spheres[SCIENCE].resources >= 75000],\n    icon: '🌌',\n    effects: [\n      (state) => {  \n        state.activeProjects.push({\n          id: 'space-folding-engine',\n          progress: 0,\n          status: 'in_progress',\n        })\n      },\n    ],\n  },\n  {\n    id: 'white-hole',\n    name: 'Чревоточина',\n    description: 'Ваши разработки позволяют нам создать одну чревоточину, сразу до планеты врага! Так можно обойтись без щитов. Но у нас одна попытка!',\n    category: ECONOMY,\n    position: [2, 55],\n    requires: [\n      {\n        talentId: 'cold-fission', \n      }\n    ],\n    state: 'locked',\n    visible: [ (state) => {\n      return state.secondStage.find((item) => item.id === 'negative-mass-matter');\n    }],\n    available: [ (state) => state.spheres[ECONOMY].resources >= 55000],\n    icon: '🌌',\n    effects: [\n      (state) => {  \n        state.activeProjects.push({\n          id: 'white-hole',\n          progress: 0,\n          status: 'in_progress',\n        })\n      },\n    ],\n  },\n  {\n    id: 'big-fold',\n    name: 'Складывание пространства от планеты к планете',\n    description: 'Ваши разработки позволяют нам создать изменить пространство, мы сможем попасть к ним даже без короблей! Но у нас одна попытка!',\n    category: ECONOMY,\n    position: [2, 55],\n    requires: [\n      {\n        talentId: 'cold-fission', \n      }\n    ],\n    state: 'locked',\n    visible: [ (state) => {\n      return state.secondStage.find((item) => item.id === 'dark-matter' );\n    }],\n    available: [ (state) => state.spheres[ECONOMY].resources >= 55000],\n    icon: '🌌',\n    effects: [\n      (state) => {  \n        state.activeProjects.push({\n          id: 'big-fold',\n          progress: 0,\n          status: 'in_progress',\n        })\n      },\n    ],\n  },\n  {\n    id: 'obsidian-portal',\n    name: 'Портал в неизвестность',\n    description: 'Вы можете открывать порталы в другое измерение, чтобы перемещаться между планетами',\n    category: FAITH,\n    position: [6, 55],\n    requires: [],\n    state: 'locked',\n    visible: [ (state) => {\n      return state.secondStage.find((item) => item.id === 'dark-matter');\n    }],\n    available: [ (state) => state.spheres[ECONOMY].resources >= 55000],\n    icon: '🌌',\n    effects: [  \n      (state) => {  \n        state.activeEvents.push({\n          id: 'open-planet',\n          position: [0,0],\n        })\n      },\n      (state) => {\n        state.cosmicCivilization.conquest = true;\n        state.cosmicCivilization.FTL = true;\n      },\n    ],\n  },\n  {\n    id: 'xenophilia',\n    name: 'Сотрудничество с инопланетянами',\n    description: 'Взаимодействие с инопланетянами оказывает плодотворный эффект',\n    category: FAITH,\n    position: [6, 90],\n    requires: [],\n    state: 'locked',\n    visible: [ (state) => {\n      return state.secondStage.find((item) => item.id === 'contact');\n    }],\n    available: [ (state) => state.spheres[FAITH].resources >= 90000],\n    icon: '🌌',\n    effects: [\n      (state) => {  \n        state.multipliers[FAITH] += 1;\n        state.multipliers[ECONOMY] += 1;\n        state.multipliers[SCIENCE] += 1;\n        state.multipliers[COMMON] += 7;\n      },\n    ],\n  },\n  {\n    id: 'holy-shield',\n    name: 'Священный щит',\n    description: 'Из подвалов Антиохии, вышли священники, заявляют что могут создать щит, защищающий любой корабль от космического мусора и излучения',\n    category: FAITH,\n    position: [6, 85],\n    requires: [],\n    state: 'locked',\n    visible: [ (state) => state.spheres[FAITH].resources >= 55000],\n    available: [ (state) => state.spheres[FAITH].resources >= 85000],\n    icon: '🌌',\n    effects: [\n      (state) => {  \n        state.cosmicCivilization.shipShield = true;\n      },\n    ],\n  },\n\n];\n\n\n","import { MANUAL, COMMON, FAITH, SCIENCE, ECONOMY } from \"./app/constants\";\r\nimport { Upgrade, GameState } from \"./types\";\r\n\r\nexport const UPGRADES: Upgrade[] = [\r\n    // Базовые апгрейды всегда видимы\r\n    { id: 'cursor',\r\n      level: 0,\r\n      visible: true,\r\n      spheres: [MANUAL],\r\n      available: true,\r\n      name: 'Cursor',\r\n      icon: '👆',\r\n      cost: 10,\r\n      growthRate: 1.15,\r\n      CPS: 1,\r\n      linearIncrement: 500,\r\n      transitionLevel: 50 },\r\n    \r\n    // === COMMON АПГРЕЙДЫ ===\r\n    { id: 'hand',\r\n      level: 0,\r\n      visible: true, // Базовый апгрейд, всегда видимый\r\n      spheres: [COMMON],\r\n      available: true,\r\n      name: 'Hand',\r\n      icon: '💅',\r\n      cost: 10, // Базовая стоимость\r\n      growthRate: 1.15,\r\n      CPS: 0.1,\r\n      linearIncrement: 500,\r\n      transitionLevel: 50 },\r\n    { id: 'factory',\r\n      level: 0,\r\n      visible: (state: GameState) => state.resources >= 50 - 10, // 5 * 10 (стоимость hand)\r\n      spheres: [COMMON],\r\n      available: true,\r\n      name: 'Factory',\r\n      icon: '🏭',\r\n      cost: 100, \r\n      growthRate: 1.15,\r\n      CPS: 0.5,\r\n      linearIncrement: 500,\r\n      transitionLevel: 50 },\r\n    { id: 'drone',\r\n      level: 0,\r\n      visible: (state: GameState) => state.resources >= 125 - 25, // 5 * 25 (стоимость factory)\r\n      spheres: [COMMON],\r\n      available: true,\r\n      name: 'Drone',\r\n      icon: '🤖',\r\n      cost: 500, \r\n      growthRate: 1.15,\r\n      CPS: 1.2,\r\n      linearIncrement: 500,\r\n      transitionLevel: 50 },\r\n    { id: 'quantum_forge',\r\n      level: 0,\r\n      visible: (state: GameState) => state.resources >= 310 - 62, // 5 * 62 (стоимость drone)\r\n      spheres: [COMMON],\r\n      available: true,\r\n      name: 'Quantum Forge',\r\n      icon: '⚛️',\r\n      cost: 1000, // 2.5 * 62\r\n      growthRate: 1.15,\r\n      CPS: 3,\r\n      linearIncrement: 500,\r\n      transitionLevel: 50 },\r\n    \r\n    \r\n    \r\n    // === ECONOMY АПГРЕЙДЫ ===\r\n    { id: 'market',\r\n      level: 0,\r\n      visible: true, // Базовый апгрейд экономики, всегда видимый\r\n      spheres: [ECONOMY],\r\n      available: true,\r\n      name: 'Market',\r\n      icon: '🏪',\r\n      cost: 20, // Базовая стоимость\r\n      growthRate: 1.15,\r\n      CPS: 0.3,\r\n      linearIncrement: 500,\r\n      transitionLevel: 50 },\r\n    { id: 'bank',\r\n      level: 0,\r\n      visible: (state: GameState) => {\r\n        return state.resources >= 100 - 20 &&\r\n        state.spheres[ECONOMY].resources >= 100 - 20\r\n      }, // 5 * 20 (стоимость market)\r\n      spheres: [ECONOMY],\r\n      available: true,\r\n      name: 'Bank',\r\n      icon: '🏦',\r\n      cost: 90, // 2.5 * 20\r\n      growthRate: 1.15,\r\n      CPS: 0.8,\r\n      linearIncrement: 500,\r\n      transitionLevel: 50 },\r\n    { id: 'stock_exchange',\r\n      level: 0,\r\n      visible: (state: GameState) => {\r\n        return state.resources >= 250 - 50 &&\r\n        state.spheres[ECONOMY].resources >= 250 - 50\r\n      }, // 5 * 50 (стоимость bank)\r\n      spheres: [ECONOMY],\r\n      available: true,\r\n      name: 'Stock Exchange',\r\n      icon: '📈',\r\n      cost: 250, // 2.5 * 50\r\n      growthRate: 1.15,\r\n      CPS: 2,\r\n      linearIncrement: 500,\r\n      transitionLevel: 50 },\r\n    { id: 'offshore_platform',\r\n      level: 0,\r\n      visible: (state: GameState) => {\r\n        return state.resources >= 625 - 125 &&\r\n        state.spheres[ECONOMY].resources >= 625 - 125\r\n      }, // 5 * 125 (стоимость stock_exchange)\r\n      spheres: [ECONOMY],\r\n      available: true,\r\n      name: 'Offshore Platform',\r\n      icon: '🏗️',\r\n      cost: 400, // 2.5 * 125\r\n      growthRate: 1.15,\r\n      CPS: 5,\r\n      linearIncrement: 500,\r\n      transitionLevel: 50 },\r\n    { id: 'galactic_trade_hub',\r\n      level: 0,\r\n      visible: (state: GameState) => {\r\n        return state.resources >= 1560 - 312 &&\r\n        state.spheres[ECONOMY].resources >= 1560 - 312\r\n      }, // 5 * 312 (стоимость offshore_platform)\r\n      spheres: [ECONOMY],\r\n      available: true,\r\n      name: 'Galactic Trade Hub',\r\n      icon: '🌌',\r\n      cost: 1700, // 2.5 * 312\r\n      growthRate: 1.15,\r\n      CPS: 12.5,\r\n      linearIncrement: 500,\r\n      transitionLevel: 50 },\r\n\r\n      // === SCIENCE АПГРЕЙДЫ ===\r\n    { id: 'lab',\r\n      level: 0,\r\n      visible: true, // Базовый апгрейд науки, всегда видимый\r\n      spheres: [SCIENCE],\r\n      available: true,\r\n      name: 'Lab',\r\n      icon: '🧪',\r\n      cost: 15, // Базовая стоимость\r\n      growthRate: 1.15,\r\n      CPS: 0.2,\r\n      linearIncrement: 500,\r\n      transitionLevel: 50 },\r\n    { id: 'satellite',\r\n      level: 0,\r\n      visible: (state: GameState) => {\r\n        return state.resources >= 75 - 15 &&\r\n        state.spheres[SCIENCE].resources >= 75 - 15 \r\n      }, // 5 * 15 (стоимость lab)\r\n      spheres: [SCIENCE],\r\n      available: true,\r\n      name: 'Satellite',\r\n      icon: '🛰️',\r\n      cost: 120, // 2.5 * 15\r\n      growthRate: 1.15,\r\n      CPS: 0.5,\r\n      linearIncrement: 500,\r\n      transitionLevel: 50 },\r\n    { id: 'ai_core',\r\n      level: 0,\r\n      visible: (state: GameState) => {\r\n        return state.resources >= 190 - 38 &&\r\n        state.spheres[SCIENCE].resources >= 190 - 38\r\n      }, // 5 * 38 (стоимость satellite)\r\n      spheres: [SCIENCE],\r\n      available: true,\r\n      name: 'AI Core',\r\n      icon: '🧠',\r\n      cost: 300, // 2.5 * 38\r\n      growthRate: 1.15,\r\n      CPS: 1.3,\r\n      linearIncrement: 500,\r\n      transitionLevel: 50 },\r\n    { id: 'quantum_computer',\r\n      level: 0,\r\n      visible: (state: GameState) => {\r\n        return state.resources >= 475 - 95 &&\r\n        state.spheres[SCIENCE].resources >= 475 - 95\r\n      }, // 5 * 95 (стоимость ai_core)\r\n      spheres: [SCIENCE],\r\n      available: true,\r\n      name: 'Quantum Computer',\r\n      icon: '💻',\r\n      cost: 400, // 2.5 * 95\r\n      growthRate: 1.15,\r\n      CPS: 3.2,\r\n      linearIncrement: 500,\r\n      transitionLevel: 50 },\r\n    { id: 'space_telescope',\r\n      level: 0,\r\n      visible: (state: GameState) => {\r\n        return state.resources >= 1190 - 238 &&\r\n        state.spheres[SCIENCE].resources >= 1190 - 238\r\n      }, // 5 * 238 (стоимость quantum_computer)\r\n      spheres: [SCIENCE],\r\n      available: true,\r\n      name: 'Space Telescope',\r\n      icon: '🔭',\r\n      cost: 1000, // 2.5 * 238\r\n      growthRate: 1.15,\r\n      CPS: 8,\r\n      linearIncrement: 500,\r\n      transitionLevel: 50 },\r\n    \r\n    // === FAITH АПГРЕЙДЫ ===\r\n    { id: 'missionary',\r\n      level: 0,\r\n      visible: true, // Базовый апгрейд веры, всегда видимый\r\n      spheres: [FAITH],\r\n      available: true,\r\n      name: 'Missionary',\r\n      icon: '🙏',\r\n      cost: 2, // Базовая стоимость\r\n      growthRate: 1.8,\r\n      CPS: 0.1,\r\n      linearIncrement: 500,\r\n      transitionLevel: 50 },\r\n    { id: 'temple',\r\n      level: 0,\r\n      visible: (state: GameState) => {\r\n        return state.resources >= 10 - 2 &&\r\n        state.spheres[FAITH].resources >= 10 - 2\r\n      }, // 5 * 2 (стоимость missionary)\r\n      spheres: [FAITH],\r\n      available: true,\r\n      name: 'Temple',\r\n      icon: '🛕',\r\n      cost: 150, // 2.5 * 2\r\n      growthRate: 1.15,\r\n      CPS: 0.25,\r\n      linearIncrement: 500,\r\n      transitionLevel: 50 },\r\n    { id: 'crusader',\r\n      level: 0,\r\n      visible: (state: GameState) => {\r\n        return state.resources >= 25 - 5 &&\r\n        state.spheres[FAITH].resources >= 25 - 5\r\n      }, // 5 * 5 (стоимость temple)\r\n      spheres: [FAITH],\r\n      available: true,\r\n      name: 'Crusader',\r\n      icon: '⚔️',\r\n      cost: 200, // 2.5 * 5\r\n      growthRate: 1.15,\r\n      CPS: 0.6,\r\n      linearIncrement: 500,\r\n      transitionLevel: 50 },\r\n    { id: 'oracle',\r\n      level: 0,\r\n      visible: (state: GameState) => {\r\n        return state.resources >= 60 - 12 &&\r\n        state.spheres[FAITH].resources >= 60 - 12\r\n      }, // 5 * 12 (стоимость crusader)\r\n      spheres: [FAITH],\r\n      available: true,\r\n      name: 'Oracle',\r\n      icon: '👁️',\r\n      cost: 350, // 2.5 * 12\r\n      growthRate: 1.15,\r\n      CPS: 1.5,\r\n      linearIncrement: 500,\r\n      transitionLevel: 50 },\r\n    { id: 'cathedral',\r\n      level: 0,\r\n      visible: (state: GameState) => {\r\n        return state.resources >= 150 - 30 &&\r\n        state.spheres[FAITH].resources >= 150 - 30\r\n      }, // 5 * 30 (стоимость oracle)\r\n      spheres: [FAITH],\r\n      available: true,\r\n      name: 'Cathedral',\r\n      icon: '⛪',\r\n      cost: 600, // 2.5 * 30\r\n      growthRate: 1.15,\r\n      CPS: 3.8,\r\n      linearIncrement: 500,\r\n      transitionLevel: 50 },\r\n  ]\r\n","import { COMMON, FAITH, SCIENCE, ECONOMY, EVENT_AUTO_CLOSE_TIME, TOTAL_RESOURCES_FOR_FIRST_STAGE, SCIENCE_RESOURCES_FOR_FIRST_STAGE, FAITH_RESOURCES_FOR_FIRST_STAGE, ECONOMY_RESOURCES_FOR_FIRST_STAGE } from \"./constants\";\nimport { COUNTRY_NAMES } from \"../constants\";\nimport { conquestHistory, GameEvent, GameState, MapEvent, StateTalent, StateUpgrade, ActiveProblem, stateProblem } from \"../types\";\nimport { GAME_EVENTS, DynamicEvents } from \"../Events\";\nimport { Projects as PROJECTS } from \"../Projects\";\nimport { Problems as PROBLEMS } from \"../Problems\";\nimport { News as NEWS } from \"../News\";\nimport { NEWS_INTERVAL } from \"../News\";\nimport { TALENTS } from \"../Talents\";\nimport { UPGRADES } from \"../Upgrades\";\n\n\n// Генерирует случайную позицию на экране\nfunction getRandomPosition(windowSize: { width: number, height: number }): [number, number] {\n  // Ограничиваем область появления событий, чтобы они не появлялись слишком близко к краям\n  const margin = 50;\n  const x = margin + Math.random() * (windowSize.width - margin * 2);\n  const y = margin + Math.random() * (windowSize.height - margin * 2);\n  return [x, y];\n}\n\n// Проверяет, может ли событие быть активировано\nfunction canTriggerEvent(event: string, state: GameState): boolean {\n  // Проверяем, не активировано ли уже это событие\n  const isAlreadyActive = state.activeEvents.some(e => e.id === event);\n  if (isAlreadyActive) return false;\n  const eventData = GAME_EVENTS[event];\n  const eventHistory = state.eventHistory[event];\n\n  // Проверяем историю события\n  if (eventData.once && eventHistory?.count > 0) return false;\n  // Если событие имеет кулдаун и не прошло достаточно времени\n  if (eventHistory && eventData.cooldown && (Date.now() - (eventHistory.lastTriggered || 0)) < eventData.cooldown) {\n    return false;\n  }\n  // Проверяем все условия события\n  return eventData.conditions.every(condition => condition(state));\n}\n\n// Выбирает событие для активации\nfunction selectEvent(state: GameState): GameEvent | null {\n  const candidateEvents: GameEvent[] = [];\n  \n  // Перебираем все события\n  for (const event of state.events) {\n    if (canTriggerEvent(event, state)) {\n      candidateEvents.push(GAME_EVENTS[event]);\n    }\n  }\n  \n  // Теперь у нас есть список конкретных событий, которые могут быть активированы\n  if (candidateEvents.length === 0) return null;\n  \n  // Выбираем событие с наибольшим весом\n  const maxWeight = Math.max(...candidateEvents.map(event => event.weight));\n  const maxWeightEvents = candidateEvents.filter(event => event.weight === maxWeight);\n  \n  // Если нашли события с максимальным весом, выбираем случайное из них\n  if (maxWeightEvents.length > 0) {\n    const randomIndex = Math.floor(Math.random() * maxWeightEvents.length);\n    const selectedEvent = maxWeightEvents[randomIndex];\n    \n    // Проверяем удачу - вероятность активации события равна его весу (в процентах)\n    if (Math.random() * 100 < selectedEvent.weight) {\n      return selectedEvent;\n    }\n  }\n  \n  // Если не удалось выбрать событие или не повезло, возвращаем null\n  return null;\n}\n\n// Предрасчет условий видимости и доступности для талантов\nfunction recalculateTalents(state: GameState): StateTalent[] {\n  // Получаем список активных талантов\n  const activeTalentIds = state.talents.filter(t => t.state === 'active').map(t => t.id);\n  \n  // Обрабатываем таланты и добавляем вычисленную информацию\n  return TALENTS.map(talent => {\n    const stateTalent = state.talents.find(t => t.id === talent.id);\n    // Проверяем условие видимости\n    const isVisible = talent.visible.every(condition => condition(state));\n    \n    // Проверяем требования для разблокировки таланта\n    const requirementsMet = talent.requires.every(req => \n      !req.talentId || activeTalentIds.includes(req.talentId)\n    );\n    \n    // Проверяем условия доступности\n    const isAvailable = requirementsMet && talent.available.every(condition => condition(state));\n\n    // Проверяем условия для затенения\n    const isShaded = talent.shade?.some(condition => condition(state));\n\n    // Возвращаем обновленный талант со всеми вычисленными свойствами\n    return {\n      id: talent.id,\n      isVisible,\n      isAvailable,\n      isShaded,\n      state: stateTalent!.state\n    };\n  });\n}\n\n// Предрасчет видимости апгрейдов\nfunction recalculateUpgrades(state: GameState): StateUpgrade[] {\n  return UPGRADES.map(upgrade => {\n    // Получаем текущий уровень и стоимость из состояния\n    const stateUpgrade = state.upgrades.find(u => u.id === upgrade.id);\n    const level = stateUpgrade ? stateUpgrade.level : 0;\n    const cost = stateUpgrade ? stateUpgrade.cost : upgrade.cost;\n    const CPS = stateUpgrade ? stateUpgrade.CPS : upgrade.CPS;\n    const available = stateUpgrade ? stateUpgrade.available : upgrade.available;\n\n    // Проверяем условие видимости\n    let isVisible: boolean;\n    if (typeof upgrade.visible === 'boolean') {\n      isVisible = upgrade.visible;\n    } else {\n      // Если visible - это функция, вызываем её с текущим состоянием\n      isVisible = upgrade.visible(state);\n    }\n    \n    return {\n      id: upgrade.id,\n      isVisible: state.upgrades.find(u => u.id === upgrade.id)?.isVisible || isVisible,\n      level,\n      cost,\n      CPS,\n      available,\n    };\n  });\n}\n\n// Проверяет события и создает новое активное событие, если возможно\nfunction checkEvents(state: GameState, windowSize: { width: number, height: number }): {id: string; position: number[]}[] {\n  // Выбираем событие для активации\n  const eventToTrigger = selectEvent(state);\n  \n  // Создаем копию текущих активных событий\n  const updatedActiveEvents = [...state.activeEvents];\n  \n  // Если есть новое событие для добавления\n  if (eventToTrigger) {\n    state.eventHistory[eventToTrigger.id] = {\n      id: eventToTrigger.id,\n      lastTriggered: Date.now(),\n      count: (state.eventHistory[eventToTrigger.id]?.count || 0) + 1\n    };\n    \n    // Определяем позицию для нового события\n    let position: number[];\n    if (eventToTrigger.position === \"random\") {\n      position = getRandomPosition(windowSize);\n    } else if (Array.isArray(eventToTrigger.position)) {\n      position = eventToTrigger.position;\n    } else {\n      position = getRandomPosition(windowSize);\n    }\n    \n    updatedActiveEvents.push({\n      id: eventToTrigger.id,\n      position\n    });\n  }\n  \n  return updatedActiveEvents;\n}\n\nconst checkConquest = (state: GameState): [conquestHistory,MapEvent[]] => {\n  const randomCountry = COUNTRY_NAMES.filter(country => !state.conqueredCountries.includes(country))[Math.floor(Math.random() * COUNTRY_NAMES.filter(country => !state.conqueredCountries.includes(country)).length)];\n  const conquestEvent = DynamicEvents.BUY_COUNTRY(state, randomCountry);\n  if (!conquestEvent) return [state.lastConquest,state.mapEvents];\n  console.log(conquestEvent.weight * (state.conquestSpeed + (state.total / 100000)));\n  // return previous conquest\n  if ( conquestEvent.weight * (state.conquestSpeed + (state.total / 100000)) < Math.random() * 100) return [state.lastConquest,state.mapEvents];\n  console.log('conquest event triggered');\n  \n  // @ts-ignore\n  if (state.lastConquest.lastTriggered && Date.now() - state.lastConquest.lastTriggered < (conquestEvent?.cooldown / (state.conquestSpeed * state.total) )) return [state.lastConquest,state.mapEvents];\n\n  return [{\n    ...state.lastConquest,\n    lastTriggered: Date.now(),\n    country: randomCountry\n  },[...state.mapEvents, {\n    id: conquestEvent.id,\n    targetCountry: randomCountry,\n    description: conquestEvent.message,\n    name: conquestEvent.name,\n    icon: conquestEvent.icon,\n  }]];\n}\n  \n// Проверяет, можно ли активировать проблему\nfunction canTriggerProblem(problem: stateProblem, state: GameState): boolean {\n  // Проверяем, не активирована ли уже эта проблема\n  const activeVersion = state.activeProblems.find(p => p.id === problem.id);\n  if (!!activeVersion) return false;\n  \n  return true;\n}\n\n// Проверяет проблемы проектов и активирует их при необходимости\nfunction checkProblems(state: GameState, windowSize: { width: number, height: number }): ActiveProblem[] {\n  const updatedActiveProblems = [...state.activeProblems];\n  \n  // Перебираем все активные проекты\n  state.activeProjects.forEach(project => {\n    const projectData = PROJECTS[project.id];\n    \n    // Если у проекта есть проблемы и он не завершен, проверяем их\n    if (projectData.problems && project.progress < 100) {\n      // Выполняем все функции проблем, которые могут добавить новые проблемы в state.problems\n      projectData.problems.forEach(problemEffect => problemEffect(state));\n    }\n  });\n\n  // Проверяем вероятность активации для каждой проблемы из списка\n  state.problems.forEach(problem => {\n    const problemData = PROBLEMS[problem.id];\n    \n    if (problemData && canTriggerProblem(problem, state)) {\n      // Проверяем шанс на активацию (вес проблемы от 0 до 100%)\n      if (Math.random() * 100 < problemData.weight) {\n        // Определяем позицию для новой проблемы\n        let position: number[];\n        if (problemData.position === \"random\") {\n          position = getRandomPosition(windowSize);\n        } else {\n          position = problemData.position;\n        }\n        // Добавляем новую проблему\n        updatedActiveProblems.push({\n          id: problem.id,\n          projectId: problem.projectId,\n          startTime: Date.now(),\n          position,\n        });\n        \n        // Удаляем проблему из списка доступных, чтобы она не активировалась повторно\n        state.problems = state.problems.filter(p => p.id !== problem.id);\n      }\n    }\n  });\n  \n  return updatedActiveProblems;\n}\n\n// Функция для обновления списка новостей\nfunction getNewsForState(state: GameState): string[] {\n  // Восстанавливаем все новости для текущего и предыдущих этапов\n  return Object.keys(NEWS).filter(id => {\n    const news = NEWS[id];\n    return news.stage === state.stage;\n  });\n}\n\n// Функция для выбора случайной новости, соответствующей текущему этапу игры\nfunction selectNews(state: GameState): [string | null, string[]] {\n  // Если нет новостей вообще, восстанавливаем список\n  if (state.newsQueue.length === 0) {\n    // В текущем тике не показываем новость\n    return ['', getNewsForState(state)];\n  }\n\n  // Берем первую новость из очереди и удаляем ее\n  const newsId = state.newsQueue[0];\n  const newsQueue = state.newsQueue.slice(1);\n  return [newsId, newsQueue];\n\n}\n\n// Функция для проверки необходимости отображения новостей\nfunction checkNews(state: GameState): [string | null, string[], number] {\n  const now = Date.now();\n  let activeNews = state.activeNews;\n  let newsQueue = state.newsQueue;\n  let lastNewsTime = state.lastNewsTime;\n  // Проверяем, прошло ли достаточно времени с момента последнего показа новости\n  if (now - state.lastNewsTime > NEWS_INTERVAL) {\n    lastNewsTime = now;\n    [activeNews, newsQueue] = selectNews(state);\n  }\n  \n  // Выбираем новость для отображения\n  return [activeNews, newsQueue, lastNewsTime]  ;\n}\n\nexport const calculateTick = (state: GameState, deltaTime: number, windowSize: { width: number, height: number }): Partial<GameState> => {\n  const updates: Partial<GameState> = {};\n  if (state.stage === 0) {\n    return updates;\n  }\n\n  // Check for stage transition conditions\n  if (state.stage === 1) {\n    // Check if all countries are conquered\n    const allCountriesConquered = COUNTRY_NAMES.every((country: string) => \n      state.conqueredCountries.includes(country)\n    );\n\n    // Check if player has enough resources and technology\n    const hasEnoughResources = state.total >= TOTAL_RESOURCES_FOR_FIRST_STAGE; // 1 million resources\n    const hasEnoughScience = state.spheres[SCIENCE].resources >= SCIENCE_RESOURCES_FOR_FIRST_STAGE; // 500k science\n    const hasEnoughFaith = state.spheres[FAITH].resources >= FAITH_RESOURCES_FOR_FIRST_STAGE; // 500k faith\n    const hasEnoughEconomy = state.spheres[ECONOMY].resources >= ECONOMY_RESOURCES_FOR_FIRST_STAGE; // 500k economy\n\n\n    if (allCountriesConquered || \n        hasEnoughResources || \n        hasEnoughScience || \n        hasEnoughFaith || \n        hasEnoughEconomy) {\n      updates.stage = 2;\n      updates.secondStage = [...state.secondStage, 'space_travel_unlocked'];\n    }\n  }\n\n  // Update resources based on CPS\n  updates.resources = state.resources + state.autoClickPower * state.multipliers[COMMON];\n  updates.total = state.total + state.autoClickPower * state.multipliers[COMMON];\n\n  // Update sphere resources\n  const updatedSpheres = { ...state.spheres };\n  Object.entries(state.spheres).forEach(([sphereName, sphere]) => {\n    const sphereCPS = sphere.CPS * state.multipliers[sphereName] * state.multipliers[COMMON];\n    updatedSpheres[sphereName as keyof typeof updatedSpheres] = {\n      ...sphere,\n      resources: sphere.resources + sphereCPS\n    };\n  });\n  updates.spheres = updatedSpheres;\n\n  // Предрасчитываем условия видимости и доступности для талантов\n  updates.talents = recalculateTalents(state);\n  \n  // Предрасчитываем видимость апгрейдов\n  updates.upgrades = recalculateUpgrades(state);\n\n  // Обновляем события и удаляем устаревшие\n  let newActiveEvents = checkEvents(state, windowSize);\n  \n  // Проверяем какие события должны быть автоматически удалены по времени\n  newActiveEvents = newActiveEvents.filter(eventObj => {\n    const eventHistory = state.eventHistory[eventObj.id];\n    if (!eventHistory) return true;\n    \n    const eventAge = Date.now() - eventHistory.lastTriggered;\n    // Если событие существует дольше EVENT_AUTO_CLOSE_TIME, удаляем его и применяем эффекты\n    if (eventAge >= EVENT_AUTO_CLOSE_TIME) {\n      // Удаляем из списка доступных событий, если оно одноразовое\n      if (GAME_EVENTS[eventObj.id].once) {\n        state.events = state.events.filter(e => e !== eventObj.id);\n      }\n      \n      return false;\n    }\n    return true;\n  });\n  \n  updates.activeEvents = newActiveEvents;\n  \n  // Проверяем и обновляем проблемы\n  updates.activeProblems = checkProblems(state, windowSize);\n  \n  // Проверяем и обновляем новости\n  [updates.activeNews, updates.newsQueue, updates.lastNewsTime] = checkNews(state);\n\n  \n  updates.activeProjects = state.activeProjects;\n  \n  // Update conquest events\n  [updates.lastConquest, updates.mapEvents] = checkConquest(state);\n\n  // Update project progress for active projects\n  updates.activeProjects.forEach(project => {\n    const projectData = PROJECTS[project.id];\n    if (project.status === 'in_progress') {\n      const progressIncrement = projectData.speed * state.projectSpeed;\n      project.progress = Math.min(100, project.progress + progressIncrement);\n\n      if (project.progress >= 100) {\n        // Просто помечаем как успешный, но не применяем эффекты\n        // Эффекты будут применены в редьюсере completeProject\n        project.status = 'success';\n      }\n    }\n  });\n\n  \n  return updates;\n};\n\n// Web Worker\n/* eslint-disable-next-line no-restricted-globals */\nself.onmessage = (e: MessageEvent) => {\n  switch (e.data.type) {\n    case 'TICK':\n      const action = calculateTick(e.data.state, e.data.deltaTime, e.data.windowSize);\n      postMessage(action);\n      break;\n    case 'STATE_UPDATED':\n      // Просто запоминаем новое состояние и ничего не отправляем обратно\n      // На следующем тике будут использованы актуальные данные\n      break;\n  }\n};\n"],"names":["COMMON","SCIENCE","FAITH","ECONOMY","COUNTRY_NAMES","DynamicEvents","state","target","availableCountries","filter","countryId","conqueredCountries","includes","length","targetCountry","Math","floor","random","id","type","name","description","icon","message","weight","conditions","effects","push","cooldown","status","GAME_EVENTS","position","spheres","resources","once","multipliers","artefacts","secondStage","activeProjects","some","project","setTimeout","cosmicCivilization","conquest","Projects","progress","speed","failEffects","problems","projectId","materials","randomMaterial","conquestSpeed","seed","newsQueue","shipShield","FTL","activeEvents","Problems","amount","time","News","text","stage","TALENTS","category","requires","visible","available","meta","effectDesctription","requirementsDescription","flavorText","shade","autoClickPower","projectSpeed","talentId","isCrossCategory","country","slice","manualClickPower","clickEffects","find","item","UPGRADES","level","cost","growthRate","CPS","linearIncrement","transitionLevel","getRandomPosition","windowSize","width","margin","height","canTriggerEvent","event","e","eventData","eventHistory","count","Date","now","lastTriggered","every","condition","checkEvents","eventToTrigger","candidateEvents","events","maxWeight","max","map","maxWeightEvents","selectedEvent","selectEvent","updatedActiveEvents","_state$eventHistory$e","Array","isArray","getNewsForState","Object","keys","NEWS","checkNews","activeNews","lastNewsTime","selectNews","calculateTick","deltaTime","updates","allCountriesConquered","hasEnoughResources","total","hasEnoughScience","hasEnoughFaith","hasEnoughEconomy","updatedSpheres","entries","forEach","_ref","sphereName","sphere","sphereCPS","talents","activeTalentIds","t","talent","_talent$shade","stateTalent","isVisible","isAvailable","req","isShaded","recalculateTalents","upgrades","upgrade","_state$upgrades$find","stateUpgrade","u","recalculateUpgrades","newActiveEvents","eventObj","activeProblems","updatedActiveProblems","projectData","PROJECTS","problemEffect","problem","problemData","PROBLEMS","p","canTriggerProblem","startTime","checkProblems","lastConquest","mapEvents","randomCountry","conquestEvent","BUY_COUNTRY","console","log","checkConquest","progressIncrement","min","self","onmessage","data","action","postMessage"],"sourceRoot":""}