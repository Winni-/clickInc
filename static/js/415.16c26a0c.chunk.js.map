{"version":3,"file":"static/js/415.16c26a0c.chunk.js","mappings":"mBAAO,MACMA,EAAS,SACTC,EAAU,UACVC,EAAQ,QACRC,EAAU,UAoBVC,EAAoB,CAC/B,CAAEC,UAAW,KAAQC,SAAU,IAAOC,WAAY,GAClD,CAAEF,UAAW,KAAQC,SAAU,KAAQC,WAAY,GACnD,CAAEF,UAAW,KAAQC,SAAU,KAAQC,WAAY,GACnD,CAAEF,UAAW,MAASC,SAAU,KAAQC,WAAY,IACpD,CAAEF,UAAW,KAASC,SAAU,KAAQC,WAAY,KAWzCC,EAAoB,CAC/B,CAACP,GAAU,EACX,CAACC,GAAQ,EACT,CAACC,GAAU,GCrBAM,EAAgB,CAC3B,cACA,SACA,UACA,uBACA,YACA,UACA,aACA,YACA,UACA,aACA,UACA,UACA,QACA,eACA,aACA,WACA,UACA,yBACA,UACA,SACA,UACA,SACA,SACA,SACA,WACA,2BACA,SACA,cACA,QACA,QACA,cACA,WACA,mCACA,wBACA,WACA,aACA,OACA,SACA,iBACA,UACA,WACA,UACA,qBACA,UACA,UACA,QACA,UACA,QACA,UACA,WACA,UACA,OACA,mBACA,SACA,QACA,iBACA,UACA,QACA,SACA,SACA,gBACA,oBACA,SACA,YACA,YACA,SACA,WACA,UACA,QACA,UACA,YACA,QACA,UACA,OACA,OACA,UACA,SACA,QACA,UACA,SACA,QACA,aACA,QACA,aACA,WACA,cACA,SACA,SACA,OACA,UACA,UACA,QACA,YACA,UACA,YACA,aACA,SACA,UACA,UACA,aACA,SACA,YACA,OACA,UACA,aACA,WACA,aACA,aACA,SACA,WACA,UACA,gBACA,QACA,UACA,YACA,cACA,SACA,QACA,cACA,OACA,WACA,SACA,OACA,cACA,mBACA,SACA,cACA,cACA,WACA,WACA,QACA,UACA,SACA,SACA,iBACA,eACA,QACA,cACA,UACA,kBACA,eACA,cACA,UACA,SACA,WACA,WACA,WACA,SACA,YACA,QACA,OACA,OACA,WACA,aACA,eACA,aACA,sBACA,UACA,SACA,SACA,WACA,SACA,UACA,UACA,gBACA,aACA,YACA,UACA,UACA,QACA,eACA,SACA,YCzJK,MAAMC,EAAgD,CAC3D,YArCF,SAA+BC,EAAiBC,GAE9C,MAAMC,EAAqBJ,EAAcK,QACvCC,IAAcJ,EAAMK,mBAAmBC,SAASF,KAIlD,GAAkC,IAA9BF,EAAmBK,OACrB,OAAO,KAIT,MAAMC,EAAgBP,GAAUC,EAAmBO,KAAKC,MAAMD,KAAKE,SAAWT,EAAmBK,SAGjG,MAAO,CACLK,GAAI,cACJC,KAAM,gBACNC,KAAM,GAAGN,wHACTO,YAAa,gMACbC,KAAM,eACNC,QAAS,8JACTC,OAAQ,EACRC,WAAY,CACTnB,GAAUA,EAAMK,mBAAmBE,OAAST,EAAcS,QAE7Da,QAAS,CACNpB,IACCA,EAAMK,mBAAmBgB,KAAKb,EAAc,GAGhDc,SAAU,IACVC,OAAQ,cACRf,cAAeA,EAEnB,GAMagB,EAAyC,CACpD,wBAA2B,CACzBZ,GAAI,0BACJC,KAAM,SACNC,KAAM,uOACNC,YAAa,uOACbC,KAAM,eACNS,SAAU,SACVR,QAAS,uOACTG,QAAS,CACNpB,IACCA,EAAM0B,QAAQpC,GAASqC,WAAa,IACpC3B,EAAM0B,QAAQlC,GAASmC,WAAa,GAAG,GAG3CC,OAAQ,CAAC,kBAAS,mBAClBV,OAAQ,GACRC,WAAY,CACTnB,GAAUA,EAAM0B,QAAQpC,GAASqC,UAAY,KAEhDL,SAAU,KACVO,MAAM,GAER,qBAAwB,CACtBjB,GAAI,uBACJC,KAAM,SACNC,KAAM,wKACNC,YAAa,wKACbC,KAAM,eACNS,SAAU,SACVR,QAAS,wKACTG,QAAS,CACNpB,IACCA,EAAM8B,YAAYvC,IAAU,IAC5BS,EAAM0B,QAAQpC,GAASqC,WAAa,GAAG,GAG3CC,OAAQ,CAAC,mBAAU,oBACnBV,OAAQ,GACRC,WAAY,CACTnB,GAAUA,EAAM0B,QAAQnC,GAAOoC,UAAY,IAC3C3B,GAAUA,EAAM0B,QAAQpC,GAASqC,UAAY,KAEhDL,SAAU,KACVO,MAAM,GAER,mBAAsB,CACpBjB,GAAI,qBACJC,KAAM,SACNC,KAAM,iJACNC,YAAa,iJACbC,KAAM,eACNS,SAAU,SACVR,QAAS,iJACTG,QAAS,CACNpB,IACCA,EAAM+B,OAAU,IAAI,GAGxBH,OAAS5B,GAAU,IAAKS,KAAKuB,IAAkB,IAAdhC,EAAM+B,MAAc,IAAKE,QAAQ,WAClEf,OAAQ,EACRC,WAAY,CACTnB,GAAUA,EAAM+B,MAAQ,IAE3BT,SAAU,IACVO,MAAM,GAER,kBAAqB,CACnBjB,GAAI,oBACJC,KAAM,SACNC,KAAM,0NACNC,YAAa,0NACbC,KAAM,2BACNS,SAAU,SACVR,QAAS,0NACTG,QAAS,CACNpB,IACCA,EAAM0B,QAAQnC,GAAOoC,WAAa,IAClC,MAAMO,EAAY,CAAC,YAAa,YAAa,YAAa,cAGnC,eAFAA,EAAUzB,KAAKC,MAAMD,KAAKE,SAAWuB,EAAU3B,WAGpEP,EAAM0B,QAAQnC,GAAOoC,WAAa,IAClC3B,EAAMmC,YAAYd,KAAK,CACrBT,GAAI,eACR,GAGJgB,OAAQ,CAAC,qBACTV,OAAQ,IACRC,WAAY,CACTnB,GAAUA,EAAMoC,eAAeC,MAAKC,GAA0B,sBAAfA,EAAQ1B,MAE1DU,SAAU,IACVO,MAAM,GAER,eAAkB,CAChBjB,GAAI,iBACJC,KAAM,SACNC,KAAM,gHACNC,YAAa,gPACbC,KAAM,eACNS,SAAU,SACVR,QAAS,qOACTG,QAAS,CACNpB,IACCA,EAAM8B,YAAYtC,IAAY,IAC9BQ,EAAM8B,YAAYvC,IAAU,IAC5BS,EAAM8B,YAAYxC,IAAY,IAC9BiD,YAAW,KACTvC,EAAM8B,YAAYtC,IAAY,IAC9BQ,EAAM8B,YAAYvC,IAAU,IAC5BS,EAAM8B,YAAYxC,IAAY,GAAG,GAChC,IAAM,GAGbsC,OAAQ,CAAC,mBAAU,mBAAU,oBAC7BV,OAAQ,IACRC,WAAY,CACTnB,GAAUA,EAAM2B,UAAY,KAE/BL,SAAU,IACVO,MAAM,GAER,YAAe,CACbjB,GAAI,cACJC,KAAM,SACNC,KAAM,6HACNC,YAAa,6HACbC,KAAM,eACNS,SAAU,SACVR,QAAS,6HACTG,QAAS,CACNpB,OAIHkB,OAAQ,IACRC,WAAY,CACTnB,IAAgD,IAAtCA,EAAMwC,mBAAmBC,UAEtCnB,SAAU,IACVO,MAAM,GAER,SAAY,CACVjB,GAAI,WACJC,KAAM,SACNC,KAAM,kFACNC,YAAa,kFACbC,KAAM,eACNS,SAAU,SACVR,QAAS,4EACTG,QAAS,CACNpB,IACCA,EAAM2B,WAAa,GAAK,GAG5BC,OAAQ,CAAC,gBACTV,OAAQ,IACRC,WAAY,CACTnB,GAAUA,EAAM2B,UAAY,KAE/BL,SAAU,IACVO,MAAM,IC7MGa,EAAoC,CAC7C,eAAgB,CACZ9B,GAAI,eACJE,KAAM,eACNC,YAAa,+DACbC,KAAM,eACN2B,SAAU,EACVC,MAAO,EACPxB,QAAS,CACJpB,GAAUA,EAAM8B,YAAYxC,IAAY,IAE7CuD,YAAa,CACR7C,GAAUA,EAAM2B,WAAa,KAElCmB,SAAU,CACL9C,IACOA,EAAM0B,QAAQnC,GAAOoC,UAAY,KACjC3B,EAAM8C,SAASzB,KAAK,CAChBT,GAAI,oBACJmC,UAAW,gBAEnB,IAIZ,wBAAyB,CACrBnC,GAAI,wBACJE,KAAM,wBACNC,YAAa,6DACbC,KAAM,eACN2B,SAAU,EACVC,MAAO,EACPxB,QAAS,CACJpB,GAAUA,EAAM8B,YAAYxC,IAAY,IAG7CuD,YAAa,CACR7C,GAAUA,EAAM2B,WAAa,KAElCmB,SAAU,CACL9C,IACOA,EAAM0B,QAAQnC,GAAOoC,UAAY,KACjC3B,EAAM8C,SAASzB,KAAK,CAChBT,GAAI,oBACJmC,UAAW,yBAEnB,IAIZ,yBAA0B,CACtBnC,GAAI,yBACJE,KAAM,mLACNC,YAAa,gdACbC,KAAM,qBACN2B,SAAU,EACVC,MAAO,GACPxB,QAAS,CACJpB,GAAUA,EAAM8B,YAAYxC,IAAY,GACxCU,GAAUA,EAAM8B,YAAYtC,IAAY,GACxCQ,GAAUA,EAAM8B,YAAYvC,IAAU,IAE3CsD,YAAa,CACR7C,GAAUA,EAAM2B,WAAa,KAElCmB,SAAU,CACL9C,IACOA,EAAM0B,QAAQlC,GAASmC,UAAY,KACnC3B,EAAM8C,SAASzB,KAAK,CAChBT,GAAI,OACJmC,UAAW,0BAEnB,IAKZ,eAAgB,CACZnC,GAAI,eACJE,KAAM,eACNC,YAAa,gMACbC,KAAM,eACN2B,SAAS,EACTC,MAAO,IACPxB,QAAS,CACJpB,IACG,MAAMgD,EAAY,CAAC,YAAa,kBAAmB,cAAe,wBAC5DC,EAAiBD,EAAUvC,KAAKC,MAAMD,KAAKE,SAAWqC,EAAUzC,SACtEP,EAAMmC,YAAYd,KAAK4B,EAAe,GAG9CJ,YAAa,CACR7C,GAAUA,EAAM2B,WAAa,MAGtC,cAAe,CACXf,GAAI,cACJE,KAAM,cACNC,YAAa,6QACbC,KAAM,6CACN2B,SAAU,EACVC,MAAO,KACPxB,QAAS,CACJpB,GAAUA,EAAM8B,YAAYtC,IAAY,GACxCQ,GAAUA,EAAMmC,YAAYd,KAAK,gBAEtCwB,YAAa,CACR7C,GAAUA,EAAM2B,WAAa,KAElCmB,SAAU,CACL9C,IACOA,EAAMK,mBAAmBE,OAAS,IAClCP,EAAM8C,SAASzB,KAAK,CAChBT,GAAI,UACJmC,UAAW,eAEnB,IAIZ,cAAe,CACXnC,GAAI,cACJE,KAAM,cACNC,YAAa,gNACbC,KAAM,eACN2B,SAAU,EACVC,MAAO,GACPxB,QAAS,CACJpB,GAAUA,EAAM8B,YAAYxC,IAAY,GACxCU,GAAUA,EAAMmC,YAAYd,KAAK,gBAEtCwB,YAAa,CACR7C,GAAUA,EAAM2B,WAAa,MAGtC,eAAgB,CACZf,GAAI,eACJE,KAAM,eACNC,YAAa,kOACbC,KAAM,eACN2B,SAAU,EACVC,MAAO,IACPxB,QAAS,CACJpB,GAAUA,EAAM8B,YAAYxC,IAAY,GACxCU,GAAUA,EAAMmC,YAAYd,KAAK,iBAEtCwB,YAAa,CACR7C,GAAUA,EAAM2B,WAAa,IAC7B3B,GAAUA,EAAMkD,eAAiB,IAEtCJ,SAAU,CACL9C,IACOA,EAAMmD,KAAO,IACbnD,EAAM8C,SAASzB,KAAK,CAChBT,GAAI,cACJmC,UAAW,gBAEnB,IAIZ,eAAgB,CACZnC,GAAI,eACJE,KAAM,eACNC,YAAa,4NACbC,KAAM,eACN2B,SAAU,EACVC,MAAO,KACPxB,QAAS,CACJpB,GAAUA,EAAM8B,YAAYxC,IAAY,EACxCU,GAAUA,EAAMmC,YAAYd,KAAK,iBAEtCwB,YAAa,CACR7C,GAAUA,EAAM2B,WAAa,IAC7B3B,GAAUA,EAAMkD,eAAiB,IAEtCJ,SAAU,CACL9C,IACOA,EAAMmD,KAAO,IACbnD,EAAM8C,SAASzB,KAAK,CAChBT,GAAI,cACJmC,UAAW,gBAEnB,IAIZ,oBAAqB,CACjBnC,GAAI,oBACJE,KAAM,oBACNC,YAAa,8WACbC,KAAM,eACN2B,SAAU,EACVC,MAAO,KACPxB,QAAS,GAGTyB,YAAa,CACR7C,GAAUA,EAAM2B,WAAa,MAElCmB,SAAU,CACL9C,IACOA,EAAM0B,QAAQlC,GAASmC,UAAY,KACnC3B,EAAM8C,SAASzB,KAAK,CAChBT,GAAI,cACJmC,UAAW,qBAEnB,IAIZ,0BAA2B,CACvBnC,GAAI,0BACJE,KAAM,0BACNC,YAAa,idACbC,KAAM,eACN2B,SAAU,EACVC,MAAO,KACPxB,QAAS,CACJpB,IACOS,KAAKE,SAAW,KAChBX,EAAMmC,YAAYd,KAAK,WACvBrB,EAAMoD,UAAU/B,KAAK,mBACzB,GAGRwB,YAAa,CACR7C,GAAUA,EAAM2B,WAAa,KAElCmB,SAAU,CACL9C,IACOA,EAAM0B,QAAQlC,GAASmC,UAAY,KACnC3B,EAAM8C,SAASzB,KAAK,CAChBT,GAAI,cACJmC,UAAW,4BAGnB/C,EAAM8C,SAASzB,KAAK,CAChBT,GAAI,eACJmC,UAAW,2BACb,IAId,eAAgB,CACZnC,GAAI,eACJE,KAAM,eACNC,YAAa,8gBACbC,KAAM,eACN2B,SAAU,EACVC,MAAO,GACPxB,QAAS,CACJpB,GAAUA,EAAMmC,YAAYd,KAAK,UAEtCwB,YAAa,CACR7C,GAAUA,EAAM2B,WAAa,MAElCmB,SAAU,CACL9C,IAEGA,EAAM8C,SAASzB,KAAK,CAChBT,GAAI,kBACJmC,UAAW,iBAEf/C,EAAM8C,SAASzB,KAAK,CAChBT,GAAI,cACJmC,UAAW,gBACb,IAId,WAAc,CACVnC,GAAI,aACJE,KAAM,aACNC,YAAa,oXACbC,KAAM,eACN2B,SAAU,EACVC,MAAO,GACPxB,QAAS,CACJpB,GAAUA,EAAMwC,mBAAmBa,YAAa,GAErDR,YAAa,GAGbC,SAAU,IAId,eAAgB,CACZlC,GAAI,eACJE,KAAM,eACNC,YAAa,oXACbC,KAAM,eACN2B,SAAU,EACVC,MAAO,GACPxB,QAAS,CACJpB,GAAUA,EAAMwC,mBAAmBa,YAAa,GAErDR,YAAa,CACR7C,GAAUA,EAAM2B,WAAa,MAElCmB,SAAU,IAId,iBAAkB,CACdlC,GAAI,iBACJE,KAAM,iBACNC,YAAa,sYACbC,KAAM,eACN2B,SAAU,EACVC,MAAO,GACPxB,QAAS,CACJpB,GAAUA,EAAMwC,mBAAmBC,UAAW,GAEnDI,YAAa,GAGbC,SAAU,IAId,uBAAwB,CACpBlC,GAAI,uBACJE,KAAM,uBACNC,YAAa,iWACbC,KAAM,eACN2B,SAAU,EACVC,MAAO,GACPxB,QAAS,CACJpB,GAAUA,EAAMwC,mBAAmBc,KAAM,GAE9CT,YAAa,CACR7C,GAAUA,EAAM2B,WAAa,MAElCmB,SAAU,IAId,aAAc,CACVlC,GAAI,aACJE,KAAM,aACNC,YAAa,6WACbC,KAAM,eACN2B,SAAU,EACVC,MAAO,IACPxB,QAAS,CACJpB,GAAUA,EAAMwC,mBAAmBc,KAAM,GAE9CT,YAAa,CACR7C,GAAUA,EAAM2B,WAAa,MAElCmB,SAAU,CACL9C,IACGA,EAAM8C,SAASzB,KAAK,CAChBT,GAAI,WACJmC,UAAW,cACb,IAId,WAAY,CACRnC,GAAI,WACJE,KAAM,WACNC,YAAa,0PACbC,KAAM,eACN2B,SAAU,EACVC,MAAO,IACPxB,QAAS,CACJpB,GAAUA,EAAMwC,mBAAmBc,KAAM,GAE9CT,YAAa,CACR7C,GAAUA,EAAM2B,WAAa,MAElCmB,SAAU,CACL9C,IACGA,EAAM8C,SAASzB,KAAK,CAChBT,GAAI,eACJmC,UAAW,YACb,IAId,kBAAmB,CACfnC,GAAI,kBACJE,KAAM,kBACNC,YAAa,qVACbC,KAAM,eACN2B,SAAU,EACVC,MAAO,IACPxB,QAAS,CACJpB,GAAUA,EAAMwC,mBAAmBc,KAAM,EACzCtD,GAAUA,EAAMwC,mBAAmBC,UAAW,EAC9CzC,GAAUA,EAAMuD,aAAalC,KAAK,CAC/BT,GAAI,WACJa,SAAU,CAAC,EAAE,MAGrBoB,YAAa,CACR7C,GAAUA,EAAM2B,WAAa,MAElCmB,SAAU,CACL9C,IACGA,EAAM8C,SAASzB,KAAK,CAChBT,GAAI,UACJmC,UAAW,mBACb,KCzZLS,EAAoC,CAC7C,oBAAqB,CACjB5C,GAAI,oBACJE,KAAM,sHACNC,YAAa,0TACbC,KAAM,eACNS,SAAU,SACVP,OAAQ,GACRuC,OAAQ,GACRC,KAAM,MAEV,KAAQ,CACJ9C,GAAI,OACJE,KAAM,mDACNC,YAAa,gZACbC,KAAM,eACNS,SAAU,SACVP,OAAQ,GACRuC,OAAQ,GACRC,KAAM,MAEV,QAAW,CACP9C,GAAI,UACJE,KAAM,oGACNC,YAAa,uXACbC,KAAM,eACNS,SAAU,SACVP,OAAQ,EACRuC,OAAQ,GACRC,KAAM,MAEV,YAAe,CACX9C,GAAI,cACJE,KAAM,+DACNC,YAAa,kMACbC,KAAM,eACNS,SAAU,SACVP,OAAQ,GACRuC,OAAQ,IACRC,KAAM,MAEV,YAAe,CACX9C,GAAI,cACJE,KAAM,qEACNC,YAAa,6TACbC,KAAM,eACNS,SAAU,SACVP,OAAQ,GACRuC,OAAQ,IACRC,KAAM,MAEV,aAAgB,CACZ9C,GAAI,eACJE,KAAM,2EACNC,YAAa,6IACbC,KAAM,eACNS,SAAU,SACVP,OAAQ,GACRuC,OAAQ,IACRC,KAAM,MAEV,kBAAmB,CACf9C,GAAI,kBACJE,KAAM,yIACNC,YAAa,iKACbC,KAAM,eACNS,SAAU,SACVP,OAAQ,GACRuC,OAAQ,GACRC,KAAM,KAEV,cAAe,CACX9C,GAAI,cACJE,KAAM,6CACNC,YAAa,yKACbC,KAAM,eACNS,SAAU,SACVP,OAAQ,GACRuC,OAAQ,GACRC,KAAM,KAEV,QAAW,CACP9C,GAAI,UACJE,KAAM,6CACNC,YAAa,2FACbC,KAAM,eACNS,SAAU,SACVP,OAAQ,GACRuC,OAAQ,IACRC,KAAM,KAEV,SAAY,CACR9C,GAAI,WACJE,KAAM,qEACNC,YAAa,qNACbC,KAAM,eACNS,SAAU,SACVP,OAAQ,GACRuC,OAAQ,IACRC,KAAM,KAEV,eAAgB,CACZ9C,GAAI,eACJE,KAAM,qEACNC,YAAa,qNACbC,KAAM,eACNS,SAAU,SACVP,OAAQ,GACRuC,OAAQ,GACRC,KAAM,MC1GDC,EAAiC,CAE5C,MAAS,CACP/C,GAAI,QACJgD,KAAM,oyCACNC,MAAO,GAET,MAAS,CACPjD,GAAI,QACJgD,KAAM,wzCACNC,MAAO,GAET,MAAS,CACPjD,GAAI,QACJgD,KAAM,4pCACNC,MAAO,GAET,MAAS,CACPjD,GAAI,QACJgD,KAAM,wxCACNC,MAAO,GAET,MAAS,CACPjD,GAAI,QACJgD,KAAM,6pCACNC,MAAO,GAET,MAAS,CACPjD,GAAI,QACJgD,KAAM,6mCACNC,MAAO,GAET,MAAS,CACPjD,GAAI,QACJgD,KAAM,ywCACNC,MAAO,GAET,MAAS,CACPjD,GAAI,QACJgD,KAAM,ipCACNC,MAAO,GAET,MAAS,CACPjD,GAAI,QACJgD,KAAM,o+BACNC,MAAO,GAET,OAAU,CACRjD,GAAI,SACJgD,KAAM,mgBACNC,MAAO,GAET,OAAU,CACRjD,GAAI,SACJgD,KAAM,sfACNC,MAAO,GAET,OAAU,CACRjD,GAAI,SACJgD,KAAM,gjBACNC,MAAO,GAET,OAAU,CACRjD,GAAI,SACJgD,KAAM,6jBACNC,MAAO,GAET,OAAU,CACRjD,GAAI,SACJgD,KAAM,6lBACNC,MAAO,GAET,OAAU,CACRjD,GAAI,SACJgD,KAAM,qjBACNC,MAAO,GAET,OAAU,CACRjD,GAAI,SACJgD,KAAM,+eACNC,MAAO,GAET,OAAU,CACRjD,GAAI,SACJgD,KAAM,6oBACNC,MAAO,GAET,OAAU,CACRjD,GAAI,SACJgD,KAAM,upBACNC,MAAO,GAET,OAAU,CACRjD,GAAI,SACJgD,KAAM,uiBACNC,MAAO,GAET,OAAU,CACRjD,GAAI,SACJgD,KAAM,weACNC,MAAO,GAET,OAAU,CACRjD,GAAI,SACJgD,KAAM,iqBACNC,MAAO,GAET,OAAU,CACRjD,GAAI,SACJgD,KAAM,6gBACNC,MAAO,GAGT,eAAgB,CACdjD,GAAI,eACJgD,KAAM,scACNC,MAAO,WAET,mBAAoB,CAClBjD,GAAI,mBACJgD,KAAM,2WACNC,MAAO,WAET,2BAA4B,CAC1BjD,GAAI,2BACJgD,KAAM,2aACNC,MAAO,WAET,yBAA0B,CACxBjD,GAAI,yBACJgD,KAAM,uYACNC,MAAO,WAET,0BAA2B,CACzBjD,GAAI,0BACJgD,KAAM,gUACNC,MAAO,WAET,kBAAmB,CACjBjD,GAAI,kBACJgD,KAAM,6OACNC,MAAO,WAET,eAAgB,CACdjD,GAAI,eACJgD,KAAM,sNACNC,MAAO,WAET,gBAAiB,CACfjD,GAAI,gBACJgD,KAAM,yUACNC,MAAO,WAET,cAAe,CACbjD,GAAI,cACJgD,KAAM,83BACNC,MAAO,WAET,gBAAiB,CACfjD,GAAI,gBACJgD,KAAM,8QACNC,MAAO,WAET,eAAgB,CACdjD,GAAI,eACJgD,KAAM,ypDACNC,MAAO,YCvJEC,EAAoB,CAC/B,CACElD,GAAI,gBACJE,KAAM,gBACNC,YAAa,qTACbgD,SAAUvE,EACViC,SAAU,CAAC,EAAG,GACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAE,KAAM,GACjBC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQlC,GAASmC,WAAa,IAAO3B,GAAUA,EAAM6D,MAAQ,GAC3F7C,KAAM,2BACNI,QAAS,CACNpB,IAAYA,EAAMkD,eAAiB,EAAI,GAE1CiB,KAAM,CACJC,mBAAoB,mJACpBC,wBAAyB,qDACzBC,WAAY,wLAGhB,CACE1D,GAAI,SACJE,KAAM,SACNC,YAAa,sRACbgD,SAAUvE,EACViC,SAAU,CAAC,EAAG,GACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAE,KAAM,GACjBC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQlC,GAASmC,WAAa,IAAM3B,GAAUA,EAAM6D,MAAQ,GAC1F7C,KAAM,eACNI,QAAS,CACNpB,IAAYA,EAAMuE,gBAAkB,EAAI,EACxCvE,IAAYA,EAAM8B,YAAYzC,IAAW,EAAI,GAEhD8E,KAAM,CACJC,mBAAoB,iFACpBC,wBAAyB,uDAG7B,CACEzD,GAAI,yBACJE,KAAM,yBACNC,YAAa,iZACbgD,SAAUvE,EACViC,SAAU,CAAC,EAAG,GACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAE,KAAM,GACjBO,MAAO,CAAGxE,GAAUA,EAAM0B,QAAQlC,GAASmC,UAAY,KACvDuC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQlC,GAASmC,WAAa,IAAO3B,GAAUA,EAAM6D,MAAQ,GAC3F7C,KAAM,eACNI,QAAS,CACNpB,IAAYA,EAAMyE,cAAgB,EAAI,GAEzCN,KAAM,CACJC,mBAAoB,sNACpBC,wBAAyB,uDAG7B,CACEzD,GAAI,qBACJE,KAAM,qBACNC,YAAa,gJACbgD,SAAUvE,EACViC,SAAU,CAAC,EAAG,GACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAE,KAAM,GACjBO,MAAO,CAAGxE,GAAUA,EAAM0B,QAAQlC,GAASmC,UAAY,KACvDuC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQlC,GAASmC,WAAa,IAAO3B,GAAUA,EAAM6D,MAAQ,GAC3F7C,KAAM,eACNI,QAAS,CACNpB,IAAYA,EAAM8B,YAAYvC,IAAU,EAAI,EAC5CS,IAAYA,EAAM8B,YAAYxC,IAAY,EAAI,GAEjD6E,KAAM,CACJC,mBAAoB,wOACpBC,wBAAyB,uDAG7B,CACEzD,GAAI,oBACJE,KAAM,oBACNC,YAAa,yIACbgD,SAAUvE,EACViC,SAAU,CAAC,EAAG,GACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAE,KAAM,GACjBO,MAAO,CAAGxE,GAAUA,EAAM0B,QAAQlC,GAASmC,UAAY,KACvDuC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQlC,GAASmC,WAAa,IAAO3B,GAAUA,EAAM6D,MAAQ,GAC3F7C,KAAM,eACNI,QAAS,CACNpB,IAAYA,EAAM8B,YAAYxC,IAAY,EAAI,GAEjD6E,KAAM,CACJC,mBAAoB,oEACpBC,wBAAyB,uDAG7B,CACEzD,GAAI,eACJE,KAAM,eACNC,YAAa,gMACbgD,SAAUvE,EACViC,SAAU,CAAC,EAAG,IACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAE,KAAM,GACjBO,MAAO,CAAGxE,GAAUA,EAAM0B,QAAQlC,GAASmC,UAAY,KACvDuC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQlC,GAASmC,WAAa,KAAQ3B,GAAUA,EAAM6D,MAAQ,GAC5F7C,KAAM,eACNI,QAAS,CACNpB,IAAYA,EAAMoC,eAAef,KAAK,CAACT,GAAI,eAAgBW,OAAQ,cAAeoB,SAAU,GAAG,GAElGwB,KAAM,CACJC,mBAAoB,+LACpBC,wBAAyB,wDAG7B,CACEzD,GAAI,UACJE,KAAM,cACNC,YAAa,sRACbgD,SAAUvE,EACViC,SAAU,CAAC,EAAG,IACduC,SAAU,CAAE,CACVU,SAAU,WAEZ1E,MAAO,SACPiE,QAAS,CAAE,KAAM,GACjBO,MAAO,CAAGxE,GAAUA,EAAM0B,QAAQlC,GAASmC,UAAY,KACvDuC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQlC,GAASmC,WAAa,KAAQ3B,GAAUA,EAAM6D,MAAQ,GAC5F7C,KAAM,eACNI,QAAS,CACNpB,IAAYA,EAAMuE,gBAAkB,GAAG,EACvCvE,IAAYA,EAAM8B,YAAYzC,IAAW,EAAI,GAEhD8E,KAAM,CACJC,mBAAoB,8NACpBC,wBAAyB,wDAG7B,CACEzD,GAAI,oBACJE,KAAM,oBACNC,YAAa,mNACbgD,SAAUvE,EACViC,SAAU,CAAC,EAAG,IACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAE,KAAM,GACjBO,MAAO,CAAGxE,GAAUA,EAAM0B,QAAQlC,GAASmC,UAAY,KACvDuC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQlC,GAASmC,WAAa,KAAQ3B,GAAUA,EAAM6D,MAAQ,GAC5F7C,KAAM,eACNI,QAAS,CACNpB,IAAYA,EAAM8B,YAAYtC,IAAY,EAAI,EAC9CQ,IAAYA,EAAM8B,YAAYvC,IAAU,EAAI,EAC5CS,IAAYA,EAAM8B,YAAYxC,IAAY,EAAI,EAC9CU,IAAYA,EAAMkD,eAAiB,EAAI,GAE1CiB,KAAM,CACJC,mBAAoB,6SACpBC,wBAAyB,wDAG7B,CACEzD,GAAI,cACJE,KAAM,cACNC,YAAa,6QACbgD,SAAUvE,EACViC,SAAU,CAAC,EAAG,IACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAGjE,GAAUA,EAAM0B,QAAQlC,GAASmC,WAAa,KAC1D6C,MAAO,CAAGxE,GAAUA,EAAM0B,QAAQlC,GAASmC,UAAY,MACvDuC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQlC,GAASmC,WAAa,KAAQ3B,GAAUA,EAAM6D,MAAQ,GAC5F7C,KAAM,6CACNI,QAAS,CACNpB,IAAYA,EAAMoC,eAAef,KAAK,CAACT,GAAI,cAAeW,OAAQ,cAAeoB,SAAU,GAAG,EAC9F3C,IACCA,EAAMK,mBAAmBgB,KACvBvB,EAAcK,QACXwE,IAAa3E,EAAMK,mBAAmBC,SAASqE,KAEjDlE,KAAKC,MAAMD,KAAKE,SAAWb,EAAcS,SAC3C,GAGL4D,KAAM,CACJC,mBAAoB,ubACpBC,wBAAyB,wDAG7B,CACEzD,GAAI,eACJE,KAAM,eACNC,YAAa,6XACbgD,SAAUvE,EACViC,SAAU,CAAC,EAAG,IACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAGjE,GAAUA,EAAM0B,QAAQlC,GAASmC,WAAa,KAC1D6C,MAAO,CAAGxE,GAAUA,EAAM0B,QAAQlC,GAASmC,UAAY,MACvDuC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQlC,GAASmC,WAAa,KAAQ3B,GAAUA,EAAM6D,MAAQ,GAC5F7C,KAAM,eACNI,QAAS,CACNpB,IAAYA,EAAMkD,eAAiB,EAAI,EACvClD,IAAYA,EAAM8B,YAAYxC,IAAY,EAAI,EAC9CU,IACCA,EAAMK,mBAAmBgB,QACpBvB,EAAcK,QACdwE,IAAa3E,EAAMK,mBAAmBC,SAASqE,KAChDC,MAAM,EAAGnE,KAAKC,MAAsB,GAAhBD,KAAKE,UAAe,GAC3C,GAGLwD,KAAM,CACJC,mBAAoB,8YACpBC,wBAAyB,wDAG7B,CACEzD,GAAI,eACJE,KAAM,eACNC,YAAa,6MACbgD,SAAUvE,EACViC,SAAU,CAAC,EAAG,IACduC,SAAU,CAAC,CACTU,SAAU,iBAEZ1E,MAAO,SACPiE,QAAS,CAAGjE,GAAUA,EAAM0B,QAAQlC,GAASmC,WAAa,MAC1D6C,MAAO,CAAGxE,GAAUA,EAAM0B,QAAQlC,GAASmC,UAAY,MACvDuC,UAAW,CACRlE,GAAUA,EAAM0B,QAAQlC,GAASmC,WAAa,IAC9C3B,GAAUA,EAAM0B,QAAQpC,GAASqC,WAAa,IAC9C3B,GAAUA,EAAM6D,MAAQ,GAE3B7C,KAAM,2BACNI,QAAS,CACNpB,IAAYA,EAAM8B,YAAYtC,IAAY,EAAI,EAC9CQ,IAAYA,EAAM8B,YAAYxC,IAAY,EAAI,GAEjD6E,KAAM,CACJU,iBAAiB,EACjBT,mBAAoB,sQACpBC,wBAAyB,uHCzQU,CACzC,CACIzD,GAAI,gBACJE,KAAM,gBACNC,YAAa,4IACbgD,SAAUzE,EACVmC,SAAU,CAAC,EAAG,GACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAE,KAAM,GACjBC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQpC,GAASqC,WAAa,IAAO3B,GAAUA,EAAM6D,MAAQ,GAC3F7C,KAAM,eACNI,QAAS,CACJpB,IAAYA,EAAM8B,YAAYxC,IAAY,EAAI,GAEnD6E,KAAM,CACFC,mBAAoB,qHACpBC,wBAAyB,uDAS7B,CACIzD,GAAI,sBACJE,KAAM,sBACNC,YAAa,4nBACbgD,SAAUzE,EACVmC,SAAU,CAAC,EAAG,IACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAE,KAAM,GACjBC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQpC,GAASqC,WAAa,KAAQ3B,GAAUA,EAAM2B,WAAa,IAAQ3B,GAAUA,EAAM6D,MAAQ,GACjI7C,KAAM,eACNI,QAAS,CACJpB,IACGA,EAAM8B,YAAYxC,IAAY,EAC9BU,EAAMyE,cAAgB,GACtBzE,EAAMkD,eAAiB,EACvBlD,EAAM2B,WAAa,IACnB3B,EAAM0B,QAAQnC,GAAOoC,WAAalB,KAAKqE,IAAI,IAAO9E,EAAM0B,QAAQnC,GAAOoC,UAAU,GAGzFwC,KAAM,CACFC,mBAAoB,iiBACpBC,wBAAyB,6GAIjC,CACIzD,GAAI,oBACJE,KAAM,oBACNC,YAAa,gnBACbgD,SAAUzE,EACVmC,SAAU,CAAC,EAAG,IACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAE,KAAM,GACjBC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQpC,GAASqC,WAAa,KAAQ3B,GAAUA,EAAM0B,QAAQlC,GAASmC,WAAa,IAAQ3B,GAAUA,EAAM6D,MAAQ,GAClJ7C,KAAM,eACNI,QAAS,CACJpB,IACGA,EAAM8B,YAAYxC,IAAY,EAC9BU,EAAMyE,cAAgB,GACtBzE,EAAMkD,eAAiB,EACvBlD,EAAM8B,YAAYtC,IAAY,CAAC,GAGvC2E,KAAM,CACFC,mBAAoB,ifACpBC,wBAAyB,6GAKjC,CACIzD,GAAI,uBACJE,KAAM,uBACNC,YAAa,6cACbgD,SAAUzE,EACVmC,SAAU,CAAC,EAAG,IACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAE,KAAM,GACjBC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQpC,GAASqC,WAAa,KAAQ3B,GAAUA,EAAM6D,MAAQ,EAC3F7D,IAAW,IAAD+E,EAAAC,EACP,IAAIC,EAAQ,IAOZ,MANiF,YAAZ,QAAjEF,EAAA/E,EAAMkF,QAAQC,MAAKC,GAAwB,wBAAdA,EAAOxE,YAA6B,IAAAmE,OAAA,EAAjEA,EAAmE/E,SACnEiF,GAAS,KAEkE,YAAZ,QAA/DD,EAAAhF,EAAMkF,QAAQC,MAAKC,GAAwB,sBAAdA,EAAOxE,YAA2B,IAAAoE,OAAA,EAA/DA,EAAiEhF,SACjEiF,GAAS,KAENjF,EAAM2B,WAAasD,CAAK,GAGnCjE,KAAM,eACNI,QAAS,CACJpB,IAAYA,EAAM8B,YAAYxC,IAAY,EAAI,EAC9CU,IACGA,EAAMmC,YAAYd,KAAK,uBAAuB,EAEjDrB,IAAW,IAADqF,EAAAC,EACP,IAAIL,EAAQ,IACqE,YAAZ,QAAjEI,EAAArF,EAAMkF,QAAQC,MAAKC,GAAwB,wBAAdA,EAAOxE,YAA6B,IAAAyE,OAAA,EAAjEA,EAAmErF,SACnEiF,GAAS,KAEkE,YAAZ,QAA/DK,EAAAtF,EAAMkF,QAAQC,MAAKC,GAAwB,sBAAdA,EAAOxE,YAA2B,IAAA0E,OAAA,EAA/DA,EAAiEtF,SACjEiF,GAAS,KAEbjF,EAAM2B,WAAasD,CAAK,GAGhCd,KAAM,CACFC,mBAAoB,+SACpBC,wBAAyB,wDASjC,CACIzD,GAAI,gBACJE,KAAM,gBACNC,YAAa,sHACbgD,SAAUzE,EACVmC,SAAU,CAAC,EAAG,IACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAE,KAAM,GACjBC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQpC,GAASqC,WAAa,KAAQ3B,GAAUA,EAAM6D,MAAQ,GAC5F7C,KAAM,eACNI,QAAS,CACJpB,IAAYA,EAAM8B,YAAYxC,IAAY,EAAI,EAC9CU,IACGA,EAAM0B,QAAQnC,GAAOgG,KAAO,GAAG,EAElCvF,IAEGA,EAAMoD,UAAU/B,KAAK,gBAAgB,GAG7C8C,KAAM,CACFC,mBAAoB,8bACpBC,wBAAyB,sDACzBC,WAAY,gRAKpB,CACI1D,GAAI,iBACJE,KAAM,iBACNC,YAAa,uKACbgD,SAAUzE,EACVmC,SAAU,CAAC,EAAG,IACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAE,KAAM,GACjBC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQpC,GAASqC,WAAa,KAAQ3B,GAAUA,EAAM6D,MAAQ,GAC5F7C,KAAM,eACNI,QAAS,CACJpB,IACGA,EAAM0B,QAAQlC,GAAS+F,KAAO,GAAG,GAGzCpB,KAAM,CACFC,mBAAoB,8IACpBC,wBAAyB,sDACzBC,WAAY,wRAMpB,CACI1D,GAAI,eACJE,KAAM,eACNC,YAAa,gKACbgD,SAAUzE,EACVmC,SAAU,CAAC,EAAG,IACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAE,KAAM,GACjBC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQpC,GAASqC,WAAa,KAAQ3B,GAAUA,EAAM6D,MAAQ,GAC5F7C,KAAM,eACNI,QAAS,CACJpB,IACG,MAAMwF,EAAO,CAACxF,EAAM0B,QAAQpC,GAASiG,KACrCvF,EAAM0B,QAAQpC,GAASiG,KAAO,IAC9BvF,EAAM0B,QAAQlC,GAASmC,WAAa,IACpC3B,EAAM0B,QAAQlC,GAAS+F,KAAO,IAC9BvF,EAAM0B,QAAQnC,GAAOoC,WAAa,IAClC3B,EAAM0B,QAAQnC,GAAOgG,KAAO,IAC5BhD,YAAW,KACPvC,EAAM0B,QAAQpC,GAASiG,IAAMC,EAAK,EAAE,GACrC,IAAc,EAEpBxF,IACGA,EAAMmC,YAAYd,KAAK,eAAe,EAEzCrB,IACGA,EAAMoD,UAAU/B,KAAK,eAAe,GAG5C8C,KAAM,CACFC,mBAAoB,8jBACpBC,wBAAyB,wDAIjC,CACIzD,GAAI,cACJE,KAAM,cACNC,YAAa,6NACbgD,SAAUzE,EACVmC,SAAU,CAAC,EAAG,GACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAE,KAAM,GACjBC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQpC,GAASqC,WAAa,IAAO3B,GAAUA,EAAM6D,MAAQ,GAC3F7C,KAAM,eACNI,QAAS,CACJpB,IAAYA,EAAMkD,eAAiB,CAAC,GAEzCiB,KAAM,CACFC,mBAAoB,uJACpBC,wBAAyB,uDAMjC,CACIzD,GAAI,iBACJE,KAAM,iBACNC,YAAa,4KACbgD,SAAUzE,EACVmC,SAAU,CAAC,EAAG,IACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAE,KAAM,GACjBC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQpC,GAASqC,WAAa,KAAQ3B,GAAUA,EAAM6D,MAAQ,GAC5F7C,KAAM,eACNI,QAAS,CACJpB,IACGA,EAAMK,mBAAmBgB,QACpBvB,EAAcK,QACdwE,IAAa3E,EAAMK,mBAAmBC,SAASqE,KAChDC,MAAM,EAAGnE,KAAKC,MAAsB,GAAhBD,KAAKE,UAAe,IAC3C,EAEJX,IAAYA,EAAMmC,YAAYd,KAAK,iBAAiB,GAEzD8C,KAAM,CACFC,mBAAoB,mNACpBC,wBAAyB,wDAIjC,CACIzD,GAAI,kBACJE,KAAM,kBACNC,YAAa,sHACbgD,SAAUzE,EACVmC,SAAU,CAAC,EAAG,GACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAE,KAAM,GACjBC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQpC,GAASqC,WAAa,IAAO3B,GAAUA,EAAM6D,MAAQ,GAC3F7C,KAAM,eACNI,QAAS,CACJpB,IAAYA,EAAM8B,YAAYxC,IAAY,EAAI,GAEnD6E,KAAM,CACFC,mBAAoB,qHACpBC,wBAAyB,uDAIjC,CACIzD,GAAI,mBACJE,KAAM,mBACNC,YAAa,qMACbgD,SAAUzE,EACVmC,SAAU,CAAC,EAAG,IACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAE,KAAM,GACjBC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQpC,GAASqC,WAAa,KAAQ3B,GAAUA,EAAM6D,MAAQ,GAC5F7C,KAAM,eACNI,QAAS,CACJpB,IAAYA,EAAMyE,cAAgB,EAAE,EACpCzE,IAAYA,EAAMmC,YAAYd,KAAK,mBAAmB,GAE3D8C,KAAM,CACFC,mBAAoB,sIACpBC,wBAAyB,sDACzBC,WAAY,kHASpB,CACI1D,GAAI,kBACJE,KAAM,kBACNC,YAAa,iKACbgD,SAAUzE,EACVmC,SAAU,CAAC,EAAG,GACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAE,KAAM,GACjBC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQpC,GAASqC,WAAa,IAAO3B,GAAUA,EAAM6D,MAAQ,GAC3F7C,KAAM,eACNI,QAAS,CACJpB,IAAYA,EAAM8B,YAAYxC,IAAY,EAAI,EAC9CU,IAAYA,EAAMmD,KAAM,KAAQnD,EAAMmC,YAAYd,KAAK,kBAAkB,GAE9E8C,KAAM,CACFC,mBAAoB,qHACpBC,wBAAyB,uDAGjC,CACIzD,GAAI,cACJE,KAAM,cACNC,YAAa,2JACbgD,SAAUzE,EACVmC,SAAU,CAAC,EAAG,GACduC,SAAU,CAAC,CACPU,SAAU,oBAEd1E,MAAO,SACPiE,QAAS,CACJjE,GAAQA,EAAM0B,QAAQpC,GAASqC,WAAa,IAC5C3B,IACOA,EAAMmC,YAAY7B,SAAS,oBAEvC4D,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQpC,GAASqC,WAAa,IAAO3B,GAAUA,EAAM6D,MAAQ,GAC3F7C,KAAM,eACNI,QAAS,CACJpB,IAAYA,EAAM8B,YAAYxC,IAAY,EAAI,EAC9CU,IAAYA,EAAMmD,KAAM,KAAQnD,EAAMmD,KAAM,IAAOnD,EAAMmC,YAAYd,KAAK,cAAc,GAE7F8C,KAAM,CACFC,mBAAoB,qHACpBC,wBAAyB,uDAGjC,CACIzD,GAAI,gBACJE,KAAM,gBACNC,YAAa,+IACbgD,SAAUzE,EACVmC,SAAU,CAAC,EAAG,IACduC,SAAU,CACN,CACAU,SAAU,gBAGd1E,MAAO,SACPiE,QAAS,CACJjE,IACOA,EAAMmC,YAAY7B,SAAS,qBAAuBN,EAAMmC,YAAY7B,SAAS,eAEpFN,GACMA,EAAM0B,QAAQpC,GAASqC,WAAa,KAG/CuC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQpC,GAASqC,WAAa,KAAQ3B,GAAUA,EAAM6D,MAAQ,GAC5F7C,KAAM,eACNI,QAAS,CACJpB,IAAYA,EAAM8B,YAAYxC,IAAY,EAAI,EAC9CU,IAAYA,EAAMmD,KAAM,IAAOnD,EAAMmD,KAAM,KAAQnD,EAAMmC,YAAYd,KAAK,gBAAgB,IAGnG,CACIT,GAAI,cACJE,KAAM,cACNC,YAAa,gHACbgD,SAAUzE,EACVmC,SAAU,CAAC,EAAG,IACduC,SAAU,CACN,CACAU,SAAU,kBAGd1E,MAAO,SACPiE,QAAS,CACJjE,IACOA,EAAMmC,YAAY7B,SAAS,qBAAuBN,EAAMmC,YAAY7B,SAAS,iBAAmBN,EAAMmC,YAAY7B,SAAS,iBAElIN,GACMA,EAAM0B,QAAQpC,GAASqC,WAAa,MAG/CuC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQpC,GAASqC,WAAa,KAAQ3B,GAAUA,EAAM6D,MAAQ,GAC5F7C,KAAM,eACNI,QAAS,CACJpB,IAAYA,EAAM8B,YAAYxC,IAAY,EAAI,EAC9CU,IAAYA,EAAMmD,KAAM,KAAQnD,EAAMmC,YAAYd,KAAK,QAAQ,IAMxE,CACIT,GAAI,yBACJE,KAAM,yBACNC,YAAa,8WACbgD,SAAUzE,EACVmC,SAAU,CAAC,EAAG,IACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAGjE,GACDA,EAAM0B,QAAQnC,GAAOoC,WAAa,MAAQ3B,EAAM0B,QAAQpC,GAASqC,WAAa3B,EAAM0B,QAAQlC,GAASmC,WAEhHuC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQpC,GAASqC,WAAa,IAAQ3B,GAAUA,EAAM6D,MAAQ,GAC5F7C,KAAM,eACNI,QAAS,CACJpB,IACD,MAAMyF,EAAa,CAAC9D,UAAW3B,EAAM2B,UAAWD,QAAS,IAAI1B,EAAM0B,SAAUI,YAAa,IAAI9B,EAAM8B,aAAcoB,cAAelD,EAAMkD,cAAeuB,aAAczE,EAAMyE,aAAciB,iBAAkB1F,EAAM0F,iBAAkBnB,eAAgBvE,EAAMuE,gBACpP9D,KAAKE,SAAW,IAChBX,EAAM2B,WAAa,IACnB3B,EAAM8B,YAAYxC,IAAY,GAC9BU,EAAM8B,YAAYvC,IAAU,GAC5BS,EAAM8B,YAAYtC,IAAY,GAE9B+C,YAAW,KACXvC,EAAM8B,YAAYxC,IAAY,GAC9BU,EAAM8B,YAAYvC,IAAU,GAC5BS,EAAM8B,YAAYtC,IAAY,EAAE,GAC7B,OAEHQ,EAAM2B,UAAY,EAClB3B,EAAM0B,QAAQpC,GAASqC,UAAY,EACnC3B,EAAM0B,QAAQnC,GAAOoC,UAAY,EACjC3B,EAAM0B,QAAQlC,GAASmC,UAAY,EACnC3B,EAAM8B,YAAYxC,GAAW,IAC7BU,EAAM8B,YAAYvC,GAAS,IAC3BS,EAAM8B,YAAYtC,GAAW,IAC7BQ,EAAMkD,cAAgB,IACtBlD,EAAMyE,aAAe,IACrBzE,EAAM0F,iBAAmB,IACzB1F,EAAMuE,eAAiB,IAEvBhC,YAAW,KACXvC,EAAM2B,UAAY8D,EAAW9D,UAC7B3B,EAAM0B,QAAQpC,GAASqC,UAAY8D,EAAW/D,QAAQpC,GAASqC,UAC/D3B,EAAM0B,QAAQnC,GAAOoC,UAAY8D,EAAW/D,QAAQnC,GAAOoC,UAC3D3B,EAAM0B,QAAQlC,GAASmC,UAAY8D,EAAW/D,QAAQlC,GAASmC,UAC/D3B,EAAM8B,YAAYxC,GAAWmG,EAAW3D,YAAYxC,GACpDU,EAAM8B,YAAYvC,GAASkG,EAAW3D,YAAYvC,GAClDS,EAAM8B,YAAYtC,GAAWiG,EAAW3D,YAAYtC,GACpDQ,EAAMkD,cAAgBuC,EAAWvC,cACjClD,EAAMyE,aAAegB,EAAWhB,aAChCzE,EAAM0F,iBAAmBD,EAAWC,iBACpC1F,EAAMuE,eAAiBkB,EAAWlB,cAAc,GAC7C,KACN,IAKT,CACI3D,GAAI,gBACJE,KAAM,gBACNC,YAAa,2LACbgD,SAAUzE,EACVmC,SAAU,CAAC,EAAG,IACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAE,KAAM,GACjBC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQpC,GAASqC,WAAa,KAAQ3B,GAAUA,EAAM6D,MAAQ,GAC5F7C,KAAM,eACNI,QAAS,CACJpB,IAAYA,EAAM2B,WAAa,GAAI,GAExCwC,KAAM,CACFC,mBAAoB,6FACpBC,wBAAyB,sDAGjC,CACIzD,GAAI,iBACJE,KAAM,qBACNC,YAAa,6JACbgD,SAAUzE,EACVmC,SAAU,CAAC,EAAG,IACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAGjE,GAAUA,EAAM0B,QAAQpC,GAASqC,WAAa,MAC1D6C,MAAO,CAAGxE,GAAUA,EAAM0B,QAAQpC,GAASqC,UAAY,KACvDuC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQpC,GAASqC,WAAa,KAAQ3B,GAAUA,EAAM6D,MAAQ,GAC5F7C,KAAM,eACNI,QAAS,CACJpB,IAAYA,EAAM8B,YAAYxC,IAAY,EAAI,EAC9CU,IAAYA,EAAM0B,QAAQnC,GAAOoC,UAAY,MAAU3B,EAAM0B,QAAQnC,GAAOoC,WAAa,IAAK,EAC9F3B,IAAYA,EAAM0B,QAAQlC,GAASmC,UAAY,MAAU3B,EAAM0B,QAAQlC,GAASmC,WAAa,IAAK,GAEvGwC,KAAM,CACFC,mBAAoB,yfACpBC,wBAAyB,oDACzBC,WAAY,iGAGpB,CACI1D,GAAI,mBACJE,KAAM,mBACNC,YAAa,0QACbgD,SAAUzE,EACVmC,SAAU,CAAC,EAAG,IACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAGjE,GAAUA,EAAM0B,QAAQpC,GAASqC,WAAa,MAC1D6C,MAAO,CAAGxE,GAAUA,EAAM0B,QAAQpC,GAASqC,UAAY,MACvDuC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQpC,GAASqC,WAAa,KAAQ3B,GAAUA,EAAM6D,MAAQ,GAC5F7C,KAAM,eACNI,QAAS,CACJpB,IAAYA,EAAM8B,YAAYxC,IAAY,EAAI,EAC9CU,IAAYA,EAAMyE,cAAgB,CAAC,EACnCzE,IAAYA,EAAMkD,eAAiB,CAAC,EACpClD,IAAYA,EAAM0F,kBAAoB,CAAC,EACvC1F,IAAYA,EAAMuE,gBAAkB,CAAC,EACrCvE,IAAYA,EAAM0B,QAAQnC,GAAOoC,UAAY,MAAU3B,EAAM0B,QAAQnC,GAAOoC,WAAa,IAAK,EAC9F3B,IAAYA,EAAM8B,YAAYtC,IAAY,EAAI,GAEnD2E,KAAM,CACFC,mBAAoB,ymBACpBC,wBAAyB,oDACzBC,WAAY,ybAGpB,CACI1D,GAAI,SACJE,KAAM,SACNC,YAAa,uKACbgD,SAAUzE,EACVmC,SAAU,CAAC,EAAG,IACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAGjE,GAAUA,EAAM0B,QAAQpC,GAASqC,WAAa,MAC1D6C,MAAO,CAAGxE,GAAUA,EAAM0B,QAAQpC,GAASqC,UAAY,MACvDuC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQpC,GAASqC,WAAa,KACvD3B,GAAUA,EAAM0B,QAAQlC,GAASmC,WAAa,IAC9C3B,GAAQA,EAAM2B,UAAY,IAC1B3B,GAAUA,EAAM6D,MAAQ,GAE7B7C,KAAM,eACNI,QAAS,CACJpB,IAAYA,EAAMyE,cAAgB,CAAC,GAExCN,KAAM,CACFC,mBAAoB,qIACpBC,wBAAyB,0KACzBC,WAAY,0JAIpB,CACI1D,GAAI,mBACJE,KAAM,mBACNC,YAAa,qOACbgD,SAAUzE,EACVmC,SAAU,CAAC,EAAG,IACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAGjE,GAAUA,EAAM0B,QAAQpC,GAASqC,WAAa,KAAQ3B,GAAUA,EAAM0B,QAAQnC,GAAOoC,WAAa,MAC9G6C,MAAO,CAAGxE,GAAUA,EAAM0B,QAAQpC,GAASqC,UAAY,MACvDuC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQnC,GAAOoC,WAAa,KAAQ3B,GAAUA,EAAM0B,QAAQnC,GAAOoC,WAAa,KAAQ3B,GAAUA,EAAM6D,MAAQ,GAC9I7C,KAAM,eACNI,QAAS,CACJpB,IAAYA,EAAM8B,YAAYxC,IAAY,EAAI,EAC9CU,IAAYA,EAAM8B,YAAYvC,IAAU,EAAI,EAC5CS,IAAYA,EAAM8B,YAAYtC,IAAY,EAAI,EAC9CQ,IAAYA,EAAMyE,cAAgB,CAAC,GAAG,IAAI,KAAMhE,KAAKC,MAAsB,EAAhBD,KAAKE,UAAc,GAEnFwD,KAAM,CACFC,mBAAoB,yXACpBC,wBAAyB,wHACzBC,WAAY,2CAGpB,CACI1D,GAAI,gBACJE,KAAM,gBACNC,YAAa,ogBACbgD,SAAUzE,EACVmC,SAAU,CAAC,EAAG,IACduC,SAAU,CAAE,CACRU,SAAU,kBAEd1E,MAAO,SACPiE,QAAS,CAAGjE,GAAUA,EAAM0B,QAAQpC,GAASqC,WAAa,KAAQ3B,GAAUA,EAAM0B,QAAQnC,GAAOoC,WAAa,MAC9G6C,MAAO,CAAGxE,GAAUA,EAAM0B,QAAQpC,GAASqC,UAAY,KACvDuC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQpC,GAASqC,WAAa,IAAQ3B,GAAUA,EAAM0B,QAAQnC,GAAOoC,WAAa,IAAQ3B,GAAUA,EAAM6D,MAAQ,GAChJ7C,KAAM,eACNI,QAAS,CACJpB,IAAYA,EAAMyE,cAAgB,CAAC,GAExCN,KAAM,CACFC,mBAAoB,0IACpBC,wBAAyB,0HAGjC,CACIzD,GAAI,oBACJE,KAAM,oBACNC,YAAa,8aACbgD,SAAUzE,EACVmC,SAAU,CAAC,EAAG,IACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAGjE,GAAUA,EAAM0B,QAAQnC,GAAOoC,WAAa,KAAQ3B,EAAM0B,QAAQpC,GAASqC,WAAa,KAAQ3B,EAAM0B,QAAQlC,GAASmC,WAAa,MAChJ6C,MAAO,CAAGxE,GAAUA,EAAM0B,QAAQpC,GAASqC,UAAY,KACvDuC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQpC,GAASqC,WAAa,KAAQ3B,GAAUA,EAAM6D,MAAQ,GAC5F7C,KAAM,eACNI,QAAS,CACJpB,IAAYA,EAAM8B,YAAYxC,IAAY,EAAI,EAC9CU,IAAYA,EAAM8B,YAAYvC,IAAU,EAAI,EAC5CS,IAAYA,EAAM8B,YAAYtC,IAAY,EAAI,GAEnD2E,KAAM,CACFC,mBAAoB,yXACpBC,wBAAyB,0DC1nBE,CAsBnC,CACEzD,GAAI,mBACJE,KAAM,mBACNC,YAAa,moBACbgD,SAAUxE,EACVkC,SAAU,CAAC,EAAG,IACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAE,KAAM,GACjBC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQnC,GAAOoC,WAAa,IAAQ3B,GAAUA,EAAM6D,MAAQ,GAC1F7C,KAAM,eACNI,QAAS,CACNpB,IAAYA,EAAMkD,eAAiB,CAAC,EACpClD,IAAYA,EAAM8B,YAAYvC,IAAU,EAAG,EAC3CS,IAAYA,EAAM8B,YAAYtC,IAAY,CAAC,EAC3CQ,IAAYA,EAAM0F,kBAAoB,CAAC,GAE1CC,aAAc,CACZ,IAAO,CACJ3F,IAAYA,EAAM2B,WAAa,IAAK,EACpC3B,IAAW,IAAD4F,EAAE5F,EAAM0F,iBAAmB,IAA8D,QAAzDE,EAAA5F,EAAM6F,SAASV,MAAMW,GAA2B,WAAfA,EAAQlF,YAAgB,IAAAgF,OAAA,EAAzDA,EAA2DG,QAAS,EAAE,IAGrH5B,KAAM,CACJC,mBAAoB,wmBACpBC,wBAAyB,mFAsB7B,CACEzD,GAAI,UACJE,KAAM,MACNC,YAAa,kDACbgD,SAAUxE,EACVkC,SAAU,CAAC,EAAG,IACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAE,KAAM,GACjBC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQnC,GAAOoC,WAAa,KAAQ3B,GAAUA,EAAM2B,WAAa,KAC/FX,KAAM,SACNI,QAAS,CACNpB,IAAYA,EAAM2B,WAAa,GAAK,EACpC3B,IAAYA,EAAMmC,YAAYd,KAAK,UAAU,GAEhD8C,KAAM,CACJC,mBAAoB,UACpBC,wBAAyB,mFA+C7B,CACEzD,GAAI,YACJE,KAAM,YACNC,YAAa,0cACbgD,SAAUxE,EACVkC,SAAU,CAAC,EAAG,IACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAGjE,GAAUA,EAAMmC,YAAY7B,SAAS,YACjD4D,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQnC,GAAOoC,WAAa,IAAQ3B,GAAUA,EAAM2B,WAAa,KAC/FX,KAAM,eACNI,QAAS,CACNpB,IAAYA,EAAM0B,QAAQnC,GAAOoC,WAAa,GAAI,EAClD3B,IAAYA,EAAM2B,WAAa,GAAK,EACpC3B,IAAYA,EAAMmC,YAAYd,KAAK,MAAM,IAG9C,CACET,GAAI,eACJE,KAAM,eACNC,YAAa,0cACbgD,SAAUxE,EACVkC,SAAU,CAAC,EAAG,IACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAGjE,GAAUA,EAAMmC,YAAY7B,SAAS,YACjD4D,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQnC,GAAOoC,WAAa,IAAQ3B,GAAUA,EAAM2B,WAAa,KAC/FX,KAAM,eACNI,QAAS,CACNpB,IAAYA,EAAM0B,QAAQnC,GAAOoC,WAAa,GAAI,EAClD3B,IAAYA,EAAM2B,WAAa,GAAK,EACpC3B,IAAYA,EAAMmC,YAAYd,KAAK,MAAM,IAkM9C,CACIT,GAAI,cACJE,KAAM,cACNC,YAAa,iNACbgD,SAAUxE,EACVkC,SAAU,CAAC,EAAG,GACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAE,KAAM,GACjBC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQnC,GAAOoC,WAAa,IAAO3B,GAAUA,EAAM6D,MAAQ,GACzF7C,KAAM,2BACNI,QAAS,CACNpB,IACCA,EAAMgG,aAAazG,IAAU,CAAC,GAGlC4E,KAAM,CACJC,mBAAoB,gSACpBC,wBAAyB,+DAQ7B,CACEzD,GAAI,sBACJE,KAAM,sBACNC,YAAa,6HACbgD,SAAUxE,EACVkC,SAAU,CAAC,EAAG,GACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAGjE,IAAW,IAAD+E,EACpB,MAAsE,YAAZ,QAAnDA,EAAA/E,EAAMkF,QAAQC,MAAKc,GAAc,oBAATA,EAAErF,YAAyB,IAAAmE,OAAA,EAAnDA,EAAqD/E,MAAkB,GAEhFkE,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQnC,GAAOoC,WAAa,IAAO3B,GAAUA,EAAM6D,MAAQ,GACzF7C,KAAM,eACNI,QAAS,CACNpB,IAAYA,EAAM8B,YAAYvC,IAAU,EAAG,EAC3CS,IAAYA,EAAM0B,QAAQpC,GAASqC,WAAa,GAAI,GAEvDwC,KAAM,CACJC,mBAAoB,6iBACpBC,wBAAyB,+DAQ7B,CACEzD,GAAI,kBACJE,KAAM,kBACNC,YAAa,0GACbgD,SAAUxE,EACVkC,SAAU,CAAC,EAAG,GACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAGjE,IAAW,IAADgF,EACpB,MAA0E,YAAZ,QAAvDA,EAAAhF,EAAMkF,QAAQC,MAAKc,GAAc,wBAATA,EAAErF,YAA6B,IAAAoE,OAAA,EAAvDA,EAAyDhF,MAAkB,GAEpFkE,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQnC,GAAOoC,WAAa,IAAO3B,GAAUA,EAAM6D,MAAQ,GACzF7C,KAAM,eACNI,QAAS,CACNpB,IAAYA,EAAM8B,YAAYvC,IAAU,EAAG,EAC3CS,IAAYA,EAAM0B,QAAQlC,GAASmC,WAAa,GAAI,GAEvDwC,KAAM,CACJC,mBAAoB,mmBACpBC,wBAAyB,+DAU7B,CACEzD,GAAI,oBACJE,KAAM,oBACNC,YAAa,gaACbgD,SAAUxE,EACVkC,SAAU,CAAC,EAAG,GACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAGjE,IAAW,IAADqF,EACpB,MAAoE,YAAZ,QAAjDA,EAAArF,EAAMkF,QAAQC,MAAKc,GAAc,kBAATA,EAAErF,YAAuB,IAAAyE,OAAA,EAAjDA,EAAmDrF,MAAkB,GAE9EkE,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQnC,GAAOoC,WAAa,IAAO3B,GAAUA,EAAM6D,MAAQ,GACzF7C,KAAM,qBACNI,QAAS,CACNpB,IAAYA,EAAM8B,YAAYvC,IAAU,EAAG,EAC3CS,IAAYA,EAAM2B,WAAa,IAAK,GAEvCwC,KAAM,CACJC,mBAAoB,4hBACpBC,wBAAyB,6DACzBC,WAAY,gPAShB,CACE1D,GAAI,gBACJE,KAAM,gBACNC,YAAa,4EACbgD,SAAUxE,EACVkC,SAAU,CAAC,EAAG,GACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAGjE,IAAW,IAADsF,EACpB,MAAwE,YAAZ,QAArDA,EAAAtF,EAAMkF,QAAQC,MAAKc,GAAc,sBAATA,EAAErF,YAA2B,IAAA0E,OAAA,EAArDA,EAAuDtF,MAAkB,GAElFkE,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQnC,GAAOoC,WAAa,IAAO3B,GAAUA,EAAM6D,MAAQ,GACzF7C,KAAM,qBACNI,QAAS,CACNpB,IAAYA,EAAM8B,YAAYvC,IAAU,EAAG,EAC3CS,IAAYA,EAAM0B,QAAQlC,GAASmC,WAAa,GAAI,GAEvDwC,KAAM,CACJC,mBAAoB,ilBACpBC,wBAAyB,+DAO7B,CACEzD,GAAI,qBACJE,KAAM,qBACNC,YAAa,qZACbgD,SAAUxE,EACVkC,SAAU,CAAC,EAAG,GACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAE,KAAM,GACjBC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQnC,GAAOoC,WAAa,IAAO3B,GAAUA,EAAM6D,MAAQ,GACzF7C,KAAM,eACNI,QAAS,CACNpB,IAAYA,EAAM8B,YAAYvC,IAAU,EAAI,EAC5CS,IAAYA,EAAM2B,WAAa,GAAI,GAGtCgE,aAAc,CACZ,KAAS,CACN3F,IACCA,EAAM8B,YAAYvC,IAAU,GAC5BS,EAAM2B,WAAa,IAEnB,MAAMuE,EAAoBlG,EAAM6F,SAASV,MAAMW,GAA2B,eAAfA,EAAQlF,KAC/DsF,IACFlG,EAAM8B,YAAYvC,IAAoC,IAA1B2G,EAAkBH,MAChD,IAIN5B,KAAM,CACJC,mBAAoB,+TACpBC,wBAAyB,8DACzB8B,MAAO,CAAC,6CACRC,WAAY,CACV,KAAS,CAAC,kBAKhB,CACExF,GAAI,UACJE,KAAM,UACNC,YAAa,sQACbgD,SAAUxE,EACVkC,SAAU,CAAC,EAAG,GACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAE,KAAM,GACjBC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQnC,GAAOoC,WAAa,IAAO3B,GAAUA,EAAM6D,MAAQ,GACzF7C,KAAM,eACNI,QAAS,CACNpB,IACC,IAAIgC,EAAM,IACVlC,EAAcuG,SAAS1B,IAClB3E,EAAMK,mBAAmBC,SAASqE,IAAY3C,EAAM,IAGvDhC,EAAMK,mBAAmBgB,KAAKsD,GAC9B3C,IAAK,GACL,EAEHhC,IACCA,EAAMkD,cAAgB,EAAG,GAG7BiB,KAAM,CACJC,mBAAoB,gVACpBC,wBAAyB,gEAG7B,CACEzD,GAAI,MACJE,KAAM,yBACNC,YAAa,gLACbgD,SAAUxE,EACVkC,SAAU,CAAC,EAAG,GACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAGjE,GAAUA,EAAMmD,KAAO,KAAQnD,EAAMmD,KAAO,KAAkC,WAA1BnD,EAAMsG,iBACtEpC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQnC,GAAOoC,WAAa,IAAO3B,GAAUA,EAAM6D,MAAQ,GACzF7C,KAAM,IACNI,QAAS,CACNpB,IACCA,EAAMK,mBAAmBgB,KAAK,UAAU,GAG5C8C,KAAM,CACJC,mBAAoB,uNACpBC,wBAAyB,8DACzBC,WAAY,qDAMhB,CACE1D,GAAI,oBACJE,KAAM,oBACNC,YAAa,8WACbgD,SAAUxE,EACVkC,SAAU,CAAC,EAAG,GACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAE,KAAM,GACjBC,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQnC,GAAOoC,WAAa,IAAO3B,GAAUA,EAAM6D,MAAQ,GACzF7C,KAAM,eACNI,QAAS,CACNpB,IAAYA,EAAMoC,eAAef,KAAK,CAACT,GAAI,oBAAqBW,OAAQ,cAAeoB,SAAU,GAAG,GAEvGwB,KAAM,CACJC,mBAAoB,uVACpBC,wBAAyB,+DAG7B,CACEzD,GAAI,0BACJE,KAAM,0BACNC,YAAa,gVACbgD,SAAUxE,EACVkC,SAAU,CAAC,EAAG,GACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAE,KAAM,GACjBC,UAAW,CACRlE,GAAUA,EAAM0B,QAAQnC,GAAOoC,WAAa,IAC5C3B,GAAUA,EAAM0B,QAAQpC,GAASqC,WAAa,IAC9C3B,GAAUA,EAAM6D,MAAQ,GAE3B7C,KAAM,eACNI,QAAS,CACNpB,IAAWA,EAAM8B,YAAYxC,IAAY,EAAG,EAC5CU,IAAYA,EAAMoC,eAAef,KAAK,CAACT,GAAI,0BAA2BW,OAAQ,cAAeoB,SAAU,GAAG,GAE7GwB,KAAM,CACJC,mBAAoB,2cACpBC,wBAAyB,wHAG7B,CACEzD,GAAI,uBACJE,KAAM,uBACNC,YAAa,ueACbgD,SAAUxE,EACVkC,SAAU,CAAC,EAAG,IACduC,SAAU,CAAC,CACTU,SAAU,4BAEZ1E,MAAO,SACPiE,QAAS,CAAGjE,IACD,GAGXkE,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQnC,GAAOoC,WAAa,KAAQ3B,GAAUA,EAAM6D,MAAQ,GAC1F7C,KAAM,eACNI,QAAS,CACNpB,IAAYA,EAAM8B,YAAYvC,IAAU,EAAI,EAC5CS,IAAYA,EAAMmC,YAAYd,KAAK,CAClCT,GAAI,QACJE,KAAM,QACNC,YAAa,0LACbC,KAAM,gBACN,GAEJmD,KAAM,CACJC,mBAAoB,kTACpBC,wBAAyB,yHAG7B,CACEzD,GAAI,gBACJE,KAAM,gBACNC,YAAa,0SACbgD,SAAUxE,EACVkC,SAAU,CAAC,EAAG,IACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAGjE,GACNA,EAAMmC,YAAYgD,MAAMoB,GAAqB,cAAZA,EAAK3F,KACjCH,KAAKE,SAAW,GAElBX,EAAMmD,KAAO,IAEnBnD,GAAUA,EAAM6D,OAAS,GAE5BK,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQnC,GAAOoC,WAAa,KAAQ3B,GAAUA,EAAM6D,MAAQ,GAC1F7C,KAAM,eACNI,QAAS,CACNpB,IAAYA,EAAMmC,YAAYd,KAAK,CAClCT,GAAI,gBACJE,KAAM,gBACNC,YAAa,0SACbC,KAAM,gBACN,GAEJmD,KAAM,CACJC,mBAAoB,iQACpBC,wBAAyB,gEAG7B,CACEzD,GAAI,eACJE,KAAM,eACNC,YAAa,kdACbgD,SAAUxE,EACVkC,SAAU,CAAC,EAAG,IACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAGjE,GACHA,EAAMmD,KAAO,KAAQnD,EAAMmD,KAAO,KAE3Ce,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQnC,GAAOoC,WAAa,KAAQ3B,GAAUA,EAAM6D,MAAQ,GAC1F7C,KAAM,eACNI,QAAS,CACNpB,IACCA,EAAMoC,eAAef,KAAK,CACxBT,GAAI,eACJ+B,SAAU,EACVpB,OAAQ,eACR,GAGN4C,KAAM,CACJC,mBAAoB,wTACpBC,wBAAyB,gEAG7B,CACEzD,GAAI,iBACJE,KAAM,iBACNC,YAAa,gTACbgD,SAAUxE,EACVkC,SAAU,CAAC,EAAG,IACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAGjE,GACHA,EAAMmC,YAAYgD,MAAMoB,GAAqB,UAAZA,EAAK3F,KAE5CZ,GAAUA,EAAM6D,OAAS,GAE5BK,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQnC,GAAOoC,WAAa,KAC1DX,KAAM,eACNI,QAAS,CACNpB,IAECA,EAAM8B,YAAYvC,IAAU,EAAG,GAGnC4E,KAAM,CACJC,mBAAoB,+GACpBC,wBAAyB,gEAG7B,CACEzD,GAAI,YACJE,KAAM,YACNC,YAAa,6MACbgD,SAAUxE,EACVkC,SAAU,CAAC,EAAG,IACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAGjE,GACHA,EAAMmC,YAAYgD,MAAMoB,GAAqB,UAAZA,EAAK3F,KAE5CZ,GAAUA,EAAM6D,OAAS,GAE5BK,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQnC,GAAOoC,WAAa,MAC1DX,KAAM,eACNI,QAAS,CACNpB,IAECA,EAAM8B,YAAYvC,IAAU,EAAG,GAGnC4E,KAAM,CACJC,mBAAoB,+GACpBC,wBAAyB,gEAG7B,CACEzD,GAAI,kBACJE,KAAM,6HACNC,YAAa,wbACbgD,SAAUxE,EACVkC,SAAU,CAAC,EAAG,IACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAGjE,GACHA,EAAMmC,YAAYgD,MAAMoB,GAAqB,gBAAZA,EAAK3F,KAE5CZ,GAAUA,EAAM6D,OAAS,GAE5BK,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQlC,GAASmC,WAAa,MAC5DX,KAAM,eACNI,QAAS,CACNpB,IACCA,EAAMuD,aAAalC,KAAK,CACtBT,GAAI,cACJa,SAAU,CAAC,EAAE,IACb,EAEHzB,IACCA,EAAMwC,mBAAmBC,UAAW,EACpCzC,EAAMwC,mBAAmBc,KAAM,CAAI,GAGvCa,KAAM,CACJC,mBAAoB,yTACpBC,wBAAyB,sDAG7B,CACEzD,GAAI,aACJE,KAAM,mLACNC,YAAa,wVACbgD,SAAUxE,EACVkC,SAAU,CAAC,EAAG,IACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAGjE,GACHA,EAAMmC,YAAYgD,MAAMoB,GAAqB,YAAZA,EAAK3F,KAE5CZ,GAAUA,EAAM6D,OAAS,GAE5BK,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQnC,GAAOoC,WAAa,KAC1DX,KAAM,eACNI,QAAS,CACNpB,IACCA,EAAM8B,YAAYvC,IAAU,EAC5BS,EAAM8B,YAAYtC,IAAY,EAC9BQ,EAAM8B,YAAYxC,IAAY,EAC9BU,EAAM8B,YAAYzC,IAAW,CAAC,GAGlC8E,KAAM,CACJC,mBAAoB,0eACpBC,wBAAyB,gEAG7B,CACEzD,GAAI,cACJE,KAAM,4EACNC,YAAa,irBACbgD,SAAUxE,EACVkC,SAAU,CAAC,EAAG,IACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAGjE,GACHA,EAAMmC,YAAYgD,MAAMoB,GAAqB,YAAZA,EAAK3F,KAE5CZ,GAAUA,EAAM6D,OAAS,GAE5BK,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQnC,GAAOoC,WAAa,MAC1DX,KAAM,eACNI,QAAS,CACNpB,IACCA,EAAMwC,mBAAmBa,YAAa,CAAI,GAG9Cc,KAAM,CACJC,mBAAoB,8QACpBC,wBAAyB,iEFtkBjC,CACEzD,GAAI,cACJE,KAAM,cACNC,YAAa,mXACbgD,SAAUzE,EACVmC,SAAU,CAAC,EAAG,IACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CACNjE,GAAUA,EAAM0B,QAAQnC,GAAOoC,WAAa,IAC5C3B,GAAUA,EAAM0B,QAAQlC,GAASmC,WAAa,IAC9C3B,GAAUA,EAAM0B,QAAQpC,GAASqC,WAAa,KAEjDuC,UAAW,CACRlE,GAAUA,EAAM0B,QAAQpC,GAASqC,WAAa,KAC9C3B,GAAUA,EAAM0B,QAAQlC,GAASmC,WAAa,IAC9C3B,GAAUA,EAAM0B,QAAQlC,GAASmC,WAAa,IAC9C3B,GAAUA,EAAM0B,QAAQnC,GAAOoC,WAAa,IAC5C3B,GAAUA,EAAM0B,QAAQnC,GAAOoC,WAAa,IAC5C3B,GAAUA,EAAM6D,MAAQ,GAE3B7C,KAAM,eACNI,QAAS,CACNpB,IAAYA,EAAMkD,eAAiB,EAAE,GAExCiB,KAAM,CACJU,iBAAiB,EACjBT,mBAAoB,kJACpBC,wBAAyB,gTAI7B,CACEzD,GAAI,aACJE,KAAM,aACNC,YAAa,4YACbgD,SAAUzE,EACVmC,SAAU,CAAC,EAAG,IACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAGjE,GACHA,EAAM6D,OAAS,GAExBK,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQpC,GAASqC,WAAa,MAC5DX,KAAM,eACNI,QAAS,CACNpB,IAAYA,EAAMoC,eAAef,KAAK,CACrCT,GAAI,aACJ+B,SAAU,EACVpB,OAAQ,eACR,GAEJ4C,KAAM,CACJC,mBAAoB,iNACpBC,wBAAyB,sDAG7B,CACEzD,GAAI,eACJE,KAAM,eACNC,YAAa,4YACbgD,SAAUxE,EACVkC,SAAU,CAAC,EAAG,IACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAGjE,GACHA,EAAM6D,OAAS,EAEvB7D,GACQA,EAAMmC,YAAYgD,MAAMoB,GAAqB,UAAZA,EAAK3F,MAG/CsD,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQnC,GAAOoC,WAAa,MAC1DX,KAAM,eACNI,QAAS,CACNpB,IAAYA,EAAMoC,eAAef,KAAK,CACrCT,GAAI,eACJ+B,SAAU,EACVpB,OAAQ,eACR,GAEJ4C,KAAM,CACJC,mBAAoB,iNACpBC,wBAAyB,gEAI7B,CACEzD,GAAI,iBACJE,KAAM,iBACNC,YAAa,6MACbgD,SAAUzE,EACVmC,SAAU,CAAC,EAAG,IACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAGjE,GACHA,EAAMmC,YAAYgD,MAAMoB,GAAqB,oBAAZA,EAAK3F,MAE/CsD,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQpC,GAASqC,WAAa,KAC5DX,KAAM,eACNI,QAAS,CACNpB,IACCA,EAAMoC,eAAef,KAAK,CAExBT,GAAI,iBACJ+B,SAAU,EACVpB,OAAQ,eACR,GAGN4C,KAAM,CACJC,mBAAoB,gSACpBC,wBAAyB,sDAG7B,CACEzD,GAAI,uBACJE,KAAM,uBACNC,YAAa,oYACbgD,SAAUzE,EACVmC,SAAU,CAAC,EAAG,IACduC,SAAU,GACVhE,MAAO,SACPiE,QAAS,CAAGjE,GACHA,EAAMmC,YAAYgD,MAAMoB,GAAqB,gBAAZA,EAAK3F,IAAoC,UAAZ2F,EAAK3F,IAA8B,yBAAZ2F,EAAK3F,MAEnGsD,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQpC,GAASqC,WAAa,MAC5DX,KAAM,eACNI,QAAS,CACNpB,IACCA,EAAMoC,eAAef,KAAK,CACxBT,GAAI,uBACJ+B,SAAU,EACVpB,OAAQ,eACR,GAGN4C,KAAM,CACJC,mBAAoB,+OACpBC,wBAAyB,sDAG7B,CACEzD,GAAI,aACJE,KAAM,qEACNC,YAAa,mqBACbgD,SAAUvE,EACViC,SAAU,CAAC,EAAG,IACduC,SAAU,CACR,CACEU,SAAU,iBAGd1E,MAAO,SACPiE,QAAS,CAAGjE,GACHA,EAAMmC,YAAYgD,MAAMoB,GAAqB,yBAAZA,EAAK3F,MAE/CsD,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQlC,GAASmC,WAAa,MAC5DX,KAAM,eACNI,QAAS,CACNpB,IACCA,EAAMoC,eAAef,KAAK,CACxBT,GAAI,aACJ+B,SAAU,EACVpB,OAAQ,eACR,GAGN4C,KAAM,CACJC,mBAAoB,2PACpBC,wBAAyB,oNAG7B,CACEzD,GAAI,WACJE,KAAM,wPACNC,YAAa,yoBACbgD,SAAUvE,EACViC,SAAU,CAAC,EAAG,IACduC,SAAU,CACR,CACEU,SAAU,iBAGd1E,MAAO,SACPiE,QAAS,CAAGjE,GACHA,EAAMmC,YAAYgD,MAAMoB,GAAqB,gBAAZA,EAAK3F,MAE/CsD,UAAW,CAAGlE,GAAUA,EAAM0B,QAAQlC,GAASmC,WAAa,MAC5DX,KAAM,eACNI,QAAS,CACNpB,IACCA,EAAMoC,eAAef,KAAK,CACxBT,GAAI,WACJ+B,SAAU,EACVpB,OAAQ,eACR,GAGN4C,KAAM,CACJC,mBAAoB,oUACpBC,wBAAyB,qNG3dlBmC,EAAsB,CAE/B,CAAE5F,GAAI,SACJmF,MAAO,EACP9B,QAAUjE,GAAqBA,EAAM+B,OAAS,IAC9C0E,OTRgB,SSShBvC,WAAW,EACXpD,KAAM,SACNE,KAAM,eACN0F,KAAM,IACNC,WAAY,KACZpB,IAAK,EACLqB,gBAAiB,IACjBC,gBAAiB,IAGnB,CAAEjG,GAAI,OACJmF,MAAO,EACP9B,SAAS,EACTwC,OAAQpH,EACR6E,WAAW,EACXpD,KAAM,OACNE,KAAM,eACN0F,KAAM,GACNC,WAAY,KACZpB,IAAK,GACLqB,gBAAiB,IACjBC,gBAAiB,IACnB,CAAEjG,GAAI,UACJmF,MAAO,EACP9B,QAAUjE,GAAqBA,EAAM+B,OAAS,IAC9C0E,OAAQpH,EACR6E,WAAW,EACXpD,KAAM,UACNE,KAAM,eACN0F,KAAM,IACNC,WAAY,KACZpB,IAAK,IACLqB,gBAAiB,IACjBC,gBAAiB,IACnB,CAAEjG,GAAI,QACJmF,MAAO,EACP9B,QAAUjE,GAAqBA,EAAM+B,OAAS,IAC9C0E,OAAQpH,EACR6E,WAAW,EACXpD,KAAM,QACNE,KAAM,eACN0F,KAAM,IACNC,WAAY,KACZpB,IAAK,IACLqB,gBAAiB,IACjBC,gBAAiB,IACnB,CAAEjG,GAAI,gBACJmF,MAAO,EACP9B,QAAUjE,GAAqBA,EAAM+B,OAAS,IAC9C0E,OAAQpH,EACR6E,WAAW,EACXpD,KAAM,gBACNE,KAAM,eACN0F,KAAM,IACNC,WAAY,KACZpB,IAAK,EACLqB,gBAAiB,IACjBC,gBAAiB,IAKnB,CAAEjG,GAAI,SACJmF,MAAO,EACP9B,QAAUjE,GAAqBA,EAAM+B,OAAS,IAC9C0E,OAAQjH,EACR0E,WAAW,EACXpD,KAAM,SACNE,KAAM,eACN0F,KAAM,GACNC,WAAY,KACZpB,IAAK,IACLqB,gBAAiB,IACjBC,gBAAiB,IACnB,CAAEjG,GAAI,OACJmF,MAAO,EACP9B,QAAUjE,GACDA,EAAM+B,OAAS,IACtB/B,EAAM0B,QAAQlC,GAASmC,WAAa,IAEtC8E,OAAQjH,EACR0E,WAAW,EACXpD,KAAM,OACNE,KAAM,eACN0F,KAAM,GACNC,WAAY,KACZpB,IAAK,EACLqB,gBAAiB,IACjBC,gBAAiB,IACnB,CAAEjG,GAAI,iBACJmF,MAAO,EACP9B,QAAUjE,GACDA,EAAM+B,OAAS,KACtB/B,EAAM0B,QAAQlC,GAASmC,WAAa,KAEtC8E,OAAQjH,EACR0E,WAAW,EACXpD,KAAM,iBACNE,KAAM,eACN0F,KAAM,IACNC,WAAY,KACZpB,IAAK,GACLqB,gBAAiB,IACjBC,gBAAiB,IACnB,CAAEjG,GAAI,oBACJmF,MAAO,EACP9B,QAAUjE,GACDA,EAAM+B,OAAS,KACtB/B,EAAM0B,QAAQlC,GAASmC,WAAa,KAEtC8E,OAAQjH,EACR0E,WAAW,EACXpD,KAAM,oBACNE,KAAM,qBACN0F,KAAM,IACNC,WAAY,KACZpB,IAAK,GACLqB,gBAAiB,IACjBC,gBAAiB,IACnB,CAAEjG,GAAI,qBACJmF,MAAO,EACP9B,QAAUjE,GACDA,EAAM+B,OAAS,MACtB/B,EAAM0B,QAAQlC,GAASmC,WAAa,MAEtC8E,OAAQjH,EACR0E,WAAW,EACXpD,KAAM,qBACNE,KAAM,eACN0F,KAAM,KACNC,WAAY,KACZpB,IAAK,IACLqB,gBAAiB,IACjBC,gBAAiB,IAGnB,CAAEjG,GAAI,MACJmF,MAAO,EACP9B,QAAUjE,GAAqBA,EAAM+B,OAAS,IAC9C0E,OAAQnH,EACR4E,WAAW,EACXpD,KAAM,MACNE,KAAM,eACN0F,KAAM,GACNC,WAAY,IACZpB,IAAK,EACLqB,gBAAiB,IACjBC,gBAAiB,IACnB,CAAEjG,GAAI,YACJmF,MAAO,EACP9B,QAAUjE,GACDA,EAAM+B,OAAS,IACtB/B,EAAM0B,QAAQpC,GAASqC,WAAa,GAEtC8E,OAAQnH,EACR4E,WAAW,EACXpD,KAAM,YACNE,KAAM,qBACN0F,KAAM,IACNC,WAAY,KACZpB,IAAK,EACLqB,gBAAiB,IACjBC,gBAAiB,IACnB,CAAEjG,GAAI,UACJmF,MAAO,EACP9B,QAAUjE,GACDA,EAAM+B,OAAS,KACtB/B,EAAM0B,QAAQpC,GAASqC,WAAa,IAEtC8E,OAAQnH,EACR4E,WAAW,EACXpD,KAAM,UACNE,KAAM,eACN0F,KAAM,IACNC,WAAY,KACZpB,IAAK,EACLqB,gBAAiB,KACjBC,gBAAiB,IACnB,CAAEjG,GAAI,mBACJmF,MAAO,EACP9B,QAAUjE,GACDA,EAAM+B,OAAS,KACtB/B,EAAM0B,QAAQpC,GAASqC,WAAa,IAEtC8E,OAAQnH,EACR4E,WAAW,EACXpD,KAAM,mBACNE,KAAM,eACN0F,KAAM,IACNC,WAAY,EACZpB,IAAK,GACLqB,gBAAiB,IACjBC,gBAAiB,IACnB,CAAEjG,GAAI,kBACJmF,MAAO,EACP9B,QAAUjE,GACDA,EAAM+B,OAAS,KACtB/B,EAAM0B,QAAQpC,GAASqC,WAAa,IAEtC8E,OAAQnH,EACR4E,WAAW,EACXpD,KAAM,kBACNE,KAAM,eACN0F,KAAM,IACNC,WAAY,EACZpB,IAAK,GACLqB,gBAAiB,MACjBC,gBAAiB,IACnB,CAAEjG,GAAI,kBACJmF,MAAO,EACP9B,QAAUjE,GACDA,EAAM+B,OAAS,MACtB/B,EAAM0B,QAAQpC,GAASqC,WAAa,IAEtC8E,OAAQnH,EACR4E,WAAW,EACXpD,KAAM,kBACNE,KAAM,eACN0F,KAAM,IACNC,WAAY,GACZpB,IAAK,IACLqB,gBAAiB,IACjBC,gBAAiB,IAGnB,CAAEjG,GAAI,aACJmF,MAAO,EACP9B,QAAUjE,GAAqBA,EAAM+B,OAAS,IAC9C0E,OAAQlH,EACR2E,WAAW,EACXpD,KAAM,aACNE,KAAM,eACN0F,KAAM,EACNC,WAAY,IACZpB,IAAK,EACLqB,gBAAiB,IACjBC,gBAAiB,IACnB,CAAEjG,GAAI,SACJmF,MAAO,EACP9B,QAAUjE,GACDA,EAAM+B,OAAS,GACtB/B,EAAM0B,QAAQnC,GAAOoC,WAAa,IAEpC8E,OAAQlH,EACR2E,WAAW,EACXpD,KAAM,SACNE,KAAM,eACN0F,KAAM,IACNC,WAAY,IACZpB,IAAK,EACLqB,gBAAiB,KACjBC,gBAAiB,IACnB,CAAEjG,GAAI,WACJmF,MAAO,EACP9B,QAAUjE,GACDA,EAAM+B,OAAS,IACtB/B,EAAM0B,QAAQnC,GAAOoC,WAAa,IAEpC8E,OAAQlH,EACR2E,WAAW,EACXpD,KAAM,WACNE,KAAM,eACN0F,KAAM,IACNC,WAAY,IACZpB,IAAK,EACLqB,gBAAiB,IACjBC,gBAAiB,IACnB,CAAEjG,GAAI,SACJmF,MAAO,EACP9B,QAAUjE,GACDA,EAAM+B,OAAS,IACtB/B,EAAM0B,QAAQnC,GAAOoC,WAAa,IAEpC8E,OAAQlH,EACR2E,WAAW,EACXpD,KAAM,SACNE,KAAM,qBACN0F,KAAM,IACNC,WAAY,IACZpB,IAAK,IACLqB,gBAAiB,IACjBC,gBAAiB,IACnB,CAAEjG,GAAI,YACJmF,MAAO,EACP9B,QAAUjE,GACDA,EAAM+B,OAAS,KACtB/B,EAAM0B,QAAQnC,GAAOoC,WAAa,IAEpC8E,OAAQlH,EACR2E,WAAW,EACXpD,KAAM,YACNE,KAAM,SACN0F,KAAM,IACNC,WAAY,IACZpB,IAAK,IACLqB,gBAAiB,IACjBC,gBAAiB,KC9SVC,EAAgC,CAC3CC,cAAe,CACbnG,GAAI,gBACJE,KAAM,uKACNC,YAAa,+OACb4B,SAAU,EACVqE,YAAa,GACbC,aAAa,EACbC,WAAW,EACXC,cAAgBnH,GAEPS,KAAKqE,IAAI9E,EAAM+B,MAAO,IAE/BqF,gBAAkBpH,KAEPA,EAAMsG,iBAAmBtG,EAAM6D,OAAS,EAEnDwD,gBAAkBrH,GAETA,EAAM6F,SAASxD,MAAKyD,GAAWA,EAAQC,MAAQ,KAI1DuB,eAAgB,CACd1G,GAAI,iBACJE,KAAM,6JACNC,YAAa,2OACb4B,SAAU,EACVqE,YAAa,GACbC,aAAa,EACbC,WAAW,EACXC,cAAgBnH,IAEd,MAAMuH,EAAqB9G,KAAKuB,IAC9BhC,EAAM0B,QAAQlC,GAASmC,UACvB3B,EAAM0B,QAAQnC,GAAOoC,UACrB3B,EAAM0B,QAAQpC,GAASqC,WAEzB,OAAOlB,KAAKqE,IAAIyC,EAAoB,GAAG,EAEzCH,gBAAkBpH,GAETA,EAAM+B,MAAQ,IAEvBsF,gBAAkBrH,GAETA,EAAM0B,QAAQlC,GAASmC,UAAY,IACnC3B,EAAM0B,QAAQnC,GAAOoC,UAAY,IACjC3B,EAAM0B,QAAQpC,GAASqC,UAAY,IAI9C6F,eAAgB,CACd5G,GAAI,iBACJE,KAAM,oGACNC,YAAa,mIACb4B,SAAU,EACVqE,YAAa,EACbC,aAAa,EACbC,WAAW,EACXC,cAAgBnH,GAEPA,EAAMK,mBAAmBE,OAAS,EAAI,EAAI,EAEnD6G,gBAAkBpH,GAGTA,EAAMyH,UAAUlH,OAAS,GAAKP,EAAM+B,MAAQ,IAErDsF,gBAAkBrH,GAETA,EAAMK,mBAAmBE,OAAS,GAI7CmH,aAAc,CACZ9G,GAAI,eACJE,KAAM,mIACNC,YAAa,0QACb4B,SAAU,EACVqE,YAAa,EACbC,aAAa,EACbC,WAAW,EACXC,cAAgBnH,GAEPA,EAAMwC,mBAAmBa,WAAa,EAAI,EAEnD+D,gBAAkBpH,GAETA,EAAM6D,OAAS,EAExBwD,gBAAkBrH,GAETA,EAAMmC,YAAY7B,SAAS,eAAiBN,EAAMwC,mBAAmBa,aClFlF,SAASsE,EAAkBC,GAKzB,MAAO,CAHQ,GACInH,KAAKE,UAAYiH,EAAWC,MAAQC,KADxC,GAEIrH,KAAKE,UAAYiH,EAAWG,OAASD,KAE1D,CAGA,SAASE,EAAgBC,EAAejI,GAGtC,GADwBA,EAAMuD,aAAalB,MAAK6F,GAAKA,EAAEtH,KAAOqH,IACzC,OAAO,EAC5B,MAAME,EAAY3G,EAAYyG,GACxBG,EAAepI,EAAMoI,aAAaH,GAGxC,QAAIE,EAAUtG,OAAoB,OAAZuG,QAAY,IAAZA,OAAY,EAAZA,EAAcC,OAAQ,OAExCD,GAAgBD,EAAU7G,UAAagH,KAAKC,OAASH,EAAaI,eAAiB,GAAML,EAAU7G,WAIhG6G,EAAUhH,WAAWsH,OAAMC,GAAaA,EAAU1I,KAC3D,CA+HA,SAAS2I,EAAY3I,EAAkB4H,GAErC,MAAMgB,EA9HR,SAAqB5I,GACnB,MAAM6I,EAA+B,GAGrC,IAAK,MAAMZ,KAASjI,EAAM8I,OACpBd,EAAgBC,EAAOjI,IACzB6I,EAAgBxH,KAAKG,EAAYyG,IAKrC,GAA+B,IAA3BY,EAAgBtI,OAAc,OAAO,KAGzC,MAAMwI,EAAYtI,KAAKuB,OAAO6G,EAAgBG,KAAIf,GAASA,EAAM/G,UAC3D+H,EAAkBJ,EAAgB1I,QAAO8H,GAASA,EAAM/G,SAAW6H,IAGzE,GAAIE,EAAgB1I,OAAS,EAAG,CAC9B,MACM2I,EAAgBD,EADFxI,KAAKC,MAAMD,KAAKE,SAAWsI,EAAgB1I,SAI/D,GAAoB,IAAhBE,KAAKE,SAAiBuI,EAAchI,OACtC,OAAOgI,CAEX,CAGA,OAAO,IACT,CAgGyBC,CAAYnJ,GAG7BoJ,EAAsB,IAAIpJ,EAAMuD,cAGtC,GAAIqF,EAAgB,CAAC,IAADS,EAQlB,IAAI5H,EAPJzB,EAAMoI,aAAaQ,EAAehI,IAAM,CACtCA,GAAIgI,EAAehI,GACnB4H,cAAeF,KAAKC,MACpBF,QAA6C,QAArCgB,EAAArJ,EAAMoI,aAAaQ,EAAehI,WAAG,IAAAyI,OAAA,EAArCA,EAAuChB,QAAS,GAAK,GAM7D5G,EAD8B,WAA5BmH,EAAenH,SACNkG,EAAkBC,GACpB0B,MAAMC,QAAQX,EAAenH,UAC3BmH,EAAenH,SAEfkG,EAAkBC,GAG/BwB,EAAoB/H,KAAK,CACvBT,GAAIgI,EAAehI,GACnBa,YAEJ,CAEA,OAAO2H,CACT,CAiFA,SAASI,EAAgBxJ,GAEvB,OAAOyJ,OAAOC,KAAKC,GAAMxJ,QAAOS,GACjB+I,EAAK/I,GACNiD,QAAU7D,EAAM6D,OAEhC,CAkBA,SAAS+F,EAAU5J,GACjB,MAAMuI,EAAMD,KAAKC,MACjB,IAAIsB,EAAa7J,EAAM6J,WACnBzG,EAAYpD,EAAMoD,UAClB0G,EAAe9J,EAAM8J,aAQzB,OANIvB,EAAMvI,EAAM8J,aX1SY,MW2S1BA,EAAevB,GACdsB,EAAYzG,GAvBjB,SAAoBpD,GAElB,OAA+B,IAA3BA,EAAMoD,UAAU7C,OAEX,CAAC,GAAIiJ,EAAgBxJ,IAMvB,CAFQA,EAAMoD,UAAU,GACbpD,EAAMoD,UAAUwB,MAAM,GAG1C,CAW8BmF,CAAW/J,IAIhC,CAAC6J,EAAYzG,EAAW0G,EACjC,CAEO,MAAME,EAAgBA,CAAChK,EAAkBiK,EAAmBrC,KACjE,MAAMsC,EAA8B,CAAC,EACrC,GAAoB,IAAhBlK,EAAM6D,MACR,OAAOqG,EAIT,GAAoB,IAAhBlK,EAAM6D,MAAa,CAErB,MAAMsG,EAAwBrK,EAAc2I,OAAO9D,GACjD3E,EAAMK,mBAAmBC,SAASqE,KAI9ByF,EAAqBpK,EAAM+B,OX9TU,IW+TrCsI,EAAmBrK,EAAM0B,QAAQpC,GAASqC,WX9TH,IW+TvC2I,EAAiBtK,EAAM0B,QAAQnC,GAAOoC,WX9TD,IW+TrC4I,EAAmBvK,EAAM0B,QAAQlC,GAASmC,WX9TH,KWiUzCwI,GACAC,GACAC,GACAC,GACAC,KACFL,EAAQrG,MAAQ,EAChBqG,EAAQ/H,YAAc,IAAInC,EAAMmC,YAAa,yBAEjD,CAGA+H,EAAQvI,UAAY3B,EAAM2B,UAAY3B,EAAMuE,eAAiBvE,EAAM8B,YAAYzC,GAI/E,MAAMmL,EAAiB,IAAKxK,EAAM0B,SAClC+H,OAAOgB,QAAQzK,EAAM0B,SAAS2E,SAAQqE,IAA2B,IAAzBC,EAAYlE,GAAOiE,EACzD,MAAME,EAAYnE,EAAOlB,IAAMvF,EAAM8B,YAAY6I,GAAc3K,EAAM8B,YAAYzC,GACjFmL,EAAeG,GAA6C,IACvDlE,EACH9E,UAAW8E,EAAO9E,UAAYiJ,EAC/B,IAEHV,EAAQxI,QAAU8I,EAIlBN,EAAQnI,MAAQ/B,EAAM+B,MAAQ/B,EAAMuE,eAAiBvE,EAAM8B,YAAYzC,GACvE6K,EAAQnI,OAAS0H,OAAO7H,OAAO5B,EAAM0B,SAASmJ,QAAO,CAACC,EAAKrE,IAAWqE,EAAMrE,EAAOlB,IAAMvF,EAAM8B,YAAY2E,EAAO3F,OAAO,GAGzHoJ,EAAQhF,QAtSV,SAA4BlF,GAE1B,MAAM+K,EAAkB/K,EAAMkF,QAAQ/E,QAAO8F,GAAiB,WAAZA,EAAEjG,QAAoBgJ,KAAI/C,GAAKA,EAAErF,KAGnF,OAAOkD,EAAQkF,KAAI5D,IAAW,IAAD4F,EAC3B,MAAMC,EAAcjL,EAAMkF,QAAQC,MAAKc,GAAKA,EAAErF,KAAOwE,EAAOxE,KAEtDsG,EAAY9B,EAAOnB,QAAQwE,OAAMC,GAAaA,EAAU1I,KAQxDkL,EALkB9F,EAAOpB,SAASyE,OAAM0C,IAC3CA,EAAIzG,UAAYqG,EAAgBzK,SAAS6K,EAAIzG,aAITU,EAAOlB,UAAUuE,OAAMC,GAAaA,EAAU1I,KAG/EoL,EAAuB,QAAfJ,EAAG5F,EAAOZ,aAAK,IAAAwG,OAAA,EAAZA,EAAc3I,MAAKqG,GAAaA,EAAU1I,KAG3D,MAAO,CACLY,GAAIwE,EAAOxE,GACXsG,YACAgE,cACAE,WACApL,MAAOiL,EAAajL,MACrB,GAEL,CAwQoBqL,CAAmBrL,GAGrCkK,EAAQrE,SAxQV,SAA6B7F,GAC3B,OAAOwG,EAASwC,KAAIlD,IAAY,IAADF,EAE7B,MAAM0F,EAAetL,EAAM6F,SAASV,MAAKoG,GAAKA,EAAE3K,KAAOkF,EAAQlF,KACzDmF,EAAQuF,EAAeA,EAAavF,MAAQ,EAC5CW,EAAO4E,EAAeA,EAAa5E,KAAOZ,EAAQY,KAClDnB,EAAM+F,EAAeA,EAAa/F,IAAMO,EAAQP,IAChDrB,EAAYoH,EAAeA,EAAapH,UAAY4B,EAAQ5B,UAGlE,IAAIgD,EAQJ,OANEA,EAD6B,mBAApBpB,EAAQ7B,QACL6B,EAAQ7B,QAGR6B,EAAQ7B,QAAQjE,GAGvB,CACLY,GAAIkF,EAAQlF,GACZsG,WAAwD,QAA7CtB,EAAA5F,EAAM6F,SAASV,MAAKoG,GAAKA,EAAE3K,KAAOkF,EAAQlF,YAAG,IAAAgF,OAAA,EAA7CA,EAA+CsB,YAAaA,EACvEnB,QACAW,OACAnB,MACArB,YACD,GAEL,CA6OqBsH,CAAoBxL,GAGvCkK,EAAQuB,OA7OV,SAA2BzL,GACzB,OAAOA,EAAMyL,OAAOzC,KAAI0C,IACtB,MAAMC,EAAkB7E,EAAO4E,EAAW9K,IAC1C,IAAK+K,EAAiB,OAAOD,EAG7B,MAAME,EAAe,IAAKF,GAiB1B,OAdAE,EAAa1E,UAAYyE,EAAgBvE,gBAAgBpH,GAGpD0L,EAAWzE,cAEd2E,EAAajJ,SAAWgJ,EAAgBxE,cAAcnH,GAGlD2L,EAAgBtE,gBAAgBrH,KAClC4L,EAAa3E,aAAc,EAC3B2E,EAAaC,YAAcvD,KAAKC,QAI7BqD,CAAY,GAEvB,CAoNmBE,CAAkB9L,GAGnC,IAAI+L,EAAkBpD,EAAY3I,EAAO4H,GAkDzC,GA/CAmE,EAAkBA,EAAgB5L,QAAO6L,IACvC,MAAM5D,EAAepI,EAAMoI,aAAa4D,EAASpL,IACjD,IAAKwH,EAAc,OAAO,EAI1B,QAFiBE,KAAKC,MAAQH,EAAaI,eX1XV,OW8X3BhH,EAAYwK,EAASpL,IAAIiB,OAC3B7B,EAAM8I,OAAS9I,EAAM8I,OAAO3I,QAAO+H,GAAKA,IAAM8D,EAASpL,OAGlD,EAEE,IAGbsJ,EAAQ3G,aAAewI,EAGvB7B,EAAQ+B,eAxKV,SAAuBjM,EAAkB4H,GACvC,MAAMsE,EAAwB,IAAIlM,EAAMiM,gBAyCxC,OAtCAjM,EAAMoC,eAAeiE,SAAQ/D,IAC3B,MAAM6J,EAAcC,EAAS9J,EAAQ1B,IAGjCuL,EAAYrJ,UAAYR,EAAQK,SAAW,KAE7CwJ,EAAYrJ,SAASuD,SAAQgG,GAAiBA,EAAcrM,IAC9D,IAIFA,EAAM8C,SAASuD,SAAQiG,IACrB,MAAMC,EAAcC,EAASF,EAAQ1L,IAErC,GAAI2L,GA3BR,SAA2BD,EAAuBtM,GAGhD,OADsBA,EAAMiM,eAAe9G,MAAKsH,GAAKA,EAAE7L,KAAO0L,EAAQ1L,IAIxE,CAqBuB8L,CAAkBJ,EAAStM,IAExB,IAAhBS,KAAKE,SAAiB4L,EAAYrL,OAAQ,CAE5C,IAAIO,EAEFA,EAD2B,WAAzB8K,EAAY9K,SACHkG,EAAkBC,GAElB2E,EAAY9K,SAGzByK,EAAsB7K,KAAK,CACzBT,GAAI0L,EAAQ1L,GACZmC,UAAWuJ,EAAQvJ,UACnBrD,UAAW4I,KAAKC,MAChB9G,aAIFzB,EAAM8C,SAAW9C,EAAM8C,SAAS3C,QAAOsM,GAAKA,EAAE7L,KAAO0L,EAAQ1L,IAC/D,CACF,IAGKsL,CACT,CA6H2BS,CAAc3M,EAAO4H,IAG7CsC,EAAQL,WAAYK,EAAQ9G,UAAW8G,EAAQJ,cAAgBF,EAAU5J,GAG1EkK,EAAQ9H,eAAiBpC,EAAMoC,gBAG9B8H,EAAQ0C,aAAc1C,EAAQzC,WAlNVzH,KACrB,MAAM6M,EAAgB/M,EAAcK,QAAOwE,IAAY3E,EAAMK,mBAAmBC,SAASqE,KAAUlE,KAAKC,MAAMD,KAAKE,SAAWb,EAAcK,QAAOwE,IAAY3E,EAAMK,mBAAmBC,SAASqE,KAAUpE,SACrMuM,EAAgB/M,EAAcgN,YAAY/M,EAAO6M,GACvD,OAAKC,EAEAA,EAAc5L,QAAUlB,EAAMkD,cAAiBlD,EAAM+B,MAAQ,KAA0B,IAAhBtB,KAAKE,UAG7EX,EAAM4M,aAAapE,eAAiBF,KAAKC,MAAQvI,EAAM4M,aAAapE,eAA8B,OAAbsE,QAAa,IAAbA,OAAa,EAAbA,EAAexL,WAAYtB,EAAMkD,cAAgBlD,EAAM+B,OAHxC,CAAC/B,EAAM4M,aAAa5M,EAAMyH,WAK3H,CAAC,IACHzH,EAAM4M,aACTpE,cAAeF,KAAKC,MACpB5D,QAASkI,GACT,IAAI7M,EAAMyH,UAAW,CACrB7G,GAAIkM,EAAclM,GAClBJ,cAAeqM,EACf9L,YAAa+L,EAAc7L,QAC3BH,KAAMgM,EAAchM,KACpBE,KAAM8L,EAAc9L,QAhBK,CAAChB,EAAM4M,aAAa5M,EAAMyH,UAiBlD,EA8LyCuF,CAAchN,GAG1DkK,EAAQ9H,eAAeiE,SAAQ/D,IAC7B,MAAM6J,EAAcC,EAAS9J,EAAQ1B,IACrC,GAAuB,gBAAnB0B,EAAQf,OAA0B,CACpC,MAAM0L,EAAoBd,EAAYvJ,MAAQ5C,EAAMyE,aACpDnC,EAAQK,SAAWlC,KAAKqE,IAAI,IAAKxC,EAAQK,SAAWsK,GAEhD3K,EAAQK,UAAY,MAGtBL,EAAQf,OAAS,UAErB,KAIkB,IAAhBvB,EAAM6D,MAAc,CACc,IAAhC7D,EAAMkN,KAAKC,kBAEbnN,EAAMkN,KAAKC,gBAAkB7E,KAAKC,OAEpC,MAAM6E,EAAa9E,KAAKC,MAAQvI,EAAMkN,KAAKC,gBACrCE,EAAc,IAAKrN,EAAMkN,MAG/B,IAAII,EAAmB,EAGvB,IAAK,MAAMC,KAAQ9N,EACb2N,GAAcG,EAAK7N,WAAa0N,GAAcG,EAAK7N,UAAY6N,EAAK5N,WACtE2N,GAAoBC,EAAK3N,YAK7B,MAAM4N,EAAoB,EAAmC,GAA/B/M,KAAKgN,IAAIL,EAAa,KAG9CM,EX7a2B,IW6aUJ,EAAmBE,GAAqBvD,EAAY,KACzF0D,EX7akC,IW6aYL,EAAmBE,GAAqBvD,EAAY,KAGlG2D,EAAgBnE,OAAOgB,QAAQ4C,EAAYO,eACpBzN,QAAO0N,IAAA,IAAEC,EAAGC,GAAOF,EAAA,OAAKE,CAAM,IAC9B/E,KAAIgF,IAAA,IAAEvH,GAAOuH,EAAA,OAAKvH,CAAM,IAGrD,GAAImH,EAAcrN,OAAS,EAAE,CAE3B,MAAM0N,EAAkBN,EAAeC,EAAcrN,OAGrDqN,EAAcvH,SAAQI,IAEpB,GAAIA,IAAWnH,GAAWmH,IAAWlH,GAASkH,IAAWjH,EAAS,CAAC,IAAD0O,EAAAC,EAChE,MACMC,EAAeH,GADFpO,EAAkB4G,IAAW,GAI1C4H,GAAkC,QAAfH,EAAAhE,EAAQxI,eAAO,IAAAwM,GAAU,QAAVC,EAAfD,EAAkBzH,UAAO,IAAA0H,OAAV,EAAfA,EAA2BxM,YAAa3B,EAAM0B,QAAQ+E,GAAQ9E,UAEnF0M,GAAoBD,GAEjBlE,EAAQxI,UAASwI,EAAQxI,QAAU,IAAK1B,EAAM0B,UACnDwI,EAAQxI,QAAQ+E,GAAU,IACrByD,EAAQxI,QAAQ+E,GACnB9E,UAAW0M,EAAmBD,KAK3BlE,EAAQxI,UAASwI,EAAQxI,QAAU,IAAK1B,EAAM0B,UACnDwI,EAAQxI,QAAQ+E,GAAU,IACrByD,EAAQxI,QAAQ+E,GACnB9E,UAAW,GAIb0L,EAAYO,cAAcnH,IAAU,EAExC,CAAC,GAEL,MAEEyD,EAAQvI,WAAa+L,EAMnBxD,EAAQvI,WAAa,IAEvBuI,EAAQoE,UAAW,EACnBpE,EAAQqE,eAAiB,mRAG3BrE,EAAQgD,KAAOG,CACjB,CAEA,OAAOnD,CAAO,EAKhBsE,KAAKC,UAAavG,IAChB,GACO,SADCA,EAAEwG,KAAK7N,KACb,CACE,MAAM8N,EAAS3E,EAAc9B,EAAEwG,KAAK1O,MAAOkI,EAAEwG,KAAKzE,UAAW/B,EAAEwG,KAAK9G,YACpEgH,YAAYD,EACP,CAKT,C","sources":["app/constants.ts","constants.ts","Events.ts","Projects.ts","Problems.ts","News.ts","Talents.ts","talents/science.ts","talents/faith.ts","Upgrades.ts","Quests.ts","app/gameLoop.ts"],"sourcesContent":["export const MANUAL = 'manual' as const;\nexport const COMMON = 'common' as const;\nexport const SCIENCE = 'science' as const;\nexport const FAITH = 'faith' as const;\nexport const ECONOMY = 'economy' as const;\n\nexport const EVENT_AUTO_CLOSE_TIME = 30000; // Время автоматического закрытия события в мс\n\n// Константы для новостей\nexport const NEWS_DISPLAY_TIME = 10000; // 10 секунд\nexport const NEWS_INTERVAL =  30000; // 30 секунд\n\n// Константы для первой стадии\nexport const TOTAL_RESOURCES_FOR_FIRST_STAGE = 1000000; // 1m resources\nexport const SCIENCE_RESOURCES_FOR_FIRST_STAGE = 50000; // 50k science\nexport const FAITH_RESOURCES_FOR_FIRST_STAGE = 50000; // 50k faith\nexport const ECONOMY_RESOURCES_FOR_FIRST_STAGE = 200000; // 200k economy\n\n// Константы для космического корабля\n\nexport const SHIP_BASE_DAMAGE_RATE = 100; // Базовая скорость повреждения (ед. ресурсов в секунду)\nexport const SHIP_BASE_SHIELD_DAMAGE_RATE = 200; // Базовая скорость повреждения щитов (ед. ресурсов в секунду)\n\n// Параметры для генерации волн повреждений\nexport const SHIP_DAMAGE_WAVES = [\n  { startTime: 180000, duration: 90000, multiplier: 5 },   // 3-4.5 минуты, урон х5\n  { startTime: 450000, duration: 120000, multiplier: 8 },  // 7.5-9.5 минут, урон х8\n  { startTime: 720000, duration: 150000, multiplier: 6 },  // 12-14.5 минут, урон х6\n  { startTime: 1080000, duration: 180000, multiplier: 10 }, // 18-21 минут, урон х10\n  { startTime: 1500000, duration: 120000, multiplier: 15 }  // 25-27 минут, урон х15\n];\n\n// Формула расчета повреждения:\n// damage = SHIP_BASE_DAMAGE_RATE * \n//          (1 + currentWaveMultiplier) * \n//          (1 + Math.sin(flightTime / 10000) * 0.3) *\n//          deltaTime / 1000\n\n// Константы для щитов\n// Возможно в будущем буду использовать\nexport const SHIELD_EFFICIENCY = {\n  [SCIENCE]: 1, \n  [FAITH]: 1,  \n  [ECONOMY]: 1  \n};\n\n\n\n","// Цвета для золотых частиц\r\nexport const GOLD_COLORS = [\r\n  '#FFD700', // Золотой\r\n  '#FFC125', // Насыщенный золотой\r\n  '#FFCC33', // Яркий золотой\r\n  '#E6BE8A', // Песочный золотой\r\n  '#DAA520'  // Тёмный золотой\r\n];\r\n\r\nexport const COLORS = {\r\n  \"White smoke\":\"#efefed\",\r\n  \"Alabaster\":\"#ebe3d8\",\r\n  \"Light yellow\":\"#ffffe3\",\r\n  \"Melon\":\"#FFB096\",\r\n  \"Tomato\":\"#ff6048\",\r\n  \"Cinnabar\":\"#db5f43\",\r\n  \"Cornell red\":\"#af1510\",\r\n  \"Eerie black\":\"#1d1b1c\",\r\n  \"Gunmetal\":\"#2e3439\"\r\n}\r\n\r\n// Country names from the geoJSON data\r\nexport const COUNTRY_NAMES = [\r\n  'Afghanistan',\r\n  'Angola',\r\n  'Albania',\r\n  'United Arab Emirates',\r\n  'Argentina',\r\n  'Armenia',\r\n  'Antarctica',\r\n  'Australia',\r\n  'Austria',\r\n  'Azerbaijan',\r\n  'Burundi',\r\n  'Belgium',\r\n  'Benin',\r\n  'Burkina Faso',\r\n  'Bangladesh',\r\n  'Bulgaria',\r\n  'Bahamas',\r\n  'Bosnia and Herzegovina',\r\n  'Belarus',\r\n  'Belize',\r\n  'Bolivia',\r\n  'Brazil',\r\n  'Brunei',\r\n  'Bhutan',\r\n  'Botswana',\r\n  'Central African Republic',\r\n  'Canada',\r\n  'Switzerland',\r\n  'Chile',\r\n  'China',\r\n  'Ivory Coast',\r\n  'Cameroon',\r\n  'Democratic Republic of the Congo',\r\n  'Republic of the Congo',\r\n  'Colombia',\r\n  'Costa Rica',\r\n  'Cuba',\r\n  'Cyprus',\r\n  'Czech Republic',\r\n  'Germany',\r\n  'Djibouti',\r\n  'Denmark',\r\n  'Dominican Republic',\r\n  'Algeria',\r\n  'Ecuador',\r\n  'Egypt',\r\n  'Eritrea',\r\n  'Spain',\r\n  'Estonia',\r\n  'Ethiopia',\r\n  'Finland',\r\n  'Fiji',\r\n  'Falkland Islands',\r\n  'France',\r\n  'Gabon',\r\n  'United Kingdom',\r\n  'Georgia',\r\n  'Ghana',\r\n  'Guinea',\r\n  'Gambia',\r\n  'Guinea-Bissau',\r\n  'Equatorial Guinea',\r\n  'Greece',\r\n  'Greenland',\r\n  'Guatemala',\r\n  'Guyana',\r\n  'Honduras',\r\n  'Croatia',\r\n  'Haiti',\r\n  'Hungary',\r\n  'Indonesia',\r\n  'India',\r\n  'Ireland',\r\n  'Iran',\r\n  'Iraq',\r\n  'Iceland',\r\n  'Israel',\r\n  'Italy',\r\n  'Jamaica',\r\n  'Jordan',\r\n  'Japan',\r\n  'Kazakhstan',\r\n  'Kenya',\r\n  'Kyrgyzstan',\r\n  'Cambodia',\r\n  'South Korea',\r\n  'Kosovo',\r\n  'Kuwait',\r\n  'Laos',\r\n  'Lebanon',\r\n  'Liberia',\r\n  'Libya',\r\n  'Sri Lanka',\r\n  'Lesotho',\r\n  'Lithuania',\r\n  'Luxembourg',\r\n  'Latvia',\r\n  'Morocco',\r\n  'Moldova',\r\n  'Madagascar',\r\n  'Mexico',\r\n  'Macedonia',\r\n  'Mali',\r\n  'Myanmar',\r\n  'Montenegro',\r\n  'Mongolia',\r\n  'Mozambique',\r\n  'Mauritania',\r\n  'Malawi',\r\n  'Malaysia',\r\n  'Namibia',\r\n  'New Caledonia',\r\n  'Niger',\r\n  'Nigeria',\r\n  'Nicaragua',\r\n  'Netherlands',\r\n  'Norway',\r\n  'Nepal',\r\n  'New Zealand',\r\n  'Oman',\r\n  'Pakistan',\r\n  'Panama',\r\n  'Peru',\r\n  'Philippines',\r\n  'Papua New Guinea',\r\n  'Poland',\r\n  'Puerto Rico',\r\n  'North Korea',\r\n  'Portugal',\r\n  'Paraguay',\r\n  'Qatar',\r\n  'Romania',\r\n  'Russia',\r\n  'Rwanda',\r\n  'Western Sahara',\r\n  'Saudi Arabia',\r\n  'Sudan',\r\n  'South Sudan',\r\n  'Senegal',\r\n  'Solomon Islands',\r\n  'Sierra Leone',\r\n  'El Salvador',\r\n  'Somalia',\r\n  'Serbia',\r\n  'Suriname',\r\n  'Slovakia',\r\n  'Slovenia',\r\n  'Sweden',\r\n  'Swaziland',\r\n  'Syria',\r\n  'Chad',\r\n  'Togo',\r\n  'Thailand',\r\n  'Tajikistan',\r\n  'Turkmenistan',\r\n  'East Timor',\r\n  'Trinidad and Tobago',\r\n  'Tunisia',\r\n  'Turkey',\r\n  'Taiwan',\r\n  'Tanzania',\r\n  'Uganda',\r\n  'Ukraine',\r\n  'Uruguay',\r\n  'United States',\r\n  'Uzbekistan',\r\n  'Venezuela',\r\n  'Vietnam',\r\n  'Vanuatu',\r\n  'Yemen',\r\n  'South Africa',\r\n  'Zambia',\r\n  'Zimbabwe'\r\n];\r\n","import { EventGenerator, GameEvent, GameState } from \"./types\";\nimport { SCIENCE, FAITH, ECONOMY, COMMON, MANUAL } from \"./app/constants\";\nimport { COUNTRY_NAMES } from \"./constants\";\n\n\n// Функция для генерации события захвата страны\nfunction createBuyCountryEvent(state: GameState,target?: string): GameEvent | null {\n  // Получаем список незахваченных стран\n  const availableCountries = COUNTRY_NAMES.filter(\n    countryId => !state.conqueredCountries.includes(countryId)\n  );\n  \n  // Если нет доступных стран, не создаем событие\n  if (availableCountries.length === 0) {\n    return null;\n  }\n  \n  // Выбираем случайную страну для захвата\n  const targetCountry = target || availableCountries[Math.floor(Math.random() * availableCountries.length)];\n  \n  // Создаем событие для конкретной страны\n  return {\n    id: \"BUY_COUNTRY\",\n    type: \"countryAction\",\n    name: `${targetCountry} хочет присоедениться`,\n    description: \"Возможность захватить новую страну\",\n    icon: \"🌍\",\n    message: \"Новая страна готова к захвату!\",\n    weight: 1,\n    conditions: [\n      (state) => state.conqueredCountries.length < COUNTRY_NAMES.length\n    ],\n    effects: [\n      (state) => {\n        state.conqueredCountries.push(targetCountry);\n      }\n    ],\n    cooldown: 30000,\n    status: 'in_progress',\n    targetCountry: targetCountry\n  };\n}\nexport const DynamicEvents: Record<string, EventGenerator> = {\n  \"BUY_COUNTRY\": createBuyCountryEvent,\n};\n\n// Cтатическ события игры\nexport const GAME_EVENTS: Record<string, GameEvent> = {\n  \"SCIENTIFIC_BREAKTHROUGH\": {\n    id: \"SCIENTIFIC_BREAKTHROUGH\",\n    type: \"random\",\n    name: \"Ученые совершили прорыв в квантовой физике!\",\n    description: \"Ученые совершили прорыв в квантовой физике!\",\n    icon: \"🧠\",\n    position: \"random\",\n    message: \"Ученые совершили прорыв в квантовой физике!\",\n    effects: [\n      (state) => {\n        state.spheres[SCIENCE].resources += 500;\n        state.spheres[ECONOMY].resources += 200;\n      }\n    ],\n    values: ['500🧬', '200💸'],\n    weight: 0.1,\n    conditions: [\n      (state) => state.spheres[SCIENCE].resources > 1000,\n    ],\n    cooldown: 3600000,\n    once: false\n  },\n  \"RELIGIOUS_REVELATION\": {\n    id: \"RELIGIOUS_REVELATION\",\n    type: \"random\",\n    name: \"Явилось божественное знамение!\",\n    description: \"Явилось божественное знамение!\",\n    icon: \"🔱\",\n    position: \"random\",\n    message: \"Явилось божественное знамение!\",\n    effects: [\n      (state) => {\n        state.multipliers[FAITH] *= 1.5;\n        state.spheres[SCIENCE].resources -= 100;\n      }\n    ],\n    values: ['x1.5⛪️', '-100🧬'],\n    weight: 0.1,\n    conditions: [\n      (state) => state.spheres[FAITH].resources > 500,\n      (state) => state.spheres[SCIENCE].resources < 300\n    ],\n    cooldown: 3600000,\n    once: true\n  },\n  \"RESORCES_DISCOVERY\": { \n    id: \"RESORCES_DISCOVERY\",\n    type: \"random\",\n    name: \"Были открыты новые ресурсы!\",\n    description: \"Были открыты новые ресурсы!\",\n    icon: \"💰\",\n    position: \"random\",\n    message: \"Были открыты новые ресурсы!\",\n    effects: [\n      (state) => {\n        state.total *=  1.01;\n      }\n    ],\n    values: (state) => `+${(Math.max(state.total * 0.02, 10)).toFixed(2)}₿`,\n    weight: 2,\n    conditions: [\n      (state) => state.total > 10,\n    ],\n    cooldown: 1000 * 10,\n    once: false\n  },\n  \"RESEARCH_ARTIFACT\": {\n    id: \"RESEARCH_ARTIFACT\",\n    type: \"random\",\n    name: \"Монахи нашли древний священный артефакт!\",\n    description: \"Монахи нашли древний священный артефакт!\",\n    icon: \"🙏🏻\",\n    position: \"random\",\n    message: \"Монахи нашли древний священный артефакт!\",\n    effects: [\n      (state) => {\n        state.spheres[FAITH].resources += 1000;\n        const artefacts = ['artifact1', 'artifact2', 'artifact3', 'Holy Grail'];\n        const randomArtefact = artefacts[Math.floor(Math.random() * artefacts.length)];\n        // TODO: news about artefact with image\n        if (randomArtefact === 'Holy Grail') {\n          state.spheres[FAITH].resources += 10000;\n          state.secondStage.push({\n            id: \"HOLY_GRAIL\"})\n        }\n      },\n    ],\n    values: ['+1000⛪️'],\n    weight: 0.05,\n    conditions: [\n      (state) => state.activeProjects.some(project => project.id === 'research-artifact'),\n    ],\n    cooldown: 1000 * 10,\n    once: false\n  },\n  \"RESOURCE_BOOST\": {\n    id: \"RESOURCE_BOOST\",\n    type: \"random\",\n    name: \"Увеличение ресурсов\",\n    description: \"Временное увеличение производства ресурсов\",\n    icon: \"📈\",\n    position: \"random\",\n    message: \"Производство ресурсов временно увеличено!\",\n    effects: [\n      (state) => {\n        state.multipliers[ECONOMY] *= 1.5;\n        state.multipliers[FAITH] *= 1.5;\n        state.multipliers[SCIENCE] *= 1.5;\n        setTimeout(() => {\n          state.multipliers[ECONOMY] /= 1.5;\n          state.multipliers[FAITH] /= 1.5;\n          state.multipliers[SCIENCE] /= 1.5;\n        }, 30000);\n      }\n    ],\n    values: ['x1.5💸', 'x1.5⛪️', 'x1.5🧬'],\n    weight: 0.02,\n    conditions: [\n      (state) => state.resources > 1000\n    ],\n    cooldown: 60000,\n    once: false\n  },\n  \"OPEN_PLANET\": {\n    id: \"OPEN_PLANET\",\n    type: \"random\",\n    name: \"Открытие новой планеты\",\n    description: \"Открытие новой планеты\",\n    icon: \"🌍\",\n    position: \"random\", \n    message: \"Открытие новой планеты\",\n    effects: [\n      (state) => {\n        //research new planet\n      }\n    ],\n    weight: 0.01,\n    conditions: [\n      (state) => state.cosmicCivilization.conquest === true\n    ],\n    cooldown: 1000 * 10,\n    once: false\n  },\n  \"GOLD_BAR\": { \n    id: \"GOLD_BAR\",\n    type: \"random\",\n    name: \"Золотой слиток\",\n    description: \"Золотой слиток\",\n    icon: \"💰\",\n    position: \"random\",\n    message: \"Золотая баржа\",\n    effects: [\n      (state) => {\n        state.resources += 10000;\n      }\n    ],\n    values: ['+10000₿'],\n    weight: 0.01,\n    conditions: [\n      (state) => state.resources > 10000\n    ],\n    cooldown: 1000 * 10,\n    once: false\n  }\n};","import { ECONOMY, FAITH, SCIENCE } from \"./app/constants\";\nimport { Project } from \"./types\";\n\n\n\nexport const Projects: Record<string, Project> = {\n    'research-lab': {\n        id: 'research-lab',\n        name: 'Research Lab',\n        description: 'A facility dedicated to scientific research and development.',\n        icon: '🔬',\n        progress: 0,\n        speed: 1,\n        effects: [\n            (state) => state.multipliers[SCIENCE] += 0.2 \n        ],\n        failEffects: [\n            (state) => state.resources -= 100 \n        ],\n        problems: [\n            (state) => {\n                if (state.spheres[FAITH].resources > 1000) {\n                    state.problems.push({\n                        id: 'religios-fanatics',\n                        projectId: 'research-lab'\n                    });\n                }\n            }\n        ]\n    },\n    'advanced-research-lab': {\n        id: 'advanced-research-lab',\n        name: 'Advanced Research Lab',\n        description: 'An upgraded research facility with cutting-edge equipment.',\n        icon: '🧪',\n        progress: 0,\n        speed: 1,\n        effects: [\n            (state) => state.multipliers[SCIENCE] += 0.30,\n            \n        ],\n        failEffects: [\n            (state) => state.resources -= 200 \n        ],\n        problems: [\n            (state) => {\n                if (state.spheres[FAITH].resources > 10000) {\n                    state.problems.push({\n                        id: 'religios-fanatics',\n                        projectId: 'advanced-research-lab'\n                    });\n                }\n            }\n        ]\n    },\n    'global-security-system': {\n        id: 'global-security-system',\n        name: 'Глобальная система безопасности',\n        description: 'Система, обеспечивающая безопасность всего человечества. Провал приведет к катастрофе!',\n        icon: '🛡️',\n        progress: 0,\n        speed: 0.5, // Медленный прогресс\n        effects: [\n            (state) => state.multipliers[SCIENCE] += 0.50,\n            (state) => state.multipliers[ECONOMY] += 0.30,\n            (state) => state.multipliers[FAITH] += 0.30\n        ],\n        failEffects: [\n            (state) => state.resources -= 1000\n        ],\n        problems: [\n            (state) => {\n                if (state.spheres[ECONOMY].resources > 10000) {\n                    state.problems.push({\n                        id: 'libs',\n                        projectId: 'global-security-system'\n                    });\n                }\n            }\n        ]\n        \n    },\n    'new-material': {\n        id: 'new-material',\n        name: 'New Material',\n        description: 'Начать разработку новых материалов',\n        icon: '🧬',\n        progress:0,\n        speed: 0.01,\n        effects: [\n            (state) => {\n                const materials = ['nanotubes', 'quantum-threads', 'dark-matter', 'negative-mass-matter'];\n                const randomMaterial = materials[Math.floor(Math.random() * materials.length)];\n                state.secondStage.push(randomMaterial);\n            },  \n        ],\n        failEffects: [\n            (state) => state.resources -= 3000\n        ]\n    },\n    'antiair-gun': {\n        id: 'antiair-gun',\n        name: 'Antiair Gun',\n        description: 'Создать пушку, что сможет отклонить снаряд от земли',\n        icon: '💂‍♀️🧬',\n        progress: 0,\n        speed: 0.004,\n        effects: [\n            (state) => state.multipliers[ECONOMY] += 0.20,\n            (state) => state.secondStage.push('antiair-gun')\n        ],\n        failEffects: [\n            (state) => state.resources -= 4000\n        ],\n        problems: [\n            (state) => {\n                if (state.conqueredCountries.length < 25) {\n                    state.problems.push({\n                        id: 'antigun',\n                        projectId: 'antiair-gun'    \n                    });\n                }\n            }\n        ]\n    },\n    'dyson-swarm': {\n        id: 'dyson-swarm',\n        name: 'Dyson Swarm',\n        description: 'Создать рой из спутников, вокруг Солнца.',\n        icon: '🛰',\n        progress: 0,\n        speed: 0.5,\n        effects: [\n            (state) => state.multipliers[SCIENCE] += 0.20,\n            (state) => state.secondStage.push('dyson-swarm')\n        ],\n        failEffects: [\n            (state) => state.resources -= 1000\n        ]\n    },\n    'dyson-circle': {\n        id: 'dyson-circle',\n        name: 'Dyson Circle',\n        description: 'Создать кольцо из спутников, вокруг Солнца.',\n        icon: '🛰',\n        progress: 0,\n        speed: 0.04,\n        effects: [\n            (state) => state.multipliers[SCIENCE] += 0.50,\n            (state) => state.secondStage.push('dyson-circle')\n        ],\n        failEffects: [\n            (state) => state.resources -= 5000,\n            (state) => state.conquestSpeed -= 0.50\n        ],\n        problems: [\n            (state) => {\n                if (state.seed > 0.9) {\n                    state.problems.push({\n                        id: 'gravitation',\n                        projectId: 'dyson-circle'\n                    });\n                }\n            }\n        ]\n    },\n    'dyson-sphere': {\n        id: 'dyson-sphere',\n        name: 'Dyson Sphere',\n        description: 'Создать сферу из спутников, вокруг Солнца.',\n        icon: '🛰',\n        progress: 0,\n        speed: 0.001,\n        effects: [\n            (state) => state.multipliers[SCIENCE] += 2,\n            (state) => state.secondStage.push('dyson-sphere')\n        ],\n        failEffects: [\n            (state) => state.resources -= 10000,\n            (state) => state.conquestSpeed -= 0.50\n        ],\n        problems: [\n            (state) => {\n                if (state.seed > 0.9) {\n                    state.problems.push({\n                        id: 'gravitation',\n                        projectId: 'dyson-sphere'\n                    });\n                }\n            }\n        ]\n    },\n    'research-artifact': {\n        id: 'research-artifact',\n        name: 'Research Artifact',\n        description: 'Создать группу монахов, что будут искать древние священные артефакты',\n        icon: '🧬',\n        progress: 0,\n        speed: 0.00006,\n        effects: [\n            // will turn RESEARCH_ARTIFACT on\n        ],\n        failEffects: [\n            (state) => state.resources -= 1500\n        ],\n        problems: [\n            (state) => {\n                if (state.spheres[ECONOMY].resources > 10000) {\n                    state.problems.push({\n                        id: 'capitalists',\n                        projectId: 'research-artifact'\n                    });\n                }\n            }\n        ]\n    },\n    'extraterrestrial-search': {\n        id: 'extraterrestrial-search',\n        name: 'Extraterrestrial Search',\n        description: 'Создать массив спутников и радаров, что будут искать контакт с внеземными цивилизациями',\n        icon: '🌌',\n        progress: 0,\n        speed: 0.000001,\n        effects: [\n            (state) => {\n                if (Math.random() < 0.5) {\n                    state.secondStage.push('contact')\n                    state.newsQueue.push('special-contact');\n                }\n            }\n        ],\n        failEffects: [\n            (state) => state.resources -= 2000\n        ],\n        problems: [\n            (state) => {\n                if (state.spheres[ECONOMY].resources > 10000) {\n                    state.problems.push({\n                        id: 'capitalists',\n                        projectId: 'extraterrestrial-search'\n                    });\n                }\n                state.problems.push({\n                    id: 'rationalists',\n                    projectId: 'extraterrestrial-search'\n                });\n            }\n        ]\n    },\n    'strange-dust': {\n        id: 'strange-dust',\n        name: 'Strange Dust',\n        description: 'Проводится эксперимент по созданию странного вещества, которое может стать ответом на наши вопросы',\n        icon: '🧬',\n        progress: 0,\n        speed: 0.2,\n        effects: [\n            (state) => state.secondStage.push('spice')\n        ],\n        failEffects: [\n            (state) => state.resources -= 1500\n        ],\n        problems: [\n            (state) => {\n                \n                state.problems.push({\n                    id: 'spice-explosion',\n                    projectId: 'strange-dust'\n                });\n                state.problems.push({\n                    id: 'spice-empty',\n                    projectId: 'strange-dust'\n                });\n            }\n        ]\n    },\n    'nanoshield': {\n        id: 'nanoshield',\n        name: 'Nanoshield',\n        description: 'Создать щит, защищающий корабль от опасностей при быстром перемещении',\n        icon: '🌌',\n        progress: 0,\n        speed: 0.5,\n        effects: [\n            (state) => state.cosmicCivilization.shipShield = true\n        ],\n        failEffects: [\n\n        ],\n        problems: [\n\n        ]\n    },\n    'spice-shield': {\n        id: 'spice-shield',\n        name: 'Spice Shield',\n        description: 'Создать щит, защищающий корабль от опасностей при быстром перемещении',\n        icon: '🌌',\n        progress: 0,\n        speed: 0.5,\n        effects: [\n            (state) => state.cosmicCivilization.shipShield = true\n        ],\n        failEffects: [\n            (state) => state.resources -= 1500\n        ],\n        problems: [\n            \n        ]\n    },\n    'quantum-beacon': {\n        id: 'quantum-beacon',\n        name: 'Quantum Beacon',\n        description: 'Создание квантовых маяков, что позволит нам перемещаться между планетами',\n        icon: '🌌',\n        progress: 0,\n        speed: 0.1,\n        effects: [\n            (state) => state.cosmicCivilization.conquest = true\n        ],\n        failEffects: [\n\n        ],\n        problems: [\n            \n        ]\n    },\n    'space-folding-engine': {\n        id: 'space-folding-engine',\n        name: 'Space Folding Engine',\n        description: 'Создание двигателя, что позволит нам перемещаться между планетами',\n        icon: '🌌',\n        progress: 0,\n        speed: 0.1,\n        effects: [\n            (state) => state.cosmicCivilization.FTL = true\n        ],\n        failEffects: [\n            (state) => state.resources -= 1500\n        ],\n        problems: [\n            \n        ]\n    },\n    'white-hole': {\n        id: 'white-hole',\n        name: 'White Hole',\n        description: 'Создание чревоточины, что позволит нам перемещаться между планетами',\n        icon: '🌌',\n        progress: 0,\n        speed: 0.11,\n        effects: [\n            (state) => state.cosmicCivilization.FTL = true\n        ],\n        failEffects: [\n            (state) => state.resources -= 1500\n        ],\n        problems: [\n            (state) => {\n                state.problems.push({\n                    id: 'collapse',\n                    projectId: 'white-hole'\n                });\n            }\n        ]\n    },\n    'big-fold': {\n        id: 'big-fold',\n        name: 'Big Fold',\n        description: 'Сворачивание пространства от нас прямо к врагу!',\n        icon: '🌌', \n        progress: 0,\n        speed: 0.11,\n        effects: [\n            (state) => state.cosmicCivilization.FTL = true\n        ],\n        failEffects: [\n            (state) => state.resources -= 1500\n        ],\n        problems: [\n            (state) => {\n                state.problems.push({\n                    id: 'big-collapse',\n                    projectId: 'big-fold'\n                });\n            }\n        ]\n    },\n    'obsidian-portal': {\n        id: 'obsidian-portal',\n        name: 'Obsidian Portal',\n        description: 'Создание портала, что позволит нам перемещаться между планетами',\n        icon: '🌌',\n        progress: 0,\n        speed: 0.11,\n        effects: [\n            (state) => state.cosmicCivilization.FTL = true,\n            (state) => state.cosmicCivilization.conquest = true,\n            (state) => state.activeEvents.push({\n                id: 'gold-bar',\n                position: [0,0]\n            })\n        ],\n        failEffects: [\n            (state) => state.resources -= 1500\n        ],\n        problems: [\n            (state) => {\n                state.problems.push({\n                    id: 'cripper',\n                    projectId: 'obsidian-portal'\n                });\n            }\n        ]\n    }\n};\n","import { GameState, Problem } from \"./types\";\n\nexport const Problems: Record<string, Problem> = {\n    'religios-fanatics': {\n        id: 'religios-fanatics',\n        name: 'Религиозные фанатики',\n        description: 'Религиозные фанатики недовольны вашим научным прогрессом',\n        icon: '🔮',\n        position: 'random',\n        weight: 10,\n        amount: 50,\n        time: 1000 * 25\n    },\n    'libs': {\n        id: 'libs',\n        name: 'Либералы',\n        description: 'Люди уверены что все ваши усилия направлены на контроль, а не на безопасность',\n        icon: '🛂',\n        position: 'random',\n        weight: 10,\n        amount: 50, \n        time: 1000 * 25\n    },\n    'antigun': {\n        id: 'antigun',\n        name: 'Противники оружия',\n        description: 'Лобби против оружия, не хотят видеть огромную пушку, которую видно везде',\n        icon: '🔫',\n        position: 'random',\n        weight: 3,\n        amount: 50,\n        time: 1000 * 25\n    },\n    'gravitation': {\n        id: 'gravitation',\n        name: 'Гравитация',\n        description: 'Сфера начала рушится под своим весом',\n        icon: '💥',\n        position: 'random',\n        weight: 10,\n        amount: 200,\n        time: 1000 * 250\n    },\n    'capitalists': {\n        id: 'capitalists',\n        name: 'Капиталисты',\n        description: 'Людей не устраивает проект, деньги можно потратить выгоднее',\n        icon: '💰',\n        position: 'random',\n        weight: 10,\n        amount: 200,\n        time: 1000 * 250\n    },\n    'rationalists': {\n        id: 'rationalists',\n        name: 'Рационалисты',\n        description: 'Что за чушь? Это невозможно!',\n        icon: '🤡',\n        position: 'random',\n        weight: 10,\n        amount: 200,\n        time: 1000 * 250\n    },\n    'spice-explosion': {\n        id: 'spice-explosion',\n        name: 'Взрыв странного вещества',\n        description: 'Странное вещество взорвалось',\n        icon: '💥',\n        position: 'random',\n        weight: 10,\n        amount: 50,\n        time: 1000 * 60\n    },\n    'spice-empty': {\n        id: 'spice-empty',\n        name: 'Пустота',\n        description: 'Странное вещество это пустышка!',\n        icon: '💥',\n        position: 'random',\n        weight: 10,\n        amount: 20,\n        time: 1000 * 60\n    },\n    'cripper': {\n        id: 'cripper',\n        name: 'Криппер',\n        description: 'Что он тут делает?',\n        icon: '💥', \n        position: 'random',\n        weight: 10,\n        amount: 200,\n        time: 1000 * 400\n    },\n    'collapse': {\n        id: 'collapse',\n        name: 'Схлопывание',\n        description: 'Ваш проект схлопывается под своим весом!',\n        icon: '💥',\n        position: 'random',\n        weight: 10,\n        amount: 200,\n        time: 1000 * 400\n    },\n    'big-collapse': {\n        id: 'big-collapse',\n        name: 'Схлопывание',\n        description: 'Ваш проект схлопывается под своим весом!',\n        icon: '💥',\n        position: 'random',\n        weight: 80,\n        amount: 20,\n        time: 1000 * 20\n    }\n};\n","import { NewsItem } from \"./types\";\nimport { NEWS_DISPLAY_TIME, NEWS_INTERVAL } from \"./app/constants\";\n\nexport { NEWS_DISPLAY_TIME, NEWS_INTERVAL };\n\nexport const News: Record<string, NewsItem> = {\n  \n  'news1': {\n    id: 'news1',\n    text: 'Глобальный саммит по выбору общего гимна. После 72 часов дебатов лидеры согласились, что гимном Земли станет кавер Metallica на песню \"We Are the World\" в исполнении роботов-певцов. Китай настаивал на традиционной опере, но Билл Гейтс предложил NFT-гимн, который меняется каждый час.',\n    stage: 1\n  },\n  'news2': {\n    id: 'news2',\n    text: 'Дизайн флага объединенной Земли вызвал скандал: делегаты не могут решить, что важнее — пиксельное изображение кота (предложение Швеции) или голограмма Илона Маска на фоне радуги (идея Марса-колонии). Пока используют временный флаг — фото бутерброда с авокадо',\n    stage: 1\n  },\n  'news3': {\n    id: 'news3',\n    text: 'Саммит G20 приостановлен из-за нехватки эспрессо-машин. Италия отказалась делиться рецептом, пока ее не включили в список \"самых стильных флотов\". Космонавты МКС предложили вакуумные кофеварки, но их идею назвали \"слишком логичной\".',\n    stage: 1\n  },\n  'news4': {\n    id: 'news4',\n    text: 'США и Россия провели совместные учения \"Привет, пришельцы!\": войска изображали инопланетян, атакуя друг друга надувными мечами. Китай раскритиковал \"детский подход\" и показал роботов-панд с лазерами. Швейцария предложила своих наемников инопланетянам.',\n    stage: 1\n  },\n  'news5': {\n    id: 'news5',\n    text: 'Спутниковый интернет Земли взломан хакерами-котами. Злоумышленники требуют 10 млн тонн корма и пожизненный доступ к YouTube с роликами про птиц. Глава IT-комитета заявил: \"Это месть за то, что мы до сих пор не изобрели вечный лазер-дразнилку\".',\n    stage: 1\n  },\n  'news6': {\n    id: 'news6',\n    text: 'Создан \"Комитет по борьбе с комитетами\": 500 страниц устава, 200 подкомиссий и 1 робот-секретарь, который постоянно повторяет: \"Ваш запрос рассматривается\". Первое решение — утвердить форму заявки на спасение мира в 3 экземплярах.',\n    stage: 1\n  },\n  'news7': {\n    id: 'news7',\n    text: 'Фестиваль \"Единая кухня Земли\" закрыт после инцидента с суши-пиццей. Франция объявила гастрономический террор, Индия потребовала карри-версию шаурмы, а Британия... Британия просто жарила бобы. Шеф-повар МКС: \"В космосе все едят из тюбиков — вот и решение!\"',\n    stage: 1\n  },\n  'news8': {\n    id: 'news8',\n    text: 'Ученые пытаются подключить дельфинов к обороне Земли: \"Они умнее политиков и уже давно контролируют 70% океана\". Проблема: дельфины требуют, чтобы все переговоры велись под водой, а в качестве оплаты — запрет на пластиковые пакеты.',\n    stage: 1\n  },\n  'news9': {  \n    id: 'news9',\n    text: 'Под хештегом #SaveEarthChallenge пользователи снимают ролики, как \"защищают\" планету: от танцев с пылесосами до битв подушками в костюмах пришельцев. Пентагон: \"Если это не сработает, мы хотя бы станем вирусными\".',\n    stage: 1\n  },\n  'news10': {\n    id: 'news10',\n    text: 'Плоскоземельники обвиняют NASA: \"Пришельцы — это проект Илона Маска по продаже космических биткоинов!\"',\n    stage: 1\n  },\n  'news11': {\n    id: 'news11',\n    text: 'Секта \"Луна — это сыр\" требует немедленно накормить инопланетян фондю. \"Они прилетели за рецептом!\"',\n    stage: 1\n  },\n  'news12': {\n    id: 'news12',\n    text: 'Анонимный источник: Грета Тунберг — инопланетный шпион. Доказательство: её глаза всегда светятся в темноте.',\n    stage: 1\n  },\n  'news13': {\n    id: 'news13',\n    text: 'Инсайдеры: Пришельцы внедрили алгоритм TikTok, чтобы люди забыли строить защиту. Доказательство: все танцуют под \"Alien Pop\"!',\n    stage: 1\n  },\n  'news14': {\n    id: 'news14',\n    text: 'Секретный доклад: Джефф Безос строит космический лифт не для людей — это \"троянский конь\" для марсианских корпораций!',\n    stage: 1\n  },\n  'news15': {\n    id: 'news15',\n    text: 'Учёные в панике: кошки — инопланетные дроны! Их мурлыканье — зашифрованные послания Центаврианскому Совету.',\n    stage: 1\n  },\n  'news16': {\n    id: 'news16',\n    text: 'Анонимный блогер: 5G вышки — это антенны для приёма рецепта идеального кофе от Плутона. NASA скрывает!',\n    stage: 1\n  },\n  'news17': {\n    id: 'news17',\n    text: 'Тайные записи: Биткоин создан пришельцами, чтобы купить Землю за 1 сатоши. Сатоши Накамото — псевдоним инопланетного риелтора',\n    stage: 1\n  },\n  'news18': {\n    id: 'news18',\n    text: 'Вирусное видео: растения зомбируют людей через фотосинтез. \"Они хотят, чтобы мы стали их садовниками!\" — кричит ботаник-отщепенец.',\n    stage: 1\n  },  \n  'news19': {\n    id: 'news19',\n    text: 'Уфологи: Норвегия не существует — это голограмма для прикрытия портала в созвездии Рака. Фьорды? Проекция!\".',\n    stage: 1\n  },  \n  'news20': {\n    id: 'news20',\n    text: 'Телеграм-канал \"Истина\": птицы — беспилотники рептилоидов. Голубиная почта? Шпионаж за шаурмой!',\n    stage: 1\n  },  \n  'news21': {\n    id: 'news21',\n    text: 'Срочно в эфир! Пингвины Антарктиды тайно копают тоннель к ядру Земли. Цель: предложить его в качестве курорта пришельцам-туристам.',\n    stage: 1\n  },  \n  'news22': {\n    id: 'news22',\n    text: 'Срочно! Марсоход Perseverance нашел следы межгалактического Starbucks. \"Они пьют латте из черных дыр!\" — паникуют бариста.',\n    stage: 1\n  },  \n  // Специальные новости для добавления через очередь\n  'initial-news': {\n    id: 'initial-news',\n    text: 'Добро пожаловать в мир глобального доминирования! Начните с малого, захватите планету!',\n    stage: 'special'\n  },\n  'special-conquest': {\n    id: 'special-conquest',\n    text: 'Еще одна страна пала перед вашим могуществом! Мировые лидеры в панике!',\n    stage: 'special'\n  },\n  'special-project-complete': {\n    id: 'special-project-complete',\n    text: 'Проект завершен успешно! Ваши подданные аплодируют вашей несравненной мудрости!',\n    stage: 'special'\n  },\n  'special-problem-solved': {\n    id: 'special-problem-solved',\n    text: 'Проблема решена! Враги дрожат, союзники восхищаются вашей решительностью!',\n    stage: 'special'\n  },\n  'special-talent-unlocked': {\n    id: 'special-talent-unlocked',\n    text: 'Новый талант раскрыт! Ваши способности растут, и мир трепещет!',\n    stage: 'special'\n  },\n  'special-contact': {\n    id: 'special-contact',\n    text: 'Мы нашли контакт с внеземными цивилизациями!',\n    stage: 'special'\n  },\n  'special-hell': {\n    id: 'special-hell',\n    text: 'Почему в этом измерении так много свиней?',\n    stage: 'special'\n  },\n  'special-hell2': {\n    id: 'special-hell2',\n    text: 'В этом измерении все такое красное, это что? Это коммунизм, сынок!',\n    stage: 'special'\n  },\n  'ship-shield': {\n    id: 'ship-shield',\n    text: 'Агентство внешнего космоса напоминает, пена с силовых щитов хоть и вкусная, едой не является, пожалуйста воздержитесь от ее поедания, рабочие наносят ее уже в 4й раз за неделю.',\n    stage: 'special'\n  },\n  'pole-research': {\n    id: 'pole-research',\n    text: 'Снаряд, что разрушил Плутон, был найден в Антарктиде',\n    stage: 'special'\n  },\n  'ftl-research': {\n    id: 'ftl-research',\n    text: 'Проведен эксперимент с близнецами, одного разогнали до 1% скорости света, а другого затормозили. Нам тут еще сообщают что близнецы были сиамскими, что делает эксперимент бессмысленным. Ученный является потомком в восьмом колене того самого Шредингера и субъектом своего эксперимента. Это много объясняет, но ничего не понятно.',\n    stage: 'special'\n  },\n  \n};","import { COMMON, ECONOMY, FAITH, SCIENCE } from \"./app/constants\";\nimport { COUNTRY_NAMES } from \"./constants\";\nimport { FAITH_TALENTS } from \"./talents/faith\";\nimport { SCIENCE_TALENTS } from \"./talents/science\";\nimport { Talent } from \"./types\";\n\n\n// one row is 500 resource\n\n// available classes:\n// .positive\n// .negative\n// .project\n// .cost\n// .economy-req\n// .science-req\n// .faith-req\n// .resource-req\n// .talent-name\n\nexport const TALENTS: Talent[] = [\n  {\n    id: 'global-trader',\n    name: 'Global Trader',\n    description: 'Ваша торговля улучшает взаимотношения с другими странами',\n    category: ECONOMY,\n    position: [3, 3],\n    requires: [],\n    state: 'locked',\n    visible: [ () => true],\n    available: [ (state) => state.spheres[ECONOMY].resources >= 3000, (state) => state.stage < 2],\n    icon: '🌐💰',\n    effects: [\n      (state) => { state.conquestSpeed += 0.10 },\n    ],\n    meta: {\n      effectDesctription: 'Скорость завоевания <span class=\"positive\">+10%</span>',\n      requirementsDescription: '<span class=\"economy-req\">3000</span> 💸',\n      flavorText: 'Как и было предсказано Зальцманом.',\n    }\n  },\n  {\n    id: 'banker',\n    name: 'Banker',\n    description: 'Развитие экономики дает вам дополнительные ресурсы',\n    category: ECONOMY,\n    position: [2, 1],\n    requires: [],\n    state: 'locked',\n    visible: [ () => true],\n    available: [ (state) => state.spheres[ECONOMY].resources >= 500, (state) => state.stage < 2],\n    icon: '🏦',\n    effects: [\n      (state) => { state.autoClickPower += 0.10 }, \n      (state) => { state.multipliers[COMMON] += 0.10 },\n    ],\n    meta: {\n      effectDesctription: 'Добыча ₿ <span class=\"positive\">+10%</span>',\n      requirementsDescription: '<span class=\"economy-req\">4000</span> 💸',\n    }\n  },\n  {\n    id: 'infrastructure-magnate',\n    name: 'Infrastructure Magnate',\n    description: 'Усильте вашу инфраструктуру, это увеличит скорость строительства проектов',\n    category: ECONOMY,\n    position: [2, 5],\n    requires: [],\n    state: 'locked',\n    visible: [ () => true],\n    shade: [ (state) => state.spheres[ECONOMY].resources < 3000],\n    available: [ (state) => state.spheres[ECONOMY].resources >= 5000, (state) => state.stage < 2],\n    icon: '👌',\n    effects: [\n      (state) => { state.projectSpeed += 0.20 }\n    ],\n    meta: {\n      effectDesctription: 'Скорость строительства проектов <span class=\"positive\">+20%</span>',\n      requirementsDescription: '<span class=\"economy-req\">5000</span> 💸',\n    }\n  },\n  {\n    id: 'cooperation-master',\n    name: 'Cooperation Master',\n    description: 'Вы усиливаете другие сферы',\n    category: ECONOMY,\n    position: [3, 7],\n    requires: [],\n    state: 'locked',\n    visible: [ () => true],\n    shade: [ (state) => state.spheres[ECONOMY].resources < 4000],\n    available: [ (state) => state.spheres[ECONOMY].resources >= 7000, (state) => state.stage < 2],\n    icon: '💸',\n    effects: [\n      (state) => { state.multipliers[FAITH] += 0.10 },\n      (state) => { state.multipliers[SCIENCE] += 0.10 },\n    ],\n    meta: {\n      effectDesctription: 'Скорость науки <span class=\"positive\">+10%</span>,<br />Скорость веры <span class=\"positive\">+10%</span>',\n      requirementsDescription: '<span class=\"economy-req\">7000</span> 💸',\n    }\n  },\n  {\n    id: 'cyber-integration',\n    name: 'Cyber Integration',\n    description: 'Вклад в науку увеличен на 20%',\n    category: ECONOMY,\n    position: [2, 9],\n    requires: [],\n    state: 'locked',\n    visible: [ () => true],\n    shade: [ (state) => state.spheres[ECONOMY].resources < 2000],\n    available: [ (state) => state.spheres[ECONOMY].resources >= 5000, (state) => state.stage < 2],\n    icon: '🧬',\n    effects: [\n      (state) => { state.multipliers[SCIENCE] += 0.20 }\n    ],\n    meta: {\n      effectDesctription: 'Наука <span class=\"positive\">+20%</span>',\n      requirementsDescription: '<span class=\"economy-req\">5000</span> 💸',\n    }\n  },\n  {\n    id: 'new-material',\n    name: 'New Material',\n    description: 'Начать разработку новых материалов',\n    category: ECONOMY,\n    position: [2, 11],\n    requires: [],\n    state: 'locked',\n    visible: [ () => true],\n    shade: [ (state) => state.spheres[ECONOMY].resources < 6000],\n    available: [ (state) => state.spheres[ECONOMY].resources >= 11000, (state) => state.stage < 2],\n    icon: '🧬',\n    effects: [\n      (state) => { state.activeProjects.push({id: 'new-material', status: 'in_progress', progress: 0}) }\n    ],\n    meta: {\n      effectDesctription: 'Запуск проекта <span class=\"project\">Новый материал</span>',\n      requirementsDescription: '<span class=\"economy-req\">11000</span> 💸',\n    }\n  },\n  {\n    id: 'banker2',\n    name: 'Banker lvl2',\n    description: 'Развитие экономики дает вам дополнительные ресурсы',\n    category: ECONOMY,\n    position: [2, 12],\n    requires: [ {\n      talentId: 'banker',\n    }],\n    state: 'locked',\n    visible: [ () => true],\n    shade: [ (state) => state.spheres[ECONOMY].resources < 10000],\n    available: [ (state) => state.spheres[ECONOMY].resources >= 12000, (state) => state.stage < 2],\n    icon: '🏦',\n    effects: [\n      (state) => { state.autoClickPower += 200 },\n      (state) => { state.multipliers[COMMON] += 0.20 },\n    ],\n    meta: {\n      effectDesctription: 'Добыча ₿ в секунду <span class=\"positive\">+200</span>,<br />Все сферы <span class=\"positive\">+20%</span>',\n      requirementsDescription: '<span class=\"economy-req\">12000</span> 💸',\n    }\n  },\n  {\n    id: 'weapon-domination',\n    name: 'Weapon Domination',\n    description: 'Ваше доминирование в оружии неоспоримо',\n    category: ECONOMY,\n    position: [3, 13],\n    requires: [],\n    state: 'locked',\n    visible: [ () => true],\n    shade: [ (state) => state.spheres[ECONOMY].resources < 9000],\n    available: [ (state) => state.spheres[ECONOMY].resources >= 13000, (state) => state.stage < 2],\n    icon: '🧬',\n    effects: [\n      (state) => { state.multipliers[ECONOMY] += 0.20 },\n      (state) => { state.multipliers[FAITH] += 0.20 },\n      (state) => { state.multipliers[SCIENCE] += 0.20 },\n      (state) => { state.conquestSpeed += 0.50 },\n    ],\n    meta: {\n      effectDesctription: 'Экономика, наука, вера <span class=\"positive\">+20%</span>,<br />Скорость завоевания <span class=\"positive\">+50%</span>',\n      requirementsDescription: '<span class=\"economy-req\">13000</span> 💸',\n    }\n  },\n  {\n    id: 'antiair-gun',\n    name: 'Antiair Gun',\n    description: 'Создать пушку, что сможет отклонить снаряд от земли',\n    category: ECONOMY,\n    position: [2, 15],\n    requires: [],\n    state: 'locked',\n    visible: [ (state) => state.spheres[ECONOMY].resources >= 9000],\n    shade: [ (state) => state.spheres[ECONOMY].resources < 12000],\n    available: [ (state) => state.spheres[ECONOMY].resources >= 15000, (state) => state.stage < 2],\n    icon: '💂‍♀️🧬',\n    effects: [\n      (state) => { state.activeProjects.push({id: 'antiair-gun', status: 'in_progress', progress: 0}) },\n      (state) => { \n        state.conqueredCountries.push(\n          COUNTRY_NAMES.filter(\n            (country) => !state.conqueredCountries.includes(country)\n          )\n          [Math.floor(Math.random() * COUNTRY_NAMES.length)]\n        )\n      }\n    ],\n    meta: {\n      effectDesctription: 'Запуск проекта <span class=\"project\">Анти-воздушная пушка</span>,<br />Одна из стран трепещет перед вашей мощью',\n      requirementsDescription: '<span class=\"economy-req\">15000</span> 💸',\n    }\n  },\n  {\n    id: 'Brutal-force',\n    name: 'Brutal Force',\n    description: 'Перед вами трепещут от вашей силы, несколько стран идут к вам добровольно',\n    category: ECONOMY,\n    position: [2, 25],\n    requires: [],\n    state: 'locked',\n    visible: [ (state) => state.spheres[ECONOMY].resources >= 10000],\n    shade: [ (state) => state.spheres[ECONOMY].resources < 16000],\n    available: [ (state) => state.spheres[ECONOMY].resources >= 25000, (state) => state.stage < 2],\n    icon: '💪',\n    effects: [\n      (state) => { state.conquestSpeed += 0.50 },\n      (state) => { state.multipliers[SCIENCE] -= 0.50 },\n      (state) => { \n        state.conqueredCountries.push(\n          ...COUNTRY_NAMES.filter(\n            (country) => !state.conqueredCountries.includes(country)\n          ).slice(0, Math.floor(Math.random() * 45)+5) // 5-50 стран\n        )\n       },\n    ],\n    meta: {\n      effectDesctription: 'Скорость завоевания <span class=\"positive\">+50%</span>,<br />Наука <span class=\"negative\">-50%</span>, 5-50 стран сразу присоединяются к вам',\n      requirementsDescription: '<span class=\"economy-req\">25000</span> 💸',\n    }\n  },\n  {\n    id: 'cold-fission',\n    name: 'Cold Fission',\n    description: 'Вы открываете холодный ядерный синтез',\n    category: ECONOMY,\n    position: [3, 20],\n    requires: [{\n      talentId: 'new-material',\n    }],\n    state: 'locked',\n    visible: [ (state) => state.spheres[ECONOMY].resources >= 14000],\n    shade: [ (state) => state.spheres[ECONOMY].resources < 16000],\n    available: [ \n      (state) => state.spheres[ECONOMY].resources >= 20000,\n      (state) => state.spheres[SCIENCE].resources >= 10000,\n      (state) => state.stage < 2,\n    ],\n    icon: '☢️🧊',\n    effects: [\n      (state) => { state.multipliers[ECONOMY] += 0.50 },\n      (state) => { state.multipliers[SCIENCE] += 0.50 },\n    ],\n    meta: {\n      isCrossCategory: true,\n      effectDesctription: 'Скорость экономики <span class=\"positive\">+50%</span>,<br />Скорость наука <span class=\"positive\">+50%</span>',\n      requirementsDescription: '<span class=\"economy-req\">20000</span> 💸, <br /> <span class=\"science-req\">10000</span> 🧬',\n    }\n  },\n  // научные таланты\n  ...SCIENCE_TALENTS,\n  // таланты веры\n  ...FAITH_TALENTS,\n  \n  {\n    id: 'triumvirate',\n    name: 'Triumvirate',\n    description: 'Равномерное развитие всех сфер очень привлекательно для других стран',\n    category: SCIENCE,\n    position: [4, 22],\n    requires: [],\n    state: 'locked',\n    visible: [ \n      (state) => state.spheres[FAITH].resources >= 1000,\n      (state) => state.spheres[ECONOMY].resources >= 1000,\n      (state) => state.spheres[SCIENCE].resources >= 1000,\n    ],\n    available: [ \n      (state) => state.spheres[SCIENCE].resources >= 22000,\n      (state) => state.spheres[ECONOMY].resources >= 5000,\n      (state) => state.spheres[ECONOMY].resources <= 20000,\n      (state) => state.spheres[FAITH].resources >= 5000,\n      (state) => state.spheres[FAITH].resources <= 20000,\n      (state) => state.stage < 2,\n    ],\n    icon: '🚀',\n    effects: [\n      (state) => { state.conquestSpeed += 10 },\n    ],\n    meta: {\n      isCrossCategory: true,\n      effectDesctription: 'Скорость завоевания <span class=\"positive\">+10</span>',\n      requirementsDescription: '<span class=\"science-req\">22000<span>🧬, <br /> <span class=\"economy-req\">5000<span>💸, <br /> <span class=\"economy-req\">20000<span>💸, <br /> <span class=\"faith-req\">5000<span>🙏🏻, <br /> <span class=\"faith-req\">20000<span>🙏🏻',\n    }\n  },\n  // second stage\n  {\n    id: 'nanoshield',\n    name: 'Nanoshield',\n    description: 'Разработать щит, защищающий корабль от опасностей при быстром перемещении',\n    category: SCIENCE,\n    position: [4, 55],\n    requires: [],\n    state: 'locked',\n    visible: [ (state) => {\n      return state.stage >= 2;\n    }],\n    available: [ (state) => state.spheres[SCIENCE].resources >= 55000],\n    icon: '🌌',\n    effects: [\n      (state) => { state.activeProjects.push({\n        id: 'nanoshield',\n        progress: 0,\n        status: 'in_progress',\n      }) },\n    ],\n    meta: {\n      effectDesctription: 'Запуск проекта <span class=\"project\">Исследование щита</span>',\n      requirementsDescription: '<span class=\"science-req\">55000<span>🧬',\n    }\n  },\n  {\n    id: 'spice-shield',\n    name: 'Spice Shield',\n    description: 'Разработать щит, защищающий корабль от опасностей при быстром перемещении',\n    category: FAITH,\n    position: [6, 55],\n    requires: [],\n    state: 'locked',  \n    visible: [ (state) => {\n      return state.stage >= 2;\n    },\n    (state) => {\n      return state.secondStage.find((item) => item.id === 'spice');\n    }\n    ],\n    available: [ (state) => state.spheres[FAITH].resources >= 55000],\n    icon: '🌌',\n    effects: [\n      (state) => { state.activeProjects.push({\n        id: 'spice-shield',\n        progress: 0,\n        status: 'in_progress',\n      }) },\n    ],\n    meta: {\n      effectDesctription: 'Запуск проекта <span class=\"project\">Исследование щита</span>',\n      requirementsDescription: '<span class=\"faith-req\">55000<span>🙏🏻',\n    }\n  },\n  \n  {\n    id: 'quantum-beacon',\n    name: 'Quantum Beacon',\n    description: 'Вы можете создавать квантовые порталы',\n    category: SCIENCE,\n    position: [4, 70],\n    requires: [],\n    state: 'locked',\n    visible: [ (state) => {\n      return state.secondStage.find((item) => item.id === 'quantum-threads');\n    }],\n    available: [ (state) => state.spheres[SCIENCE].resources >= 70000],\n    icon: '🌌',\n    effects: [\n      (state) => {  \n        state.activeProjects.push({\n          // Открывает возможность захватывать планеты\n          id: 'quantum-beacon',\n          progress: 0,\n          status: 'in_progress',\n        })\n      },\n    ],\n    meta: {\n      effectDesctription: 'Запуск проекта <span class=\"project\">Исследование квантовых порталов</span>',\n      requirementsDescription: '<span class=\"science-req\">70000<span>🧬',\n    }\n  },\n  {\n    id: 'space-folding-engine',\n    name: 'Space Folding Engine',\n    description: 'Разработка двигателя, позволяющего перемещаться быстрее скорости света',\n    category: SCIENCE,\n    position: [4, 75],\n    requires: [],\n    state: 'locked',\n    visible: [ (state) => {\n      return state.secondStage.find((item) => item.id === 'dark-matter' || item.id === 'spice' || item.id === 'negative-mass-matter');\n    }],\n    available: [ (state) => state.spheres[SCIENCE].resources >= 75000],\n    icon: '🌌',\n    effects: [\n      (state) => {  \n        state.activeProjects.push({\n          id: 'space-folding-engine',\n          progress: 0,\n          status: 'in_progress',\n        })\n      },\n    ],\n    meta: {\n      effectDesctription: 'Запуск проекта <span class=\"project\">Исследование двигателя</span>',\n      requirementsDescription: '<span class=\"science-req\">75000<span>🧬',\n    }\n  },\n  {\n    id: 'white-hole',\n    name: 'Чревоточина',\n    description: 'Ваши разработки позволяют нам создать одну чревоточину, сразу до планеты врага! Так можно обойтись без щитов. Но у нас одна попытка!',\n    category: ECONOMY,\n    position: [2, 55],\n    requires: [\n      {\n        talentId: 'cold-fission', \n      }\n    ],\n    state: 'locked',\n    visible: [ (state) => {\n      return state.secondStage.find((item) => item.id === 'negative-mass-matter');\n    }],\n    available: [ (state) => state.spheres[ECONOMY].resources >= 55000],\n    icon: '🌌',\n    effects: [\n      (state) => {  \n        state.activeProjects.push({\n          id: 'white-hole',\n          progress: 0,\n          status: 'in_progress',\n        })\n      },\n    ],\n    meta: {\n      effectDesctription: 'Запуск проекта <span class=\"project\">Исследование чревоточины</span>',\n      requirementsDescription: '<span class=\"economy-req\">55000<span>💸 <br /> Талант <span class=\"talent\">Холодный синтез</span>',\n    }\n  },\n  {\n    id: 'big-fold',\n    name: 'Складывание пространства от планеты к планете',\n    description: 'Ваши разработки позволяют нам создать изменить пространство, мы сможем попасть к ним даже без короблей! Но у нас одна попытка!',\n    category: ECONOMY,\n    position: [2, 55],\n    requires: [\n      {\n        talentId: 'cold-fission', \n      }\n    ],\n    state: 'locked',\n    visible: [ (state) => {\n      return state.secondStage.find((item) => item.id === 'dark-matter' );\n    }],\n    available: [ (state) => state.spheres[ECONOMY].resources >= 55000],\n    icon: '🌌',\n    effects: [\n      (state) => {  \n        state.activeProjects.push({\n          id: 'big-fold',\n          progress: 0,\n          status: 'in_progress',\n        })\n      },\n    ],\n    meta: {\n      effectDesctription: 'Запуск проекта <span class=\"project\">Исследование складывания пространства</span>',\n      requirementsDescription: '<span class=\"economy-req\">55000<span>💸 <br /> Талант <span class=\"talent\">Холодный синтез</span>',\n    }\n  },\n  \n\n];\n\n\n","import { COMMON, ECONOMY, FAITH, SCIENCE } from \"../app/constants\";\r\nimport { COUNTRY_NAMES } from \"../constants\";\r\nimport { Sphere, Talent } from \"../types\";\r\n\r\nexport const SCIENCE_TALENTS: Talent[] = [\r\n{\r\n    id: 'science-freak',\r\n    name: 'Science Freak',\r\n    description: 'Наука это наш путь к победе',\r\n    category: SCIENCE,\r\n    position: [4, 2],\r\n    requires: [],\r\n    state: 'locked',\r\n    visible: [ () => true],\r\n    available: [ (state) => state.spheres[SCIENCE].resources >= 2000, (state) => state.stage < 2],\r\n    icon: '🧬',\r\n    effects: [\r\n        (state) => { state.multipliers[SCIENCE] += 0.50 },\r\n    ],\r\n    meta: {\r\n        effectDesctription: 'Скорость науки <span class=\"positive\">+50%</span>',\r\n        requirementsDescription: '<span class=\"science-req\">2000</span> 🧬',\r\n    }\r\n    },\r\n    //Таланты для науки\r\n    // первый этап\r\n    // развитие науки, на котором будут основаны таланты второго уровня\r\n    // на втором уровне развитие двигатель, корабль, щиты кораблся, щиты Земли, космические проекты\r\n\r\n    // исследование черных дыр\r\n    {\r\n        id: 'black-hole-research',\r\n        name: 'Black Hole Research',\r\n        description: 'Создать массив телескопов, разных типов, что будут исследовать черные дыры, может помочь в будущем, оплате деньгами и верой',\r\n        category: SCIENCE,\r\n        position: [5, 17],\r\n        requires: [],\r\n        state: 'locked',\r\n        visible: [ () => true],\r\n        available: [ (state) => state.spheres[SCIENCE].resources >= 17000, (state) => state.resources >= 10000, (state) => state.stage < 2,],\r\n        icon: '📡',\r\n        effects: [\r\n            (state) => {\r\n                state.multipliers[SCIENCE] += 2;\r\n                state.projectSpeed += 0.5;\r\n                state.conquestSpeed += 1;\r\n                state.resources -= 10000;\r\n                state.spheres[FAITH].resources -= Math.min(10000, state.spheres[FAITH].resources);\r\n            },\r\n        ],\r\n        meta: {\r\n            effectDesctription: 'Скорость науки <span class=\"positive\">+2</span>,<br />Скорость проектов <span class=\"positive\">+0.5</span>,<br />Скорость завоевания <span class=\"positive\">+1</span>,<br />Наука <span class=\"negative\">-10000</span>,<br />Вера <span class=\"negative\">-10000</span>',\r\n            requirementsDescription: '<span class=\"science-req\">17000</span> 🧬, <span class=\"science-req\">10000</span> 💸',\r\n        }\r\n    },\r\n    // исследование магнетаров\r\n    {\r\n        id: 'magnetar-research',\r\n        name: 'Magnetar Research',\r\n        description: 'Создать массив телескопов, разных типов, что будут исследовать магнетары, если что-то пролетит перед ними, мы это засечем',\r\n        category: SCIENCE,\r\n        position: [4, 18],\r\n        requires: [],\r\n        state: 'locked',\r\n        visible: [ () => true],\r\n        available: [ (state) => state.spheres[SCIENCE].resources >= 18000, (state) => state.spheres[ECONOMY].resources >= 10000, (state) => state.stage < 2,],\r\n        icon: '📡',\r\n        effects: [\r\n            (state) => {\r\n                state.multipliers[SCIENCE] += 2;\r\n                state.projectSpeed += 0.5;\r\n                state.conquestSpeed += 1;\r\n                state.multipliers[ECONOMY] -= 1;\r\n            },\r\n        ],\r\n        meta: {\r\n            effectDesctription: 'Скорость науки <span class=\"positive\">+2</span>,<br />Скорость проектов <span class=\"positive\">+0.5</span>,<br />Скорость завоевания <span class=\"positive\">+1</span>,<br />Экономика <span class=\"negative\">-1</span>',\r\n            requirementsDescription: '<span class=\"science-req\">18000</span> 🧬, <span class=\"science-req\">10000</span> 💸',\r\n        }\r\n    },\r\n\r\n    // обнаружение атак\r\n    {\r\n        id: 'detection-of-attacks',\r\n        name: 'Detection of Attacks',\r\n        description: 'Создать массив телескопов, разных типов, что будут искать, откуда могли атаковать Плутон',\r\n        category: SCIENCE,\r\n        position: [3, 19],\r\n        requires: [],\r\n        state: 'locked',    \r\n        visible: [ () => true],\r\n        available: [ (state) => state.spheres[SCIENCE].resources >= 17000, (state) => state.stage < 2, \r\n        (state) => {\r\n            let price = 50000;\r\n            if (state.talents.find(talent => talent.id === 'black-hole-research')?.state === 'active'){\r\n                price -= 20000;\r\n            }\r\n            if (state.talents.find(talent => talent.id === 'magnetar-research')?.state === 'active'){\r\n                price -= 20000;\r\n            }\r\n            return state.resources >= price\r\n        }\r\n    ],\r\n        icon: '🔍',\r\n        effects: [\r\n            (state) => { state.multipliers[SCIENCE] += 0.50 },\r\n            (state) => {\r\n                state.secondStage.push('detection-of-attacks');\r\n            },\r\n            (state) => {\r\n                let price = 50000;\r\n                if (state.talents.find(talent => talent.id === 'black-hole-research')?.state === 'active'){\r\n                    price -= 20000;\r\n                }\r\n                if (state.talents.find(talent => talent.id === 'magnetar-research')?.state === 'active'){\r\n                    price -= 20000;\r\n                }\r\n                state.resources -= price\r\n            }\r\n        ],\r\n        meta: {\r\n            effectDesctription: 'Скорость науки <span class=\"positive\">+50%</span>, <br />Цена зависит от других талантов 50000-10000',\r\n            requirementsDescription: '<span class=\"science-req\">17000</span> 🧬',\r\n        }\r\n    },\r\n    // поиск снарядов\r\n    // поиск приводит к нахождению инопланетян?\r\n    // развитие законов физики?\r\n    // гибернация для долгих путешествий без фтл\r\n\r\n    // исследование снаряда инопланетян\r\n    {\r\n        id: 'pole-research',\r\n        name: 'Pole Research',\r\n        description: 'Исследование снаряда',\r\n        category: SCIENCE,\r\n        position: [5, 14],\r\n        requires: [],\r\n        state: 'locked',\r\n        visible: [ () => true],\r\n        available: [ (state) => state.spheres[SCIENCE].resources >= 14000, (state) => state.stage < 2],\r\n        icon: '☄️', \r\n        effects: [\r\n            (state) => { state.multipliers[SCIENCE] += 0.50 },\r\n            (state) => {\r\n                state.spheres[FAITH].CPS += 100;\r\n            },\r\n            (state) => {\r\n                // добавить новость со снарядом\r\n                state.newsQueue.push('pole-research');\r\n            }\r\n        ],\r\n        meta: {\r\n            effectDesctription: 'Скорость науки <span class=\"positive\">+50%</span>,<br /> Эти события приводят часть людей к вере ,<br />вера <span class=\"positive\">+100</span> в секунду',\r\n            requirementsDescription: '<span class=\"science-req\">14000</span> 🧬',\r\n            flavorText: 'Снаряд, что разрушил Плутон, был найден в Антарктиде',\r\n        }\r\n        \r\n    },\r\n    // добыча осколков плутона\r\n    {\r\n        id: 'pluto-research',\r\n        name: 'Pluto Research',\r\n        description: 'Исследование осколков плутона',\r\n        category: SCIENCE,\r\n        position: [3, 14],\r\n        requires: [],\r\n        state: 'locked',\r\n        visible: [ () => true],\r\n        available: [ (state) => state.spheres[SCIENCE].resources >= 14000, (state) => state.stage < 2],\r\n        icon: '💼',\r\n        effects: [\r\n            (state) => {\r\n                state.spheres[ECONOMY].CPS += 200;\r\n            }\r\n        ],\r\n        meta: {\r\n            effectDesctription: 'Экономика <span class=\"positive\">+200</span> в секунду',\r\n            requirementsDescription: '<span class=\"science-req\">14000</span> 🧬',\r\n            flavorText: 'В сердце он был планетой(из железа и никеля в основном)',\r\n        }\r\n\r\n    },\r\n    // колониальные технологии\r\n    // эксперименты с фтл - временный бонус в науке и ресах за счет других сфер\r\n    {\r\n        id: 'ftl-research',\r\n        name: 'FTL Research',\r\n        description: 'Релятивистские эксперименты',\r\n        category: SCIENCE,\r\n        position: [4, 15],\r\n        requires: [],\r\n        state: 'locked',\r\n        visible: [ () => true],\r\n        available: [ (state) => state.spheres[SCIENCE].resources >= 15000, (state) => state.stage < 2],\r\n        icon: '👬',\r\n        effects: [\r\n            (state) => {\r\n                const temp = [state.spheres[SCIENCE].CPS];\r\n                state.spheres[SCIENCE].CPS += 1000;\r\n                state.spheres[ECONOMY].resources -= 1000;\r\n                state.spheres[ECONOMY].CPS -= 100;\r\n                state.spheres[FAITH].resources -= 1000;\r\n                state.spheres[FAITH].CPS -= 100;\r\n                setTimeout(() => {\r\n                    state.spheres[SCIENCE].CPS = temp[0];\r\n                }, 1000 * 60 * 1);\r\n            },\r\n            (state) => {\r\n                state.secondStage.push('ftl-research');\r\n            },\r\n            (state) => {\r\n                state.newsQueue.push('ftl-research');\r\n            }\r\n        ],\r\n        meta: {\r\n            effectDesctription: 'За счет других сфер, усилить науку на <span class=\"positive\">1000</span> в секунду, но за счет экономики и веры, ослабить их на <span class=\"negative\">100</span> в секунду',\r\n            requirementsDescription: '<span class=\"science-req\">15000</span> 🧬',\r\n        }\r\n    },\r\n    // развитие ии\r\n    {\r\n        id: 'ai-research',\r\n        name: 'AI Research',\r\n        description: 'Исследование искусственного интеллекта',\r\n        category: SCIENCE,\r\n        position: [4, 8],\r\n        requires: [],\r\n        state: 'locked',\r\n        visible: [ () => true],\r\n        available: [ (state) => state.spheres[SCIENCE].resources >= 8000, (state) => state.stage < 2],\r\n        icon: '🧬',\r\n        effects: [\r\n            (state) => { state.conquestSpeed += 2 },\r\n        ],\r\n        meta: {\r\n            effectDesctription: 'Скорость объединения <span class=\"positive\">+2</span>',\r\n            requirementsDescription: '<span class=\"science-req\">8000</span> 🧬',\r\n        }\r\n    },\r\n    // 42 машина отвечающая на все\r\n    // Any temperature superconductor\r\n    // первичный бульон\r\n    {\r\n        id: 'superconductor',\r\n        name: 'Superconductor',\r\n        description: 'Исследование сверхпроводников',\r\n        category: SCIENCE,\r\n        position: [4, 11],\r\n        requires: [],   \r\n        state: 'locked',\r\n        visible: [ () => true],\r\n        available: [ (state) => state.spheres[SCIENCE].resources >= 11000, (state) => state.stage < 2],\r\n        icon: '🧬',\r\n        effects: [\r\n            (state) => { \r\n                state.conqueredCountries.push(\r\n                  ...COUNTRY_NAMES.filter(\r\n                    (country) => !state.conqueredCountries.includes(country)\r\n                  ).slice(0, Math.floor(Math.random() * 30)+20) // 20-50 стран\r\n                )\r\n               },\r\n            (state) => { state.secondStage.push('superconductor') },\r\n        ],\r\n        meta: {\r\n            effectDesctription: '<span class=\"positive\">20-50</span> стран сразу присоединяются к вам',\r\n            requirementsDescription: '<span class=\"science-req\">11000</span> 🧬',\r\n        }\r\n    },\r\n    // фотонные исследования\r\n    {\r\n        id: 'photon-research',\r\n        name: 'Photon Research',\r\n        description: 'Исследование фотонов',\r\n        category: SCIENCE,\r\n        position: [4, 5],\r\n        requires: [],   \r\n        state: 'locked',\r\n        visible: [ () => true],\r\n        available: [ (state) => state.spheres[SCIENCE].resources >= 5000, (state) => state.stage < 2],\r\n        icon: '💥',\r\n        effects: [\r\n            (state) => { state.multipliers[SCIENCE] += 0.50 },\r\n        ],\r\n        meta: {\r\n            effectDesctription: 'Скорость науки <span class=\"positive\">+50%</span>',\r\n            requirementsDescription: '<span class=\"science-req\">5000</span> 🧬',\r\n        }\r\n    },\r\n    // квантовые компьютеры\r\n    {\r\n        id: 'quantum-computer',\r\n        name: 'Quantum Computer',\r\n        description: 'Исследование квантовых компьютеров',\r\n        category: SCIENCE,\r\n        position: [4, 16],\r\n        requires: [],\r\n        state: 'locked',\r\n        visible: [ () => true],\r\n        available: [ (state) => state.spheres[SCIENCE].resources >= 16000, (state) => state.stage < 2],\r\n        icon: '💻',\r\n        effects: [\r\n            (state) => { state.projectSpeed += 20 },\r\n            (state) => { state.secondStage.push('quantum-computer') },\r\n        ],  \r\n        meta: {\r\n            effectDesctription: 'Скорость проектов <span class=\"positive\">+20</span>',\r\n            requirementsDescription: '<span class=\"science-req\">16000</span> 🧬',\r\n            flavorText: 'Критотехнологии всё',\r\n        }\r\n    },\r\n    \r\n    // исследование квантовых нитей\r\n    // исследование темной материи\r\n    // исследование струн\r\n    // исследование бранов\r\n    // cвязанные таланты, для одного игрока во вторую фазу добавит эффект только один\r\n    {\r\n        id: 'quantum-threads',\r\n        name: 'Quantum Threads',\r\n        description: 'Исследование квантовых нитей',\r\n        category: SCIENCE,\r\n        position: [3, 2],\r\n        requires: [],\r\n        state: 'locked',\r\n        visible: [ () => true],\r\n        available: [ (state) => state.spheres[SCIENCE].resources >= 2000, (state) => state.stage < 2],\r\n        icon: '🧬',\r\n        effects: [\r\n            (state) => { state.multipliers[SCIENCE] += 0.50 },\r\n            (state) => { state.seed <0.25 && state.secondStage.push('quantum-threads') },\r\n        ],\r\n        meta: {\r\n            effectDesctription: 'Скорость науки <span class=\"positive\">+50%</span>',\r\n            requirementsDescription: '<span class=\"science-req\">2000</span> 🧬',\r\n        }   \r\n    },\r\n    {\r\n        id: 'dark-matter',\r\n        name: 'Dark Matter',\r\n        description: 'Исследование темной материи',\r\n        category: SCIENCE,\r\n        position: [3, 6],\r\n        requires: [{\r\n            talentId: 'quantum-threads',\r\n        }],\r\n        state: 'locked',\r\n        visible: [\r\n            (state)=>state.spheres[SCIENCE].resources >= 3000,\r\n            (state) => {\r\n            return !state.secondStage.includes('quantum-threads');\r\n        }],\r\n        available: [ (state) => state.spheres[SCIENCE].resources >= 6000, (state) => state.stage < 2],\r\n        icon: '🌚',\r\n        effects: [\r\n            (state) => { state.multipliers[SCIENCE] += 0.50 },\r\n            (state) => { state.seed >0.25 && state.seed <0.5 && state.secondStage.push('dark-matter') },\r\n        ],\r\n        meta: {\r\n            effectDesctription: 'Скорость науки <span class=\"positive\">+50%</span>',\r\n            requirementsDescription: '<span class=\"science-req\">6000</span> 🧬',\r\n        }\r\n    },\r\n    {\r\n        id: 'thread-theory',\r\n        name: 'Thread Theory',\r\n        description: 'Исследование теории струн',\r\n        category: SCIENCE,\r\n        position: [3, 12],\r\n        requires: [\r\n            {\r\n            talentId: 'dark-matter',\r\n            }\r\n        ],\r\n        state: 'locked',  \r\n        visible: [\r\n            (state) => {\r\n            return !state.secondStage.includes('quantum-threads') && !state.secondStage.includes('dark-matter');\r\n            },\r\n            (state) => {\r\n            return state.spheres[SCIENCE].resources >= 7000;\r\n            }\r\n        ],\r\n        available: [ (state) => state.spheres[SCIENCE].resources >= 12000, (state) => state.stage < 2],\r\n        icon: '🧬',\r\n        effects: [\r\n            (state) => { state.multipliers[SCIENCE] += 0.50 },\r\n            (state) => { state.seed >0.5 && state.seed <0.75 && state.secondStage.push('thread-theory') },\r\n        ],\r\n    },\r\n    {\r\n        id: 'bran-theory',\r\n        name: 'Bran Theory',\r\n        description: 'Исследование бранов',\r\n        category: SCIENCE,\r\n        position: [3, 16],\r\n        requires: [\r\n            {\r\n            talentId: 'thread-theory',\r\n            }\r\n        ],\r\n        state: 'locked',\r\n        visible: [\r\n            (state) => {\r\n            return !state.secondStage.includes('quantum-threads') && !state.secondStage.includes('dark-matter') && !state.secondStage.includes('thread-theory');\r\n            },\r\n            (state) => {\r\n            return state.spheres[SCIENCE].resources >= 13000;\r\n            }\r\n        ],\r\n        available: [ (state) => state.spheres[SCIENCE].resources >= 16000, (state) => state.stage < 2],\r\n        icon: '🧬',\r\n        effects: [\r\n            (state) => { state.multipliers[SCIENCE] += 0.50 },\r\n            (state) => { state.seed >0.75 && state.secondStage.push('brans') },\r\n        ],\r\n    },\r\n    \r\n\r\n    // исследование черных дыр\r\n    {\r\n        id: 'explosion-of-knowledge',\r\n        name: 'Explosion of Knowledge',\r\n        description: 'Ваши ученые обращаются к неизвестным силам, 50% провал, x1000 всего при успехе',\r\n        category: SCIENCE,\r\n        position: [4, 10],\r\n        requires: [],\r\n        state: 'locked',\r\n        visible: [ (state) => {\r\n            return state.spheres[FAITH].resources >= 2500 && state.spheres[SCIENCE].resources >= state.spheres[ECONOMY].resources;\r\n        }],\r\n        available: [ (state) => state.spheres[SCIENCE].resources >= 10000, (state) => state.stage < 2],\r\n        icon: '🤯',\r\n        effects: [\r\n            (state) => {\r\n            const savedState = {resources: state.resources, spheres: {...state.spheres}, multipliers: {...state.multipliers}, conquestSpeed: state.conquestSpeed, projectSpeed: state.projectSpeed, manualClickPower: state.manualClickPower, autoClickPower: state.autoClickPower};\r\n            if (Math.random() < 0.5) {\r\n                state.resources += 1000;\r\n                state.multipliers[SCIENCE] += 10;\r\n                state.multipliers[FAITH] += 10;\r\n                state.multipliers[ECONOMY] += 10;\r\n                // Убрать ускорение через 10сек\r\n                setTimeout(() => {\r\n                state.multipliers[SCIENCE] -= 10;\r\n                state.multipliers[FAITH] -= 10;\r\n                state.multipliers[ECONOMY] -= 10;\r\n                }, 10000);\r\n            } else {\r\n                state.resources = 0;\r\n                state.spheres[SCIENCE].resources = 0;\r\n                state.spheres[FAITH].resources = 0;\r\n                state.spheres[ECONOMY].resources = 0;\r\n                state.multipliers[SCIENCE] = 0.01;\r\n                state.multipliers[FAITH] = 0.01;\r\n                state.multipliers[ECONOMY] = 0.01;\r\n                state.conquestSpeed = 0.01;\r\n                state.projectSpeed = 0.01;\r\n                state.manualClickPower = 0.01;\r\n                state.autoClickPower = 0.01;\r\n                // Вернуть как было, через 10 секунд\r\n                setTimeout(() => {\r\n                state.resources = savedState.resources;\r\n                state.spheres[SCIENCE].resources = savedState.spheres[SCIENCE].resources;\r\n                state.spheres[FAITH].resources = savedState.spheres[FAITH].resources;\r\n                state.spheres[ECONOMY].resources = savedState.spheres[ECONOMY].resources;\r\n                state.multipliers[SCIENCE] = savedState.multipliers[SCIENCE];\r\n                state.multipliers[FAITH] = savedState.multipliers[FAITH];\r\n                state.multipliers[ECONOMY] = savedState.multipliers[ECONOMY];\r\n                state.conquestSpeed = savedState.conquestSpeed;\r\n                state.projectSpeed = savedState.projectSpeed;\r\n                state.manualClickPower = savedState.manualClickPower;\r\n                state.autoClickPower = savedState.autoClickPower;\r\n                }, 10000);\r\n            };\r\n            \r\n            },\r\n        ],\r\n    },\r\n    {\r\n        id: 'transmutation',\r\n        name: 'Transmutation',\r\n        description: 'Превратить немного свинца в золото',\r\n        category: SCIENCE,\r\n        position: [4, 12],\r\n        requires: [],\r\n        state: 'locked',\r\n        visible: [ () => true],\r\n        available: [ (state) => state.spheres[SCIENCE].resources >= 12000, (state) => state.stage < 2],\r\n        icon: '🧊',\r\n        effects: [\r\n            (state) => { state.resources += 7000 },\r\n        ],\r\n        meta: {\r\n            effectDesctription: 'Добавить <span class=\"positive\">7000</span> ₿',\r\n            requirementsDescription: '<span class=\"science-req\">12000<span>🧬',\r\n        }\r\n    },\r\n    {\r\n        id: 'science-freak2',\r\n        name: 'Science Freak lvl2',\r\n        description: 'Только наука может спасти нас',\r\n        category: SCIENCE,\r\n        position: [4, 26],\r\n        requires: [],\r\n        state: 'locked',\r\n        visible: [ (state) => state.spheres[SCIENCE].resources >= 12000],\r\n        shade: [ (state) => state.spheres[SCIENCE].resources < 20000],\r\n        available: [ (state) => state.spheres[SCIENCE].resources >= 26000, (state) => state.stage < 2],\r\n        icon: '🧬',\r\n        effects: [\r\n            (state) => { state.multipliers[SCIENCE] += 0.50 },\r\n            (state) => { state.spheres[FAITH].resources > 10000 && (state.spheres[FAITH].resources -= 5000)  },\r\n            (state) => { state.spheres[ECONOMY].resources > 10000 && (state.spheres[ECONOMY].resources -= 5000)  },\r\n        ],\r\n        meta: {\r\n            effectDesctription: 'Скорость науки <span class=\"positive\">+50%</span>,<br />сильная вера ослаблена на <span class=\"negative\">- 5000</span>,<br />сильная экономика ослаблена на <span class=\"negative\">- 5000</span>',\r\n            requirementsDescription: '<span class=\"science-req\">26000<span>🧬',\r\n            flavorText: 'Люблю науку очень',\r\n        }\r\n    },\r\n    {\r\n        id: 'human-experiment',\r\n        name: 'Human Experiment',\r\n        description: 'Разрешить ученым проводить эксперименты на людях',\r\n        category: SCIENCE,\r\n        position: [4, 28],\r\n        requires: [],\r\n        state: 'locked',\r\n        visible: [ (state) => state.spheres[SCIENCE].resources >= 15000],\r\n        shade: [ (state) => state.spheres[SCIENCE].resources < 22000],\r\n        available: [ (state) => state.spheres[SCIENCE].resources >= 28000, (state) => state.stage < 2],\r\n        icon: '🧬',\r\n        effects: [\r\n            (state) => { state.multipliers[SCIENCE] += 0.50 },\r\n            (state) => { state.projectSpeed += 2 },\r\n            (state) => { state.conquestSpeed += 2 },\r\n            (state) => { state.manualClickPower *= 2 },\r\n            (state) => { state.autoClickPower *= 2 },\r\n            (state) => { state.spheres[FAITH].resources > 10000 && (state.spheres[FAITH].resources -= 5000)  },\r\n            (state) => { state.multipliers[ECONOMY] -= 0.50 },\r\n        ],\r\n        meta: {\r\n            effectDesctription: 'Наука <span class=\"positive\">+50%</span>,<br />скорость проектов <span class=\"positive\">+ х2</span>,<br /> скорость объединения <span class=\"positive\">+ х2</span>,<br /> клики <span class=\"positive\">х2</span>,<br /> экономика <span class=\"negative\">-50%</span>,<br /> вера <span class=\"negative\">- 5000</span>',\r\n            requirementsDescription: '<span class=\"science-req\">28000<span>🧬',\r\n            flavorText: 'Это может привести к гибели многих людей, но в скором времени мы сможем спасти их всех',\r\n        }\r\n    },\r\n    {\r\n        id: 'robots',\r\n        name: 'Robots',\r\n        description: 'Последнее слово робототехники',\r\n        category: SCIENCE,\r\n        position: [4, 35],\r\n        requires: [],\r\n        state: 'locked',\r\n        visible: [ (state) => state.spheres[SCIENCE].resources >= 25000],\r\n        shade: [ (state) => state.spheres[SCIENCE].resources < 31000],\r\n        available: [ (state) => state.spheres[SCIENCE].resources >= 35000,\r\n            (state) => state.spheres[ECONOMY].resources >= 10000,\r\n            (state)=>state.resources > 10000,\r\n            (state) => state.stage < 2\r\n        ],\r\n        icon: '🤖',\r\n        effects: [\r\n            (state) => { state.projectSpeed += 2 },\r\n        ],\r\n        meta: {\r\n            effectDesctription: 'Скорость проектов <span class=\"positive\">+2</span>',\r\n            requirementsDescription: '<span class=\"science-req\">35000<span>🧬, <br /> <span class=\"economy-req\">10000<span>💸, <br /> <span class=\"resources-req\">10000<span>💰',\r\n            flavorText: 'Тут нам не обойтись без денег',\r\n        }\r\n    },\r\n    // При 75% науки, таланты смещаются в веру и требуют столько же веры\r\n    {\r\n        id: 'summon-knowledge',\r\n        name: 'Summon Knowledge',\r\n        description: 'Призвать знания из неизвестных источников',\r\n        category: SCIENCE,\r\n        position: [5, 38],\r\n        requires: [],\r\n        state: 'locked',\r\n        visible: [ (state) => state.spheres[SCIENCE].resources >= 35000, (state) => state.spheres[FAITH].resources >= 35000],\r\n        shade: [ (state) => state.spheres[SCIENCE].resources < 41000],\r\n        available: [ (state) => state.spheres[FAITH].resources >= 38000, (state) => state.spheres[FAITH].resources >= 38000, (state) => state.stage < 2],\r\n        icon: '🧬',\r\n        effects: [\r\n            (state) => { state.multipliers[SCIENCE] += 0.50 },\r\n            (state) => { state.multipliers[FAITH] += 0.50 },\r\n            (state) => { state.multipliers[ECONOMY] -= 0.50 },\r\n            (state) => { state.projectSpeed += [10,100,1000][Math.floor(Math.random() * 3)] },\r\n        ],\r\n        meta: {\r\n            effectDesctription: 'Наука <span class=\"positive\">+50%</span>,<br />Вера <span class=\"positive\">+50%</span>,<br />Экономика <span class=\"negative\">-50%</span>,<br />Скорость проектов <span class=\"positive\">+10-100-1000</span>',\r\n            requirementsDescription: '<span class=\"science-req\">35000<span>🧬, <br /> <span class=\"faith-req\">35000<span>🙏🏻',\r\n            flavorText: 'Это оно?',\r\n        }\r\n    },\r\n    {\r\n        id: 'quark-control',\r\n        name: 'Quark Control',\r\n        description: 'Эксперименты в коллайдеры принесли свои плоды, мы можем создавать любую материю, которая нам нужна',\r\n        category: SCIENCE,\r\n        position: [5, 40],\r\n        requires: [ {\r\n            talentId: 'new-materials',\r\n        }],\r\n        state: 'locked',\r\n        visible: [ (state) => state.spheres[SCIENCE].resources >= 35000, (state) => state.spheres[FAITH].resources >= 35000],\r\n        shade: [ (state) => state.spheres[SCIENCE].resources < 40000],\r\n        available: [ (state) => state.spheres[SCIENCE].resources >= 40000, (state) => state.spheres[FAITH].resources >= 40000, (state) => state.stage < 2],\r\n        icon: '🧬',\r\n        effects: [\r\n            (state) => { state.projectSpeed *= 2 },\r\n        ],\r\n        meta: {\r\n            effectDesctription: 'Скорость проектов <span class=\"positive\">х2</span>',\r\n            requirementsDescription: '<span class=\"science-req\">40000<span>🧬, <br /> <span class=\"faith-req\">40000<span>🙏🏻',\r\n        }\r\n    },\r\n    {\r\n        id: 'elexir-of-undying',\r\n        name: 'Elexir of Undying',\r\n        description: 'Создать элексир, который позволит вашим ученым жить вечно.(вера, наука +50%, экономика -50%)',\r\n        category: SCIENCE,\r\n        position: [4, 18],\r\n        requires: [],\r\n        state: 'locked',\r\n        visible: [ (state) => state.spheres[FAITH].resources >= 3000 && state.spheres[SCIENCE].resources >= 3000 && state.spheres[ECONOMY].resources <= 4500],\r\n        shade: [ (state) => state.spheres[SCIENCE].resources < 10000],\r\n        available: [ (state) => state.spheres[SCIENCE].resources >= 18000, (state) => state.stage < 2],\r\n        icon: '🧊',\r\n        effects: [\r\n            (state) => { state.multipliers[SCIENCE] += 0.50 },\r\n            (state) => { state.multipliers[FAITH] += 0.50 },\r\n            (state) => { state.multipliers[ECONOMY] -= 0.50 },\r\n        ],\r\n        meta: {\r\n            effectDesctription: 'Скорость науки <span class=\"positive\">+50%</span>,<br />скорость веры <span class=\"positive\">+50%</span>,<br />скорость экономики <span class=\"negative\">-50%</span>',\r\n            requirementsDescription: '<span class=\"science-req\">18000<span>🧬',\r\n        }\r\n    },\r\n]","import { COMMON, ECONOMY, FAITH, SCIENCE } from \"../app/constants\";\nimport { COUNTRY_NAMES } from \"../constants\";\nimport { Sphere, Talent } from \"../types\";\n\nexport const FAITH_TALENTS: Talent[] = [\n    // первый этап\n    // Должно привести к перемещению через ад, созданию Бога\n    // минусы: много войны, нестабильность, много случайности\n    // имеет самое быстрое развитие в начале и замедляется к концу(дорогие поздниие апгрейды)\n    // священный грааль\n    // копье Лонгиния\n    // Эффект: +25% урона в мини-играх, увеличивает шанс критических событий\n    // Требования: research-artifact\n    // Стадия: средняя игра (10000 faith)\n    \n    // яблоко эдема\n    // Эффект: Дает знание добра и зла - удваивает эффекты позитивных и негативных событий\n    // Требования: Forbidden Knowledge\n    // Стадия: поздняя игра (40000 faith)\n    \n    \n    \n    // песнопения проклятых\n    // Эффект: -20% faith production, но +100% к эффективности проектов\n    // Требования: strange-dust\n    // Стадия: поздняя игра (35000 faith)\n    {\n      id: 'litany-of-dumned',\n      name: 'Litany of Dumned',\n      description: 'Странные секты просят вас их разрешить, вы не видите ничего плохого, Бог то един. Их песнопения странным образом слышны везде',\n      category: FAITH,\n      position: [6, 10],\n      requires: [],\n      state: 'locked',\n      visible: [ () => true], \n      available: [ (state) => state.spheres[FAITH].resources >= 10000, (state) => state.stage < 2],\n      icon: '🙇',\n      effects: [\n        (state) => { state.conquestSpeed += 2 },\n        (state) => { state.multipliers[FAITH] += 0.8 },\n        (state) => { state.multipliers[ECONOMY] += 2 },\n        (state) => { state.manualClickPower = -1 },\n      ],\n      laterEffects: {\n        10000: [\n          (state) => { state.resources -= 15000 },\n          (state) => { state.manualClickPower = 1 + (state.upgrades.find((upgrade) => upgrade.id === 'cursor')?.level || 0) },\n        ],\n      },\n      meta: {\n        effectDesctription: 'Скорость захвата <span class=\"positive\">+200%</span>, <br />Вера ускоряется на<span class=\"positive\">80%</span>, <br />Экономика ускоряется на<span class=\"positive\">200%</span> <br /><span class=\"negative\">Возможны побочные эффекты</span>',\n        requirementsDescription: '<span class=\"faith-req\">10000<span>🙏🏻 <br /> 15000₿',\n      }\n    },\n    // инопланетяне - 5, ктулху - 6, Христинский Бог/ВХ40к - 7\n    // 6 13\n    // 6 17\n    // 6 22\n    // 6 28\n    // 6 34\n    // 6 40\n    // 6 46\n    // щит земли через веру\n    // Эффект: Защищает Землю от космических угроз через коллективную молитву\n    // Требования: священный щит\n    // Стадия: поздняя игра (45000 faith)\n    // 6 52\n    // щит корабля, создает квантовую пену\n    // Эффект: Дает shipShield через веру вместо технологий\n    // Требования: развитая наука неотличима от магии\n    // Стадия: поздняя игра (stage >= 2, 70000 faith)\n    // 6 58\n    // 6 64\n    {\n      id: 'nothing',\n      name: '???',\n      description: '?????? ???????????? ??? ???? ????? ????? ??????',\n      category: FAITH,\n      position: [6, 64],\n      requires: [],\n      state: 'locked',\n      visible: [ () => true],\n      available: [ (state) => state.spheres[FAITH].resources >= 64000, (state) => state.resources >= 40000],\n      icon: '❔',\n      effects: [\n        (state) => { state.resources -= 40000 },\n        (state) => { state.secondStage.push('nothing') },\n      ],\n      meta: {\n        effectDesctription: '???????',\n        requirementsDescription: '<span class=\"faith-req\">64000<span>🙏🏻 <br /> 40000₿',\n      }\n    },\n    // 6 70\n    \n    \n    // масс контроль через вещество\n    // Эффект: Все население получает +1 к faith production, но -10% к science\n    // Требования: unortodox-experiment\n    // Стадия: средняя игра (18000 faith)\n    \n    // наука через веру\n    // Эффект: Faith resources конвертируются в science в соотношении 2:1\n    // Требования: extraterrestrial-search\n    // Стадия: средняя игра (15000 faith)\n    \n    // развитая наука неотличима от магии\n    // Эффект: Science и Faith ресурсы объединяются в общий пул \"Magic\"\n    // Требования: наука через веру + квантовые исследования из науки\n    // Стадия: поздняя игра (stage >= 2, 50000 combined)\n    \n    \n    \n    \n    \n    // жертвоприношение\n    // Эффект: Уничтожает 10% population, но дает +200% faith на 30 секунд\n    // Требования: песнопения проклятых\n    // Стадия: поздняя игра (30000 faith)\n    \n    // ритуал что с 5% вызовет миниигру\n    // Эффект: 5% шанс каждые 10 секунд запустить мини-игру с призом\n    // Требования: жертвоприношение\n    // Стадия: поздняя игра (42000 faith)\n    \n    // связанные с инопланетянами таланты\n    // узнать у инопланетян будущее - увеличить время эффекта от игр\n    // \n\n    // анилизатор ген - связь с наукой\n    // контакт\n    //  - есть антиэир ган - спейсинвейдерс\n    //    - победа - защита земли\n    //    - поражение - провал\n    //  - нет антиэир ган - торговля\n    // secondStage key contact\n    // won - invasion-won\n    {\n      id: 'trade-ftl',\n      name: 'Trade FTL',\n      description: 'Отправить ученых к прибывшим инопланетянам, возможно мы сможем получить их технологии',\n      category: FAITH,\n      position: [6, 50],// начало второго этапа, сразу после контакта\n      requires: [],\n      state: 'locked',  \n      visible: [ (state) => state.secondStage.includes('contact')],\n      available: [ (state) => state.spheres[FAITH].resources >= 50000, (state) => state.resources >= 50000],\n      icon: '🤝',\n      effects: [\n        (state) => { state.spheres[FAITH].resources += 1000 },\n        (state) => { state.resources -= 50000 },\n        (state) => { state.secondStage.push('FTL') },\n      ],\n    },\n    {\n      id: 'trade-shield',\n      name: 'Trade Shield',\n      description: 'Отправить ученых к прибывшим инопланетянам, возможно мы сможем получить их технологии',\n      category: FAITH,\n      position: [7, 50],// начало второго этапа, сразу после контакта\n      requires: [],\n      state: 'locked',  \n      visible: [ (state) => state.secondStage.includes('contact')],\n      available: [ (state) => state.spheres[FAITH].resources >= 50000, (state) => state.resources >= 50000],\n      icon: '🤝',\n      effects: [\n        (state) => { state.spheres[FAITH].resources += 1000 },\n        (state) => { state.resources -= 50000 },\n        (state) => { state.secondStage.push('FTL') },\n      ],\n    },\n    // \n    // пророк\n    // Эффект: Предсказывает будущие события за 30 секунд\n    // Требования: foresight\n    // Стадия: поздняя игра (stage >= 2, 75000 faith)\n    \n    // некрономикон -- должен появляться после таланта, что ничего не делает\n    // Эффект: Открывает доступ к запретным талантам, но случайные негативные эффекты\n    // Требования: любой талант с нулевым эффектом\n    // Стадия: поздняя игра (25000 faith, только при specific conditions)\n    \n    // Divine Intervention (Божественное вмешательство)\n    // Эффект: 1% шанс автоматически решить любую проблему или кризис\n    // Требования: hand-of-god\n    // Стадия: средняя игра (12000 faith)\n    \n    \n    // Эффект: Клики наносят \"урон\" себе, но дают x3 faith за каждый клик\n    // Требования: Divine Intervention\n    // Стадия: средняя игра (16000 faith)\n    \n    // Trinity Protocol (Протокол Троицы)\n    // Эффект: Объединяет faith, science, economy в тройной мультипликатор\n    // Требования: развитая наука неотличима от магии\n    // Стадия: поздняя игра (stage >= 2, 80000 combined resources)\n    \n    // Enlightened Mind (Просветленный разум)\n    // Эффект: +50% к скорости всех исследований, -25% к production скорости\n    // Требования: медитация (если есть)\n    // Стадия: средняя игра (14000 faith)\n    \n    // Karma Resonance (Кармический резонанс)\n    // Эффект: Хорошие действия дают бонусы, плохие - штрафы (кармическая система)\n    // Требования: Enlightened Mind\n    // Стадия: средняя игра (20000 faith)\n    \n    // Nirvana Gateway (Врата нирваны)\n    // Эффект: Обнуляет все ресурсы, но дает постоянный x10 мультипликатор ко всему\n    // Требования: Karma Resonance\n    // Стадия: поздняя игра (stage >= 2, 100000 faith)\n    \n    // Eldritch Whispers (Потусторонние шепоты)\n    // Эффект: +100% faith, но случайные \"безумные\" события каждые 60 секунд\n    // Требования: некрономикон\n    // Стадия: поздняя игра (35000 faith)\n    \n    // Forbidden Knowledge (Запретное знание)\n    // Эффект: Открывает доступ к \"запретным\" технологиям, но -20% к population happiness\n    // Требования: research-artifact\n    // Стадия: средняя игра (13000 faith)\n    \n    // Purity Seal (Печать чистоты)\n    // Эффект: Иммунитет к негативным эффектам других талантов веры\n    // Требования: sacred stigmata\n    // Стадия: поздняя игра (28000 faith)\n    \n    // Faith and Fire (Вера и пламя)\n    // Эффект: +75% faith production, но +50% шанс военных конфликтов\n    // Требования: жертвоприношение\n    // Стадия: поздняя игра (38000 faith)\n    \n    // Ancestral Spirits (Духи предков)\n    // Эффект: Мертвые дают бонусы к производству (каждая 1000 lost population = +1% к всему)\n    // Требования: Genetic-memory\n    // Стадия: поздняя игра (stage >= 2, 55000 faith)\n    \n    // Divine Mandate (Божественный мандат)\n    // Эффект: Все решения принимаются \"свыше\" - автоматизация управления\n    // Требования: Trinity Protocol\n    // Стадия: поздняя игра (stage >= 2, 90000 faith)\n    \n    // Celestial Convergence (Небесная конвергенция)\n    // Эффект: Когда планеты выстраиваются, все мультипликаторы x5 на 30 секунд\n    // Требования: пророк\n    // Стадия: поздняя игра (stage >= 2, 85000 faith)\n    \n    // Doublethink Protocol (Протокол двоемыслия)\n    // Эффект: Можно верить в противоположные вещи одновременно - убирает конфликты между талантами\n    // Требования: Forbidden Knowledge\n    // Стадия: поздняя игра (32000 faith)\n    \n    \n    // Эффект: Игнорирует физические ограничения - ресурсы могут быть отрицательными\n    // Требования: Doublethink Protocol\n    // Стадия: поздняя игра (45000 faith)\n    \n    // Echo Chamber (Эхо-камера)\n    // Эффект: Каждое действие повторяется автоматически через 10 секунд\n    // Требования: масс контроль через вещество\n    // Стадия: средняя игра (22000 faith)\n    \n    \n    // Эффект: Скрывает негативную информацию, но дает +100% faith от позитивных событий\n    // Требования: священный щит\n    // Стадия: средняя игра (17000 faith)\n    \n    // Gaslight Reality (Искажение реальности)\n    // Эффект: Все статистики показывают +50% от реального значения\n    // Требования: Willful Blindness\n    // Стадия: поздняя игра (26000 faith)\n    \n    // Memory Hole (Дыра памяти)\n    // Эффект: Стирает память о негативных событиях, но они все равно влияют\n    // Требования: Gaslight Reality\n    // Стадия: поздняя игра (34000 faith)\n    \n    // Ideological Purity (Идеологическая чистота)\n    // Эффект: +200% faith, но блокирует доступ к science и economy талантам\n    // Требования: Faith and Fire\n    // Стадия: поздняя игра (50000 faith)\n    \n    \n    // Эффект: x3 ко всем faith эффектам, но -50% к рациональному мышлению\n    // Требования: Ideological Purity\n    // Стадия: поздняя игра (65000 faith)\n    \n    // Blind Devotion (Слепая преданность)\n    // Эффект: Автоматически принимает все \"божественные\" предложения без выбора\n    // Требования: Zealotry Overdrive\n    // Стадия: поздняя игра (75000 faith)\n    \n    // Collective Delusion (Коллективное заблуждение)\n    // Эффект: Все население верит в одну и ту же ложь, дает massive faith bonus\n    // Требования: Echo Chamber + Memory Hole\n    // Стадия: поздняя игра (stage >= 2, 95000 faith)\n    \n    // When Stars Are Right (Когда звезды правильны)\n    // Эффект: В определенные астрономические моменты все эффекты x10\n    // Требования: Celestial Convergence\n    // Стадия: поздняя игра (stage >= 2, 88000 faith)\n    \n    // The Color Between (Цвет между)\n    // Эффект: Открывает новый тип ресурса \"Impossible Color\", видимый только верующим\n    // Требования: некрономикон\n    // Стадия: поздняя игра (40000 faith)\n    \n    // Dreaming Geometry (Дремлющая геометрия)\n    // Эффект: Здания строятся в невозможных углах, +200% эффективность\n    // Требования: The Color Between\n    // Стадия: поздняя игра (52000 faith)\n    \n    // Unspeakable Wisdom (Неописуемая мудрость)\n    // Эффект: Знание, которое нельзя выразить словами, дает бонусы ко всему, но drive people mad\n    // Требования: Eldritch Whispers\n    // Стадия: поздняя игра (48000 faith)\n    \n    // Beyond Human Mind (За пределами человеческого разума)\n    // Эффект: Превосходит человеческие ограничения, убирает все caps с производства\n    // Требования: Unspeakable Wisdom\n    // Стадия: поздняя игра (67000 faith)\n    \n    // The Space Between Dreams (Пространство между снами)\n    // Эффект: Доступ к альтернативной реальности где действуют другие правила\n    // Требования: Dreaming Geometry\n    // Стадия: поздняя игра (58000 faith)\n    \n    // That Which Sleeps (То, что спит)\n    // Эффект: Древняя сила дремлет, медленно просыпаясь и меняя реальность\n    // Требования: Beyond Human Mind\n    // Стадия: поздняя игра (stage >= 2, 78000 faith)\n    \n    // Primordial Awakening (Изначальное пробуждение)\n    // Эффект: Пробуждает That Which Sleeps, кардинально меняет все правила игры\n    // Требования: That Which Sleeps\n    // Стадия: финальная игра (stage >= 2, 120000 faith)\n    \n    // Non-Euclidean Faith (Неевклидова вера)\n    // Эффект: Вера существует в пространстве с невозможной геометрией\n    // Требования: The Space Between Dreams\n    // Стадия: поздняя игра (62000 faith)\n    \n    // Stellar Aberration (Звездная аберрация)\n    // Эффект: Звезды светят неправильным светом, change cosmic rules\n    // Требования: When Stars Are Right\n    // Стадия: поздняя игра (stage >= 2, 95000 faith)\n    \n    // Threshold of Madness (Порог безумия)\n    // Эффект: Crossing the line between sanity and madness grants ultimate power\n    // Требования: Non-Euclidean Faith + Stellar Aberration\n    // Стадия: финальная игра (stage >= 2, 150000 faith)\n    \n    // The Void Between Worlds (Пустота между мирами)\n    // Эффект: Доступ к пустому пространству между реальностями\n    // Требования: Threshold of Madness\n    // Стадия: финальная игра (stage >= 2, 200000 faith)\n    \n    // quantum love\n    // Эффект: Любовь существует в суперпозиции - одновременно везде и нигде\n    // Требования: Trinity Protocol + quantum research из науки\n    // Стадия: поздняя игра (stage >= 2, 85000 faith + 60000 science)\n\n    {\n        id: 'hand-of-god',\n        name: 'Hand of God',\n        description: 'Ваши ручные клики, дают очки в сфере веры',\n        category: FAITH,\n        position: [6, 2],\n        requires: [],\n        state: 'locked',\n        visible: [ () => true],\n        available: [ (state) => state.spheres[FAITH].resources >= 2000, (state) => state.stage < 2],\n        icon: '🙏🏻',\n        effects: [\n          (state) => { \n            state.clickEffects[FAITH] += 1;\n          }\n        ],\n        meta: {\n          effectDesctription: 'Ваши клики дают столько же очков веры, сколько ресурсов',\n          requirementsDescription: '<span class=\"faith-req\">2000<span>🙏🏻',\n        }\n      },// талант позже, должен удалять этот эффект, давая шанс на что-то другое\n      \n      // Reality is Relative (Реальность относительна)\n      // 5 3\n      // замедлить веру, дать науки\n      // отключает 5 7\n      {\n        id: 'reality-is-relative',\n        name: 'Reality is Relative',\n        description: 'Вера тоже относительна',\n        category: FAITH,\n        position: [5, 3],\n        requires: [], \n        state: 'locked',\n        visible: [ (state) => {\n          return state.talents.find(t => t.id === 'sacred-stigmata')?.state !== 'active';\n        }],\n        available: [ (state) => state.spheres[FAITH].resources >= 3000, (state) => state.stage < 2],\n        icon: '🔄',\n        effects: [\n          (state) => { state.multipliers[FAITH] -= 0.1 },\n          (state) => { state.spheres[SCIENCE].resources += 8000 }\n        ],\n        meta: {\n          effectDesctription: 'Вера замедляется на <span class=\"negative\">-10%</span>, <br />Наука увеличивается на <span class=\"positive\">8000</span>, <br />Взаимоисключающий с <span class=\"project\">Священные стигматы</span>',\n          requirementsDescription: '<span class=\"faith-req\">3000<span>🙏🏻',\n        }\n      },\n\n      // Sacred Stigmata (Священные стигматы)      \n      // 5 7\n      // замедлить веру, дать экономики\n      // отключает 5 3\n      {\n        id: 'sacred-stigmata',\n        name: 'Sacred Stigmata',\n        description: 'Священные стигматы',\n        category: FAITH,\n        position: [7, 3],\n        requires: [],\n        state: 'locked',\n        visible: [ (state) => {\n          return state.talents.find(t => t.id === 'reality-is-relative')?.state !== 'active';\n        }],\n        available: [ (state) => state.spheres[FAITH].resources >= 3000, (state) => state.stage < 2],  \n        icon: '💉',\n        effects: [\n          (state) => { state.multipliers[FAITH] -= 0.1 },\n          (state) => { state.spheres[ECONOMY].resources += 8000 }\n        ],  \n        meta: {\n          effectDesctription: 'Вера замедляется на <span class=\"negative\">-10%</span>, <br />Экономика увеличивается на <span class=\"positive\">8000</span>, <br />Взаимоисключающий с <span class=\"project\">Реальность относительна</span>',\n          requirementsDescription: '<span class=\"faith-req\">3000<span>🙏🏻',\n        }\n      },\n      \n      \n\n      // Willful Blindness (Добровольная слепота)\n      // 7 3\n      // отнять из веры, дать денег\n      // отключает 7 7\n      {\n        id: 'willful-blindness',\n        name: 'Willful Blindness',\n        description: 'Ваши монахи дают обед не видеть окружающий мир, надеясь получить благословение',\n        category: FAITH,\n        position: [5, 7],\n        requires: [], \n        state: 'locked',\n        visible: [ (state) => {\n          return state.talents.find(t => t.id === 'sacred-shield')?.state !== 'active';\n        }],\n        available: [ (state) => state.spheres[FAITH].resources >= 7000, (state) => state.stage < 2],  \n        icon: '👁️',\n        effects: [\n          (state) => { state.multipliers[FAITH] -= 0.1 },\n          (state) => { state.resources += 15000 }\n        ],\n        meta: {\n          effectDesctription: 'Вера замедляется на <span class=\"negative\">-10%</span>, <br />Ресурсы увеличиваются на <span class=\"positive\">15000</span>, <br />Взаимоисключающий с <span class=\"project\">Священный щит</span>',\n          requirementsDescription: '<span class=\"faith-req\">7000<span>🙏🏻',\n          flavorText: 'Не выдержав несовершенства мира, закрыл я очи',\n        }\n      },\n\n\n      // священный щит\n      // 7 7\n      // отнять из веры, дать захват\n      // отключает 7 3\n      {\n        id: 'sacred-shield',\n        name: 'Sacred Shield',\n        description: 'Священный щит',\n        category: FAITH,\n        position: [7, 7],\n        requires: [],\n        state: 'locked',\n        visible: [ (state) => {\n          return state.talents.find(t => t.id === 'willful-blindness')?.state !== 'active';\n        }],\n        available: [ (state) => state.spheres[FAITH].resources >= 7000, (state) => state.stage < 2],  \n        icon: '🛡️',\n        effects: [\n          (state) => { state.multipliers[FAITH] -= 0.1 },\n          (state) => { state.spheres[ECONOMY].resources += 8000 }\n        ],\n        meta: { \n          effectDesctription: 'Вера замедляется на <span class=\"negative\">-10%</span>, <br />Экономика увеличивается на <span class=\"positive\">8000</span>, <br />Взаимоисключающий с <span class=\"project\">Добровольная слепота</span>',\n          requirementsDescription: '<span class=\"faith-req\">7000<span>🙏🏻',\n        }\n      },  \n\n      // Zealotry Overdrive (Фанатичный овердрайв)\n      // 6 10\n      // отдать часть ресурсов и скорости на время, получить бонус через время\n      {\n        id: 'zealotry-overdrive',\n        name: 'Zealotry Overdrive',\n        description: 'Вы выделяете своим монахам земные блага, за что они вам невероятно благодарны',\n        category: FAITH,\n        position: [6, 4],\n        requires: [], \n        state: 'locked',\n        visible: [ () => true],\n        available: [ (state) => state.spheres[FAITH].resources >= 4000, (state) => state.stage < 2],\n        icon: '🔋',\n        effects: [\n          (state) => { state.multipliers[FAITH] -= 0.50 },\n          (state) => { state.resources -= 2000 },\n          \n        ],\n        laterEffects: {\n          120000 : [\n            (state) => { \n              state.multipliers[FAITH] += 0.50;\n              state.resources += 10000;\n              // get missionary upgrade lvl\n              const missionaryUpgrade = state.upgrades.find((upgrade) => upgrade.id === 'missionary');\n              if (missionaryUpgrade) {\n                state.multipliers[FAITH] += missionaryUpgrade.level * 0.05;\n              }\n            }\n          ]\n        },\n        meta: {\n          effectDesctription: 'Вера увеличивается на <span class=\"positive\">50%</span>, <br />Ресурсы уменьшаются на <span class=\"negative\">10000</span>',\n          requirementsDescription: '<span class=\"faith-req\">10000<span>🙏🏻',\n          popup: ['<span class=\"negative\">-2000₿</span>'],\n          laterPopup: {\n            120000 : ['10000₿']\n          },\n        }\n      },\n\n      {\n        id: 'crusade',\n        name: 'Crusade',\n        description: 'Вся земля должна быть объединена под единым Богом',\n        category: FAITH,\n        position: [6, 5],\n        requires: [],\n        state: 'locked',\n        visible: [ () => true],\n        available: [ (state) => state.spheres[FAITH].resources >= 5000, (state) => state.stage < 2],\n        icon: '☦️',\n        effects: [\n          (state) => {\n            let max = 100; \n            COUNTRY_NAMES.forEach((country) => {\n              if(state.conqueredCountries.includes(country) && max > 0) {\n                return;\n              }\n              state.conqueredCountries.push(country);\n              max--;\n            })\n          },\n          (state) => {\n            state.conquestSpeed = 0.1;\n          }\n        ],\n        meta: {\n          effectDesctription: 'Скорость захвата уменьшается до <span class=\"negative\">10%</span>, <br />100 стран будут захвачены',\n          requirementsDescription: '<span class=\"faith-req\">10000<span>🙏🏻',\n        }\n      },\n      {\n        id: 'SHO',\n        name: 'Special Holy Operation',\n        description: 'Огонь по блядкскому хутору, БЭУуу',\n        category: FAITH,\n        position: [7, 5],\n        requires: [],\n        state: 'locked',\n        visible: [ (state) => state.seed > 0.41 && state.seed < 0.45 && state.selectedCountry === 'Russia' ],\n        available: [ (state) => state.spheres[FAITH].resources >= 5000, (state) => state.stage < 2],\n        icon: 'Z',\n        effects: [\n          (state) => {\n            state.conqueredCountries.push('Ukraine');\n          }\n        ],\n        meta: {\n          effectDesctription: 'Запуск проекта <span class=\"project\">Шершавый джунжурик</span>',\n          requirementsDescription: '<span class=\"faith-req\">10000<span>🙏🏻',\n          flavorText: 'Домашний',\n        }\n      },\n\n\n\n      {\n        id: 'research-artifact',\n        name: 'Research Artifact',\n        description: 'Создать группу монахов, что будут искать древние священные артефакты',\n        category: FAITH,\n        position: [6, 6],\n        requires: [],\n        state: 'locked',\n        visible: [ () => true],\n        available: [ (state) => state.spheres[FAITH].resources >= 6000, (state) => state.stage < 2],\n        icon: '🧬',\n        effects: [\n          (state) => { state.activeProjects.push({id: 'research-artifact', status: 'in_progress', progress: 0}) }\n        ],\n        meta: {\n          effectDesctription: 'Запуск проекта <span class=\"project\">Исследование древних священных артефактов</span>',\n          requirementsDescription: '<span class=\"faith-req\">6000<span>🙏🏻',\n        }\n      },\n      {\n        id: 'extraterrestrial-search',\n        name: 'Extraterrestrial Search',\n        description: 'Все радары земли направить на одно, поиск внеземных цивилизаций',\n        category: FAITH,\n        position: [6, 8],\n        requires: [],\n        state: 'locked',\n        visible: [ () => true],\n        available: [ \n          (state) => state.spheres[FAITH].resources >= 8000,\n          (state) => state.spheres[SCIENCE].resources >= 4000,\n          (state) => state.stage < 2,\n        ],\n        icon: '🌌',\n        effects: [\n          (state) => {state.multipliers[SCIENCE] -= 0.1},\n          (state) => { state.activeProjects.push({id: 'extraterrestrial-search', status: 'in_progress', progress: 0}) } \n        ],\n        meta: {\n          effectDesctription: 'Запуск проекта <span class=\"project\">Исследование внеземных цивилизаций</span>, <br />Наука замедляется на <span class=\"negative\">-10%</span>',\n          requirementsDescription: '<span class=\"faith-req\">8000<span>🙏🏻, <br /> <span class=\"science-req\">4000<span>🧬',\n        }\n      },\n      {\n        id: 'unortodox-experiment',\n        name: 'Unortodox Experiment',\n        description: 'Используя экспериментальные вещества из котокомб Ватикана, ваши Волхвы расширяют сознание',\n        category: FAITH,\n        position: [6, 12],\n        requires: [{\n          talentId: 'extraterrestrial-search',\n        }],\n        state: 'locked',\n        visible: [ (state) => {\n            return true;\n          return !!state.secondStage.find((item) => item.id === 'contact');\n        }],\n        available: [ (state) => state.spheres[FAITH].resources >= 12000, (state) => state.stage < 2],\n        icon: '🧊',\n        effects: [\n          (state) => { state.multipliers[FAITH] += 0.50 },\n          (state) => { state.secondStage.push({\n            id: 'spice',\n            name: 'Spice',\n            description: 'Вы можете управлять пространством',\n            icon: '🚀',\n          }) }\n        ],\n        meta: {\n          effectDesctription: 'Запуск проекта <span class=\"project\">Исследование внеземных цивилизаций</span>',\n          requirementsDescription: '<span class=\"faith-req\">12000<span>🙏🏻, <br /> <span class=\"science-req\">4000<span>🧬',\n        }\n      },\n      {\n        id: 'teleportation',// stargate ref\n        name: 'Teleportation',\n        description: 'Вы открываете телепортацию, вы можете создавать порталы',\n        category: FAITH,\n        position: [6, 50],\n        requires: [],\n        state: 'locked',\n        visible: [ (state) => {\n          if (state.secondStage.find((item) => item.id === 'holygrail')) {// TODO: check artefact name\n            return Math.random() < 0.90;\n          }\n          return state.seed < 0.05;\n        },\n          (state) => state.stage >= 2\n        ],\n        available: [ (state) => state.spheres[FAITH].resources >= 22000, (state) => state.stage < 2],\n        icon: '🚀',\n        effects: [\n          (state) => { state.secondStage.push({\n            id: 'teleportation',\n            name: 'Teleportation',\n            description: 'Вы открываете телепортацию, вы можете создавать порталы',\n            icon: '🚀',\n          }) },\n        ],\n        meta: {\n          effectDesctription: 'Запуск проекта <span class=\"project\">Исследования телепортации</span>',\n          requirementsDescription: '<span class=\"faith-req\">22000<span>🙏🏻',\n        }\n      },\n      {\n        id: 'strange-dust',\n        name: 'Strange dust',\n        description: 'Удивительное вещество, может ли оно стать ответом на наши вопросы? Проведем эксперименты',\n        category: FAITH,\n        position: [6, 24],\n        requires: [],\n        state: 'locked',\n        visible: [ (state) => {\n          return state.seed > 0.05 && state.seed < 0.25;\n        }],\n        available: [ (state) => state.spheres[FAITH].resources >= 24000, (state) => state.stage < 2],\n        icon: '🔥',\n        effects: [\n          (state) => { \n            state.activeProjects.push({\n              id: 'strange-dust',\n              progress: 0,\n              status: 'in_progress',\n            })\n          },\n        ],\n        meta: {\n          effectDesctription: 'Запуск проекта <span class=\"project\">Исследование удивительного вещества</span>',\n          requirementsDescription: '<span class=\"faith-req\">24000<span>🙏🏻',\n        }\n      },\n      {\n        id: 'Genetic-memory',\n        name: 'Genetic Memory',\n        description: 'Благодаря специи, ваши провидцы извлекают знания предков',\n        category: FAITH,\n        position: [6, 60],\n        requires: [],\n        state: 'locked',\n        visible: [ (state) => {\n          return state.secondStage.find((item) => item.id === 'spice');\n        },\n          (state) => state.stage >= 2\n        ],\n        available: [ (state) => state.spheres[FAITH].resources >= 60000],\n        icon: '🌌',\n        effects: [\n          (state) => { \n            // TODO: add postGame effect\n            state.multipliers[FAITH] += 0.5;\n          },\n        ],\n        meta: {\n          effectDesctription: 'Скорость веры <span class=\"positive\">+50%</span>',\n          requirementsDescription: '<span class=\"faith-req\">60000<span>🙏🏻',\n        }\n      },\n      {\n        id: 'foresight',\n        name: 'Foresight',\n        description: 'Вы можете предвидеть будущие проблемы',\n        category: FAITH,\n        position: [6, 65],  \n        requires: [],\n        state: 'locked',\n        visible: [ (state) => {\n          return state.secondStage.find((item) => item.id === 'spice');\n        },\n          (state) => state.stage >= 2\n        ],\n        available: [ (state) => state.spheres[FAITH].resources >= 65000],\n        icon: '🌌',\n        effects: [\n          (state) => { \n            // TODO: add more time for problems\n            state.multipliers[FAITH] += 0.5;\n          },\n        ],\n        meta: {\n          effectDesctription: 'Скорость веры <span class=\"positive\">+50%</span>',\n          requirementsDescription: '<span class=\"faith-req\">65000<span>🙏🏻',\n        }\n      },\n      {\n        id: 'obsidian-portal',\n        name: 'Портал в неизвестность',\n        description: 'Вы можете открывать порталы в другое измерение, чтобы перемещаться между планетами',\n        category: FAITH,\n        position: [6, 55],\n        requires: [],\n        state: 'locked',\n        visible: [ (state) => {\n          return state.secondStage.find((item) => item.id === 'dark-matter');\n        },\n          (state) => state.stage >= 2\n        ],\n        available: [ (state) => state.spheres[ECONOMY].resources >= 55000],\n        icon: '🌌',\n        effects: [  \n          (state) => {  \n            state.activeEvents.push({\n              id: 'open-planet',\n              position: [0,0],\n            })\n          },\n          (state) => {\n            state.cosmicCivilization.conquest = true;\n            state.cosmicCivilization.FTL = true;\n          },\n        ],\n        meta: {\n          effectDesctription: 'Запуск проекта <span class=\"project\">Исследование портала в неизвестность</span>',\n          requirementsDescription: '<span class=\"economy-req\">55000<span>💸',\n        }\n      },\n      {\n        id: 'xenophilia',\n        name: 'Сотрудничество с инопланетянами',\n        description: 'Взаимодействие с инопланетянами оказывает плодотворный эффект',\n        category: FAITH,\n        position: [6, 90],\n        requires: [],\n        state: 'locked',\n        visible: [ (state) => {\n          return state.secondStage.find((item) => item.id === 'contact');\n        },\n          (state) => state.stage >= 2\n        ],\n        available: [ (state) => state.spheres[FAITH].resources >= 90000],\n        icon: '🌌',\n        effects: [\n          (state) => {  \n            state.multipliers[FAITH] += 1;\n            state.multipliers[ECONOMY] += 1;\n            state.multipliers[SCIENCE] += 1;\n            state.multipliers[COMMON] += 7;\n          },\n        ],\n        meta: {\n          effectDesctription: 'Скорость веры <span class=\"positive\">+1</span>,<br />Скорость экономики <span class=\"positive\">+1</span>,<br />Скорость науки <span class=\"positive\">+1</span>,<br />Общая скорость <span class=\"positive\">+7</span>',\n          requirementsDescription: '<span class=\"faith-req\">90000<span>🙏🏻',\n        }\n      },\n      {\n        id: 'holy-shield',\n        name: 'Священный щит',\n        description: 'Из подвалов Антиохии, вышли священники, заявляют что могут создать щит, защищающий любой корабль от космического мусора и излучения',\n        category: FAITH,\n        position: [6, 85],\n        requires: [],\n        state: 'locked',\n        visible: [ (state) => {\n          return state.secondStage.find((item) => item.id === 'contact');\n        },\n          (state) => state.stage >= 2\n        ],\n        available: [ (state) => state.spheres[FAITH].resources >= 85000],\n        icon: '🌌',\n        effects: [\n          (state) => {  \n            state.cosmicCivilization.shipShield = true;\n          },\n        ],\n        meta: {\n          effectDesctription: 'Запуск проекта <span class=\"project\">Исследование священного щита</span>',\n          requirementsDescription: '<span class=\"faith-req\">85000<span>🙏🏻',\n        }\n      },\n]","import { MANUAL, COMMON, FAITH, SCIENCE, ECONOMY } from \"./app/constants\";\r\nimport { Upgrade, GameState } from \"./types\";\r\n\r\nexport const UPGRADES: Upgrade[] = [\r\n    // Базовые апгрейды всегда видимы\r\n    { id: 'cursor',\r\n      level: 0,\r\n      visible: (state: GameState) => state.total >= 1000,\r\n      sphere: MANUAL,\r\n      available: true,\r\n      name: 'Cursor',\r\n      icon: '👆',\r\n      cost: 100,\r\n      growthRate: 1.15,\r\n      CPS: 1,\r\n      linearIncrement: 500,\r\n      transitionLevel: 50 },\r\n    \r\n    // === COMMON АПГРЕЙДЫ ===\r\n    { id: 'hand',\r\n      level: 0,\r\n      visible: true, // Базовый апгрейд, всегда видимый\r\n      sphere: COMMON,\r\n      available: true,\r\n      name: 'Hand',\r\n      icon: '💅',\r\n      cost: 10, // Базовая стоимость\r\n      growthRate: 1.15,\r\n      CPS: 0.3,\r\n      linearIncrement: 500,\r\n      transitionLevel: 50 },\r\n    { id: 'factory',\r\n      level: 0,\r\n      visible: (state: GameState) => state.total >= 100, \r\n      sphere: COMMON,\r\n      available: true,\r\n      name: 'Factory',\r\n      icon: '🏭',\r\n      cost: 100, \r\n      growthRate: 1.15,\r\n      CPS: 1.5,\r\n      linearIncrement: 500,\r\n      transitionLevel: 50 },\r\n    { id: 'drone',\r\n      level: 0,\r\n      visible: (state: GameState) => state.total >= 500, \r\n      sphere: COMMON,\r\n      available: true,\r\n      name: 'Drone',\r\n      icon: '🤖',\r\n      cost: 500, \r\n      growthRate: 1.15,\r\n      CPS: 3.6,\r\n      linearIncrement: 500,\r\n      transitionLevel: 50 },\r\n    { id: 'quantum_forge',\r\n      level: 0,\r\n      visible: (state: GameState) => state.total >= 1000, \r\n      sphere: COMMON,\r\n      available: true,\r\n      name: 'Quantum Forge',\r\n      icon: '⚛️',\r\n      cost: 1000, // 2.5 * 62\r\n      growthRate: 1.15,\r\n      CPS: 9,\r\n      linearIncrement: 500,\r\n      transitionLevel: 50 },\r\n    \r\n    \r\n    \r\n    // === ECONOMY АПГРЕЙДЫ ===\r\n    { id: 'market',\r\n      level: 0,\r\n      visible: (state: GameState) => state.total >= 100,\r\n      sphere: ECONOMY,\r\n      available: true,\r\n      name: 'Market',\r\n      icon: '🏪',\r\n      cost: 20, // Базовая стоимость\r\n      growthRate: 1.15,\r\n      CPS: 1.5,\r\n      linearIncrement: 500,\r\n      transitionLevel: 50 },\r\n    { id: 'bank',\r\n      level: 0,\r\n      visible: (state: GameState) => {\r\n        return state.total >= 100 - 20 &&\r\n        state.spheres[ECONOMY].resources >= 420\r\n      }, // 5 * 20 (стоимость market)\r\n      sphere: ECONOMY,\r\n      available: true,\r\n      name: 'Bank',\r\n      icon: '🏦',\r\n      cost: 90, // 2.5 * 20\r\n      growthRate: 1.15,\r\n      CPS: 4,\r\n      linearIncrement: 500,\r\n      transitionLevel: 50 },\r\n    { id: 'stock_exchange',\r\n      level: 0,\r\n      visible: (state: GameState) => {\r\n        return state.total >= 250 - 50 &&\r\n        state.spheres[ECONOMY].resources >= 1600\r\n      }, // 5 * 50 (стоимость bank)\r\n      sphere: ECONOMY,\r\n      available: true,\r\n      name: 'Stock Exchange',\r\n      icon: '📈',\r\n      cost: 250, // 2.5 * 50\r\n      growthRate: 1.15,\r\n      CPS: 10,\r\n      linearIncrement: 500,\r\n      transitionLevel: 50 },\r\n    { id: 'offshore_platform',\r\n      level: 0,\r\n      visible: (state: GameState) => {\r\n        return state.total >= 625 - 125 &&\r\n        state.spheres[ECONOMY].resources >= 4400\r\n      }, // 5 * 125 (стоимость stock_exchange)\r\n      sphere: ECONOMY,\r\n      available: true,\r\n      name: 'Offshore Platform',\r\n      icon: '🏗️',\r\n      cost: 400, // 2.5 * 125\r\n      growthRate: 1.15,\r\n      CPS: 25,\r\n      linearIncrement: 500,\r\n      transitionLevel: 50 },\r\n    { id: 'galactic_trade_hub',\r\n      level: 0,\r\n      visible: (state: GameState) => {\r\n        return state.total >= 1560 - 312 &&\r\n        state.spheres[ECONOMY].resources >= 11200\r\n      }, // 5 * 312 (стоимость offshore_platform)\r\n      sphere: ECONOMY,\r\n      available: true,\r\n      name: 'Galactic Trade Hub',\r\n      icon: '🌌',\r\n      cost: 1700, // 2.5 * 312\r\n      growthRate: 1.15,\r\n      CPS: 150,\r\n      linearIncrement: 500,\r\n      transitionLevel: 50 },\r\n\r\n      // === SCIENCE АПГРЕЙДЫ ===\r\n    { id: 'lab',\r\n      level: 0,\r\n      visible: (state: GameState) => state.total >= 100,\r\n      sphere: SCIENCE,\r\n      available: true,\r\n      name: 'Lab',\r\n      icon: '🧪',\r\n      cost: 30, // Базовая стоимость\r\n      growthRate: 1.6,\r\n      CPS: 1,\r\n      linearIncrement: 500,\r\n      transitionLevel: 50 },\r\n    { id: 'satellite',\r\n      level: 0,\r\n      visible: (state: GameState) => {\r\n        return state.total >= 75 - 15 &&\r\n        state.spheres[SCIENCE].resources >= 75 \r\n      }, // 5 * 15 (стоимость lab)\r\n      sphere: SCIENCE,\r\n      available: true,\r\n      name: 'Satellite',\r\n      icon: '🛰️',\r\n      cost: 120, // 2.5 * 15\r\n      growthRate: 1.18,\r\n      CPS: 2,\r\n      linearIncrement: 500,\r\n      transitionLevel: 50 },\r\n    { id: 'ai_core',\r\n      level: 0,\r\n      visible: (state: GameState) => {\r\n        return state.total >= 190 - 38 &&\r\n        state.spheres[SCIENCE].resources >= 650\r\n      }, // 5 * 38 (стоимость satellite)\r\n      sphere: SCIENCE,\r\n      available: true,\r\n      name: 'AI Core',\r\n      icon: '🧠',\r\n      cost: 260, // 2.5 * 38\r\n      growthRate: 1.15,\r\n      CPS: 6,\r\n      linearIncrement: 2840,\r\n      transitionLevel: 50 },\r\n    { id: 'quantum_computer',\r\n      level: 0,\r\n      visible: (state: GameState) => {\r\n        return state.total >= 475 - 95 &&\r\n        state.spheres[SCIENCE].resources >= 2000\r\n      }, // 5 * 95 (стоимость ai_core)\r\n      sphere: SCIENCE,\r\n      available: true,\r\n      name: 'Quantum Computer',\r\n      icon: '💻',\r\n      cost: 350, // 2.5 * 95\r\n      growthRate: 2,\r\n      CPS: 16,\r\n      linearIncrement: 50000,\r\n      transitionLevel: 50 },\r\n    { id: 'space_telescope',\r\n      level: 0,\r\n      visible: (state: GameState) => {\r\n        return state.total >= 1190 - 238 &&\r\n        state.spheres[SCIENCE].resources >= 9000\r\n      }, // 5 * 238 (стоимость quantum_computer)\r\n      sphere: SCIENCE,\r\n      available: true,\r\n      name: 'Space Telescope',\r\n      icon: '🔭',\r\n      cost: 800, // 2.5 * 238\r\n      growthRate: 4,\r\n      CPS: 75,\r\n      linearIncrement: 125000,\r\n      transitionLevel: 50 },\r\n    { id: 'entropy_reducer',\r\n      level: 0,\r\n      visible: (state: GameState) => {\r\n        return state.total >= 20000 - 4000 &&\r\n        state.spheres[SCIENCE].resources >= 20000\r\n      }, \r\n      sphere: SCIENCE,\r\n      available: true,\r\n      name: 'Entropy Reducer',\r\n      icon: '🔗',\r\n      cost: 10000, \r\n      growthRate: 10,\r\n      CPS: 1000,\r\n      linearIncrement: 500000,\r\n      transitionLevel: 50 },\r\n    \r\n    // === FAITH АПГРЕЙДЫ ===\r\n    { id: 'missionary',\r\n      level: 0,\r\n      visible: (state: GameState) => state.total >= 100,\r\n      sphere: FAITH,\r\n      available: true,\r\n      name: 'Missionary',\r\n      icon: '🙏',\r\n      cost: 2, // Базовая стоимость\r\n      growthRate: 1.3,\r\n      CPS: 1,\r\n      linearIncrement: 500,\r\n      transitionLevel: 50 },\r\n    { id: 'temple',\r\n      level: 0,\r\n      visible: (state: GameState) => {\r\n        return state.total >= 10 - 2 &&\r\n        state.spheres[FAITH].resources >= 500\r\n      }, // 5 * 2 (стоимость missionary)\r\n      sphere: FAITH,\r\n      available: true,\r\n      name: 'Temple',\r\n      icon: '🛕',\r\n      cost: 200, // 2.5 * 2\r\n      growthRate: 1.1,\r\n      CPS: 2,\r\n      linearIncrement: 1200,\r\n      transitionLevel: 50 },\r\n    { id: 'crusader',\r\n      level: 0,\r\n      visible: (state: GameState) => {\r\n        return state.total >= 25 - 5 &&\r\n        state.spheres[FAITH].resources >= 2000\r\n      }, // 5 * 5 (стоимость temple)\r\n      sphere: FAITH,\r\n      available: true,\r\n      name: 'Crusader',\r\n      icon: '⚔️',\r\n      cost: 400, // 2.5 * 5\r\n      growthRate: 1.2,\r\n      CPS: 5,\r\n      linearIncrement: 500,\r\n      transitionLevel: 50 },\r\n    { id: 'oracle',\r\n      level: 0,\r\n      visible: (state: GameState) => {\r\n        return state.total >= 60 - 12 &&\r\n        state.spheres[FAITH].resources >= 5000\r\n      }, // 5 * 12 (стоимость crusader)\r\n      sphere: FAITH,\r\n      available: true,\r\n      name: 'Oracle',\r\n      icon: '👁️',\r\n      cost: 2000, // 2.5 * 12\r\n      growthRate: 1.5,\r\n      CPS: 100,\r\n      linearIncrement: 500,\r\n      transitionLevel: 50 },\r\n    { id: 'cathedral',\r\n      level: 0,\r\n      visible: (state: GameState) => {\r\n        return state.total >= 150 - 30 &&\r\n        state.spheres[FAITH].resources >= 10000\r\n      }, // 5 * 30 (стоимость oracle)\r\n      sphere: FAITH,\r\n      available: true,\r\n      name: 'Cathedral',\r\n      icon: '⛪',\r\n      cost: 5000, // 2.5 * 30\r\n      growthRate: 1.1,\r\n      CPS: 150,\r\n      linearIncrement: 500,\r\n      transitionLevel: 50 },\r\n  ]\r\n","import { Quest, GameState } from './types';\r\nimport { ECONOMY, FAITH, SCIENCE } from './app/constants';\r\n\r\nexport const QUESTS: Record<string, Quest> = {\r\n  first_upgrade: {\r\n    id: 'first_upgrade',\r\n    name: 'Приобрести апгрейд автодобычи',\r\n    description: 'Накопите 10 ресурсов и купите первое улучшение',\r\n    progress: 0,\r\n    maxProgress: 10,\r\n    isCompleted: false,\r\n    isVisible: true,\r\n    checkProgress: (state: GameState) => {\r\n      // Прогресс основан на общем количестве ресурсов, но ограничен 10\r\n      return Math.min(state.total, 10);\r\n    },\r\n    checkVisibility: (state: GameState) => {\r\n      // Квест видим сразу после выбора страны\r\n      return !!state.selectedCountry && state.stage >= 1;\r\n    },\r\n    checkCompletion: (state: GameState) => {\r\n      // Квест завершен, если куплен любой апгрейд\r\n      return state.upgrades.some(upgrade => upgrade.level > 0);\r\n    }\r\n  },\r\n\r\n  develop_sphere: {\r\n    id: 'develop_sphere',\r\n    name: 'Начать развивать одну из сфер',\r\n    description: 'Накопите 10 очков в одной из трех сфер развития',\r\n    progress: 0,\r\n    maxProgress: 10,\r\n    isCompleted: false,\r\n    isVisible: false,\r\n    checkProgress: (state: GameState) => {\r\n      // Прогресс - максимальное количество ресурсов среди всех сфер\r\n      const maxSphereResources = Math.max(\r\n        state.spheres[ECONOMY].resources,\r\n        state.spheres[FAITH].resources,\r\n        state.spheres[SCIENCE].resources\r\n      );\r\n      return Math.min(maxSphereResources, 10);\r\n    },\r\n    checkVisibility: (state: GameState) => {\r\n      // Квест становится видимым когда общие ресурсы превышают 100\r\n      return state.total > 100;\r\n    },\r\n    checkCompletion: (state: GameState) => {\r\n      // Квест завершен, если в любой сфере больше 10 ресурсов\r\n      return state.spheres[ECONOMY].resources > 10 ||\r\n             state.spheres[FAITH].resources > 10 ||\r\n             state.spheres[SCIENCE].resources > 10;\r\n    }\r\n  },\r\n\r\n  expand_borders: {\r\n    id: 'expand_borders',\r\n    name: 'Расширение границ',\r\n    description: 'Захватите первую страну',\r\n    progress: 0,\r\n    maxProgress: 1,\r\n    isCompleted: false,\r\n    isVisible: false,\r\n    checkProgress: (state: GameState) => {\r\n      // Прогресс 0 если захвачена только выбранная страна, 1 если больше\r\n      return state.conqueredCountries.length > 1 ? 1 : 0;\r\n    },\r\n    checkVisibility: (state: GameState) => {\r\n      // Квест становится видимым когда доступна хотя бы одна страна для захвата\r\n      // Это происходит когда есть события на карте или достаточно ресурсов\r\n      return state.mapEvents.length > 0 || state.total > 500;\r\n    },\r\n    checkCompletion: (state: GameState) => {\r\n      // Квест завершен, если захвачено больше одной страны\r\n      return state.conqueredCountries.length > 1;\r\n    }\r\n  },\r\n\r\n  ship_shields: {\r\n    id: 'ship_shields',\r\n    name: 'Постройка щитов корабля',\r\n    description: 'Постройте защитные щиты для космического корабля',\r\n    progress: 0,\r\n    maxProgress: 1,\r\n    isCompleted: false,\r\n    isVisible: false,\r\n    checkProgress: (state: GameState) => {\r\n      // Прогресс 1 если щиты корабля построены\r\n      return state.cosmicCivilization.shipShield ? 1 : 0;\r\n    },\r\n    checkVisibility: (state: GameState) => {\r\n      // Квест становится видимым после перехода на 2й этап\r\n      return state.stage >= 2;\r\n    },\r\n    checkCompletion: (state: GameState) => {\r\n      // Квест завершен, если в secondStage есть ключ shipShield\r\n      return state.secondStage.includes('shipShield') || state.cosmicCivilization.shipShield;\r\n    }\r\n  }\r\n};\r\n\r\n// Функция для получения всех квестов в виде массива\r\nexport const getAllQuests = (): Quest[] => {\r\n  return Object.values(QUESTS);\r\n};\r\n\r\n// Функция для получения квеста по ID\r\nexport const getQuestById = (id: string): Quest | undefined => {\r\n  return QUESTS[id];\r\n}; ","import { COMMON, FAITH, SCIENCE, ECONOMY, EVENT_AUTO_CLOSE_TIME, TOTAL_RESOURCES_FOR_FIRST_STAGE, SCIENCE_RESOURCES_FOR_FIRST_STAGE, FAITH_RESOURCES_FOR_FIRST_STAGE, ECONOMY_RESOURCES_FOR_FIRST_STAGE, SHIP_BASE_DAMAGE_RATE, SHIP_DAMAGE_WAVES, SHIELD_EFFICIENCY, SHIP_BASE_SHIELD_DAMAGE_RATE } from \"./constants\";\nimport { COUNTRY_NAMES } from \"../constants\";\nimport { conquestHistory, GameEvent, GameState, MapEvent, StateTalent, StateUpgrade, ActiveProblem, stateProblem } from \"../types\";\nimport { GAME_EVENTS, DynamicEvents } from \"../Events\";\nimport { Projects as PROJECTS } from \"../Projects\";\nimport { Problems as PROBLEMS } from \"../Problems\";\nimport { News as NEWS } from \"../News\";\nimport { NEWS_INTERVAL } from \"../News\";\nimport { TALENTS } from \"../Talents\";\nimport { UPGRADES } from \"../Upgrades\";\nimport { QUESTS } from \"../Quests\";\n\n\n// Генерирует случайную позицию на экране\nfunction getRandomPosition(windowSize: { width: number, height: number }): [number, number] {\n  // Ограничиваем область появления событий, чтобы они не появлялись слишком близко к краям\n  const margin = 50;\n  const x = margin + Math.random() * (windowSize.width - margin * 2);\n  const y = margin + Math.random() * (windowSize.height - margin * 2);\n  return [x, y];\n}\n\n// Проверяет, может ли событие быть активировано\nfunction canTriggerEvent(event: string, state: GameState): boolean {\n  // Проверяем, не активировано ли уже это событие\n  const isAlreadyActive = state.activeEvents.some(e => e.id === event);\n  if (isAlreadyActive) return false;\n  const eventData = GAME_EVENTS[event];\n  const eventHistory = state.eventHistory[event];\n\n  // Проверяем историю события\n  if (eventData.once && eventHistory?.count > 0) return false;\n  // Если событие имеет кулдаун и не прошло достаточно времени\n  if (eventHistory && eventData.cooldown && (Date.now() - (eventHistory.lastTriggered || 0)) < eventData.cooldown) {\n    return false;\n  }\n  // Проверяем все условия события\n  return eventData.conditions.every(condition => condition(state));\n}\n\n// Выбирает событие для активации\nfunction selectEvent(state: GameState): GameEvent | null {\n  const candidateEvents: GameEvent[] = [];\n  \n  // Перебираем все события\n  for (const event of state.events) {\n    if (canTriggerEvent(event, state)) {\n      candidateEvents.push(GAME_EVENTS[event]);\n    }\n  }\n  \n  // Теперь у нас есть список конкретных событий, которые могут быть активированы\n  if (candidateEvents.length === 0) return null;\n  \n  // Выбираем событие с наибольшим весом\n  const maxWeight = Math.max(...candidateEvents.map(event => event.weight));\n  const maxWeightEvents = candidateEvents.filter(event => event.weight === maxWeight);\n  \n  // Если нашли события с максимальным весом, выбираем случайное из них\n  if (maxWeightEvents.length > 0) {\n    const randomIndex = Math.floor(Math.random() * maxWeightEvents.length);\n    const selectedEvent = maxWeightEvents[randomIndex];\n    \n    // Проверяем удачу - вероятность активации события равна его весу (в процентах)\n    if (Math.random() * 100 < selectedEvent.weight) {\n      return selectedEvent;\n    }\n  }\n  \n  // Если не удалось выбрать событие или не повезло, возвращаем null\n  return null;\n}\n\n// Предрасчет условий видимости и доступности для талантов\nfunction recalculateTalents(state: GameState): StateTalent[] {\n  // Получаем список активных талантов\n  const activeTalentIds = state.talents.filter(t => t.state === 'active').map(t => t.id);\n  \n  // Обрабатываем таланты и добавляем вычисленную информацию\n  return TALENTS.map(talent => {\n    const stateTalent = state.talents.find(t => t.id === talent.id);\n    // Проверяем условие видимости\n    const isVisible = talent.visible.every(condition => condition(state));\n    \n    // Проверяем требования для разблокировки таланта\n    const requirementsMet = talent.requires.every(req => \n      !req.talentId || activeTalentIds.includes(req.talentId)\n    );\n    \n    // Проверяем условия доступности\n    const isAvailable = requirementsMet && talent.available.every(condition => condition(state));\n\n    // Проверяем условия для затенения\n    const isShaded = talent.shade?.some(condition => condition(state));\n\n    // Возвращаем обновленный талант со всеми вычисленными свойствами\n    return {\n      id: talent.id,\n      isVisible,\n      isAvailable,\n      isShaded,\n      state: stateTalent!.state\n    };\n  });\n}\n\n// Предрасчет видимости апгрейдов\nfunction recalculateUpgrades(state: GameState): StateUpgrade[] {\n  return UPGRADES.map(upgrade => {\n    // Получаем текущий уровень и стоимость из состояния\n    const stateUpgrade = state.upgrades.find(u => u.id === upgrade.id);\n    const level = stateUpgrade ? stateUpgrade.level : 0;\n    const cost = stateUpgrade ? stateUpgrade.cost : upgrade.cost;\n    const CPS = stateUpgrade ? stateUpgrade.CPS : upgrade.CPS;\n    const available = stateUpgrade ? stateUpgrade.available : upgrade.available;\n\n    // Проверяем условие видимости\n    let isVisible: boolean;\n    if (typeof upgrade.visible === 'boolean') {\n      isVisible = upgrade.visible;\n    } else {\n      // Если visible - это функция, вызываем её с текущим состоянием\n      isVisible = upgrade.visible(state);\n    }\n    \n    return {\n      id: upgrade.id,\n      isVisible: state.upgrades.find(u => u.id === upgrade.id)?.isVisible || isVisible,\n      level,\n      cost,\n      CPS,\n      available,\n    };\n  });\n}\n\n// Предрасчет состояния квестов\nfunction recalculateQuests(state: GameState): any[] {\n  return state.quests.map(questState => {\n    const questDefinition = QUESTS[questState.id];\n    if (!questDefinition) return questState;\n    \n    // Создаем обновленное состояние квеста\n    const updatedQuest = { ...questState };\n    \n    // Обновляем видимость\n    updatedQuest.isVisible = questDefinition.checkVisibility(state);\n    \n    // Если квест уже завершен, не обновляем прогресс\n    if (!questState.isCompleted) {\n      // Обновляем прогресс\n      updatedQuest.progress = questDefinition.checkProgress(state);\n      \n      // Проверяем завершение\n      if (questDefinition.checkCompletion(state)) {\n        updatedQuest.isCompleted = true;\n        updatedQuest.completedAt = Date.now();\n      }\n    }\n    \n    return updatedQuest;\n  });\n}\n\n// Проверяет события и создает новое активное событие, если возможно\nfunction checkEvents(state: GameState, windowSize: { width: number, height: number }): {id: string; position: number[]}[] {\n  // Выбираем событие для активации\n  const eventToTrigger = selectEvent(state);\n  \n  // Создаем копию текущих активных событий\n  const updatedActiveEvents = [...state.activeEvents];\n  \n  // Если есть новое событие для добавления\n  if (eventToTrigger) {\n    state.eventHistory[eventToTrigger.id] = {\n      id: eventToTrigger.id,\n      lastTriggered: Date.now(),\n      count: (state.eventHistory[eventToTrigger.id]?.count || 0) + 1\n    };\n    \n    // Определяем позицию для нового события\n    let position: number[];\n    if (eventToTrigger.position === \"random\") {\n      position = getRandomPosition(windowSize);\n    } else if (Array.isArray(eventToTrigger.position)) {\n      position = eventToTrigger.position;\n    } else {\n      position = getRandomPosition(windowSize);\n    }\n    \n    updatedActiveEvents.push({\n      id: eventToTrigger.id,\n      position\n    });\n  }\n  \n  return updatedActiveEvents;\n}\n\nconst checkConquest = (state: GameState): [conquestHistory,MapEvent[]] => {\n  const randomCountry = COUNTRY_NAMES.filter(country => !state.conqueredCountries.includes(country))[Math.floor(Math.random() * COUNTRY_NAMES.filter(country => !state.conqueredCountries.includes(country)).length)];\n  const conquestEvent = DynamicEvents.BUY_COUNTRY(state, randomCountry);\n  if (!conquestEvent) return [state.lastConquest,state.mapEvents];\n  // return previous conquest\n  if ( conquestEvent.weight * (state.conquestSpeed + (state.total / 10000)) < Math.random() * 100) return [state.lastConquest,state.mapEvents];\n  \n  // @ts-ignore\n  if (state.lastConquest.lastTriggered && Date.now() - state.lastConquest.lastTriggered < (conquestEvent?.cooldown / (state.conquestSpeed * state.total) )) return [state.lastConquest,state.mapEvents];\n\n  return [{\n    ...state.lastConquest,\n    lastTriggered: Date.now(),\n    country: randomCountry\n  },[...state.mapEvents, {\n    id: conquestEvent.id,\n    targetCountry: randomCountry,\n    description: conquestEvent.message,\n    name: conquestEvent.name,\n    icon: conquestEvent.icon,\n  }]];\n}\n  \n// Проверяет, можно ли активировать проблему\nfunction canTriggerProblem(problem: stateProblem, state: GameState): boolean {\n  // Проверяем, не активирована ли уже эта проблема\n  const activeVersion = state.activeProblems.find(p => p.id === problem.id);\n  if (!!activeVersion) return false;\n  \n  return true;\n}\n\n// Проверяет проблемы проектов и активирует их при необходимости\nfunction checkProblems(state: GameState, windowSize: { width: number, height: number }): ActiveProblem[] {\n  const updatedActiveProblems = [...state.activeProblems];\n  \n  // Перебираем все активные проекты\n  state.activeProjects.forEach(project => {\n    const projectData = PROJECTS[project.id];\n    \n    // Если у проекта есть проблемы и он не завершен, проверяем их\n    if (projectData.problems && project.progress < 100) {\n      // Выполняем все функции проблем, которые могут добавить новые проблемы в state.problems\n      projectData.problems.forEach(problemEffect => problemEffect(state));\n    }\n  });\n\n  // Проверяем вероятность активации для каждой проблемы из списка\n  state.problems.forEach(problem => {\n    const problemData = PROBLEMS[problem.id];\n    \n    if (problemData && canTriggerProblem(problem, state)) {\n      // Проверяем шанс на активацию (вес проблемы от 0 до 100%)\n      if (Math.random() * 100 < problemData.weight) {\n        // Определяем позицию для новой проблемы\n        let position: number[];\n        if (problemData.position === \"random\") {\n          position = getRandomPosition(windowSize);\n        } else {\n          position = problemData.position;\n        }\n        // Добавляем новую проблему\n        updatedActiveProblems.push({\n          id: problem.id,\n          projectId: problem.projectId,\n          startTime: Date.now(),\n          position,\n        });\n        \n        // Удаляем проблему из списка доступных, чтобы она не активировалась повторно\n        state.problems = state.problems.filter(p => p.id !== problem.id);\n      }\n    }\n  });\n  \n  return updatedActiveProblems;\n}\n\n// Функция для обновления списка новостей\nfunction getNewsForState(state: GameState): string[] {\n  // Восстанавливаем все новости для текущего и предыдущих этапов\n  return Object.keys(NEWS).filter(id => {\n    const news = NEWS[id];\n    return news.stage === state.stage;\n  });\n}\n\n// Функция для выбора случайной новости, соответствующей текущему этапу игры\nfunction selectNews(state: GameState): [string | null, string[]] {\n  // Если нет новостей вообще, восстанавливаем список\n  if (state.newsQueue.length === 0) {\n    // В текущем тике не показываем новость\n    return ['', getNewsForState(state)];\n  }\n\n  // Берем первую новость из очереди и удаляем ее\n  const newsId = state.newsQueue[0];\n  const newsQueue = state.newsQueue.slice(1);\n  return [newsId, newsQueue];\n\n}\n\n// Функция для проверки необходимости отображения новостей\nfunction checkNews(state: GameState): [string | null, string[], number] {\n  const now = Date.now();\n  let activeNews = state.activeNews;\n  let newsQueue = state.newsQueue;\n  let lastNewsTime = state.lastNewsTime;\n  // Проверяем, прошло ли достаточно времени с момента последнего показа новости\n  if (now - state.lastNewsTime > NEWS_INTERVAL) {\n    lastNewsTime = now;\n    [activeNews, newsQueue] = selectNews(state);\n  }\n  \n  // Выбираем новость для отображения\n  return [activeNews, newsQueue, lastNewsTime]  ;\n}\n\nexport const calculateTick = (state: GameState, deltaTime: number, windowSize: { width: number, height: number }): Partial<GameState> => {\n  const updates: Partial<GameState> = {};\n  if (state.stage === 0) {\n    return updates;\n  }\n\n  // Check for stage transition conditions\n  if (state.stage === 1) {\n    // Check if all countries are conquered\n    const allCountriesConquered = COUNTRY_NAMES.every((country: string) => \n      state.conqueredCountries.includes(country)\n    );\n\n    // Check if player has enough resources and technology\n    const hasEnoughResources = state.total >= TOTAL_RESOURCES_FOR_FIRST_STAGE; // 1 million resources\n    const hasEnoughScience = state.spheres[SCIENCE].resources >= SCIENCE_RESOURCES_FOR_FIRST_STAGE; // 500k science\n    const hasEnoughFaith = state.spheres[FAITH].resources >= FAITH_RESOURCES_FOR_FIRST_STAGE; // 500k faith\n    const hasEnoughEconomy = state.spheres[ECONOMY].resources >= ECONOMY_RESOURCES_FOR_FIRST_STAGE; // 500k economy\n\n\n    if (allCountriesConquered || \n        hasEnoughResources || \n        hasEnoughScience || \n        hasEnoughFaith || \n        hasEnoughEconomy) {\n      updates.stage = 2;\n      updates.secondStage = [...state.secondStage, 'space_travel_unlocked'];\n    }\n  }\n\n  // Update resources based on CPS\n  updates.resources = state.resources + state.autoClickPower * state.multipliers[COMMON];\n  \n\n  // Update sphere resources\n  const updatedSpheres = { ...state.spheres };\n  Object.entries(state.spheres).forEach(([sphereName, sphere]) => {\n    const sphereCPS = sphere.CPS * state.multipliers[sphereName] * state.multipliers[COMMON];\n    updatedSpheres[sphereName as keyof typeof updatedSpheres] = {\n      ...sphere,\n      resources: sphere.resources + sphereCPS\n    };\n  });\n  updates.spheres = updatedSpheres;\n\n  \n  // Update total, calculated for progression\n  updates.total = state.total + state.autoClickPower * state.multipliers[COMMON] ;\n  updates.total += Object.values(state.spheres).reduce((acc, sphere) => acc + sphere.CPS * state.multipliers[sphere.name], 0);\n\n  // Предрасчитываем условия видимости и доступности для талантов\n  updates.talents = recalculateTalents(state);\n  \n  // Предрасчитываем видимость апгрейдов\n  updates.upgrades = recalculateUpgrades(state);\n  \n  // Обновляем квесты\n  updates.quests = recalculateQuests(state);\n\n  // Обновляем события и удаляем устаревшие\n  let newActiveEvents = checkEvents(state, windowSize);\n  \n  // Проверяем какие события должны быть автоматически удалены по времени\n  newActiveEvents = newActiveEvents.filter(eventObj => {\n    const eventHistory = state.eventHistory[eventObj.id];\n    if (!eventHistory) return true;\n    \n    const eventAge = Date.now() - eventHistory.lastTriggered;\n    // Если событие существует дольше EVENT_AUTO_CLOSE_TIME, удаляем его и применяем эффекты\n    if (eventAge >= EVENT_AUTO_CLOSE_TIME) {\n      // Удаляем из списка доступных событий, если оно одноразовое\n      if (GAME_EVENTS[eventObj.id].once) {\n        state.events = state.events.filter(e => e !== eventObj.id);\n      }\n      \n      return false;\n    }\n    return true;\n  });\n  \n  updates.activeEvents = newActiveEvents;\n  \n  // Проверяем и обновляем проблемы\n  updates.activeProblems = checkProblems(state, windowSize);\n  \n  // Проверяем и обновляем новости\n  [updates.activeNews, updates.newsQueue, updates.lastNewsTime] = checkNews(state);\n\n  \n  updates.activeProjects = state.activeProjects;\n  \n  // Update conquest events\n  [updates.lastConquest, updates.mapEvents] = checkConquest(state);\n\n  // Update project progress for active projects\n  updates.activeProjects.forEach(project => {\n    const projectData = PROJECTS[project.id];\n    if (project.status === 'in_progress') {\n      const progressIncrement = projectData.speed * state.projectSpeed;\n      project.progress = Math.min(100, project.progress + progressIncrement);\n\n      if (project.progress >= 100) {\n        // Просто помечаем как успешный, но не применяем эффекты\n        // Эффекты будут применены в редьюсере completeProject\n        project.status = 'success';\n      }\n    }\n  });\n\n  // Обработка повреждений корабля (только для космического этапа)\n  if (state.stage === 2 ) { // TODO: добавить проверку на нужный тип корабля, надо ли ему вообще лететь\n    if (state.ship.flightStartTime  === 0) {\n      // начинаем полет\n      state.ship.flightStartTime = Date.now();\n    }\n    const flightTime = Date.now() - state.ship.flightStartTime;\n    const updatedShip = { ...state.ship };\n    \n    // Рассчитываем базовый урон с учетом волн повреждений\n    let damageMultiplier = 1;\n    \n    // Проверяем, находимся ли мы в одной из волн повреждений\n    for (const wave of SHIP_DAMAGE_WAVES) {\n      if (flightTime >= wave.startTime && flightTime <= wave.startTime + wave.duration) {\n        damageMultiplier += wave.multiplier;\n      }\n    }\n    \n    // Добавляем синусоидальную составляющую для естественных колебаний урона\n    const oscillationFactor = 1 + Math.sin(flightTime / 10000) * 0.3;\n    \n    // Рассчитываем итоговый урон с учетом прошедшего времени\n    const hullDamage = SHIP_BASE_DAMAGE_RATE * damageMultiplier * oscillationFactor * (deltaTime / 1000);\n    const shieldDamage = SHIP_BASE_SHIELD_DAMAGE_RATE * damageMultiplier * oscillationFactor * (deltaTime / 1000);\n\n    // Получаем список активных щитов\n    const activeShields = Object.entries(updatedShip.activeShields)\n                                .filter(([_, active]) => active)\n                                .map(([sphere]) => sphere);\n    \n    // Проверяем активность щитов\n    if (activeShields.length > 0){\n      // Распределяем урон поровну между всеми активными щитами\n      const damagePerShield = shieldDamage / activeShields.length;\n      \n      // Проверяем каждый активный щит\n      activeShields.forEach(sphere => {\n        // Проверяем, что сфера является допустимым ключом\n        if (sphere === SCIENCE || sphere === FAITH || sphere === ECONOMY) {\n          const efficiency = SHIELD_EFFICIENCY[sphere] || 1;\n          const actualDamage = damagePerShield / efficiency;\n          \n          // Вычитаем ресурсы из соответствующей сферы\n          const currentResources = updates.spheres?.[sphere]?.resources || state.spheres[sphere].resources;\n          \n          if (currentResources >= actualDamage) {\n            // Если у сферы достаточно ресурсов, просто вычитаем урон\n            if (!updates.spheres) updates.spheres = { ...state.spheres };\n            updates.spheres[sphere] = {\n              ...updates.spheres[sphere],\n              resources: currentResources - actualDamage\n            };\n          } else {\n            // Если у сферы недостаточно ресурсов:\n            // 1. Используем все имеющиеся ресурсы\n            if (!updates.spheres) updates.spheres = { ...state.spheres };\n            updates.spheres[sphere] = {\n              ...updates.spheres[sphere],\n              resources: 0\n            };\n            \n            // 2. Отключаем щит этой сферы\n            updatedShip.activeShields[sphere] = false;\n          };\n        };\n      });\n    } else {\n      // Если щиты выключены, весь урон идет корпусу\n      updates.resources -= hullDamage;\n    }\n    \n    \n    \n    // Проверяем целостность корпуса\n    if (updates.resources <= 0) {\n      // Если целостность корпуса упала до нуля, игра проиграна\n      updates.gameOver = true;\n      updates.gameOverReason = \"Корабль был уничтожен во время космического полета!\";\n    }\n    \n    updates.ship = updatedShip;\n  }\n  \n  return updates;\n};\n\n// Web Worker\n/* eslint-disable-next-line no-restricted-globals */\nself.onmessage = (e: MessageEvent) => {\n  switch (e.data.type) {\n    case 'TICK':\n      const action = calculateTick(e.data.state, e.data.deltaTime, e.data.windowSize);\n      postMessage(action);\n      break;\n    case 'STATE_UPDATED':\n      // Просто запоминаем новое состояние и ничего не отправляем обратно\n      // На следующем тике будут использованы актуальные данные\n      break;\n  }\n};\n"],"names":["COMMON","SCIENCE","FAITH","ECONOMY","SHIP_DAMAGE_WAVES","startTime","duration","multiplier","SHIELD_EFFICIENCY","COUNTRY_NAMES","DynamicEvents","state","target","availableCountries","filter","countryId","conqueredCountries","includes","length","targetCountry","Math","floor","random","id","type","name","description","icon","message","weight","conditions","effects","push","cooldown","status","GAME_EVENTS","position","spheres","resources","values","once","multipliers","total","max","toFixed","artefacts","secondStage","activeProjects","some","project","setTimeout","cosmicCivilization","conquest","Projects","progress","speed","failEffects","problems","projectId","materials","randomMaterial","conquestSpeed","seed","newsQueue","shipShield","FTL","activeEvents","Problems","amount","time","News","text","stage","TALENTS","category","requires","visible","available","meta","effectDesctription","requirementsDescription","flavorText","autoClickPower","shade","projectSpeed","talentId","country","slice","isCrossCategory","min","_state$talents$find","_state$talents$find2","price","talents","find","talent","_state$talents$find3","_state$talents$find4","CPS","temp","savedState","manualClickPower","laterEffects","_state$upgrades$find","upgrades","upgrade","level","clickEffects","t","missionaryUpgrade","popup","laterPopup","forEach","selectedCountry","item","UPGRADES","sphere","cost","growthRate","linearIncrement","transitionLevel","QUESTS","first_upgrade","maxProgress","isCompleted","isVisible","checkProgress","checkVisibility","checkCompletion","develop_sphere","maxSphereResources","expand_borders","mapEvents","ship_shields","getRandomPosition","windowSize","width","margin","height","canTriggerEvent","event","e","eventData","eventHistory","count","Date","now","lastTriggered","every","condition","checkEvents","eventToTrigger","candidateEvents","events","maxWeight","map","maxWeightEvents","selectedEvent","selectEvent","updatedActiveEvents","_state$eventHistory$e","Array","isArray","getNewsForState","Object","keys","NEWS","checkNews","activeNews","lastNewsTime","selectNews","calculateTick","deltaTime","updates","allCountriesConquered","hasEnoughResources","hasEnoughScience","hasEnoughFaith","hasEnoughEconomy","updatedSpheres","entries","_ref","sphereName","sphereCPS","reduce","acc","activeTalentIds","_talent$shade","stateTalent","isAvailable","req","isShaded","recalculateTalents","stateUpgrade","u","recalculateUpgrades","quests","questState","questDefinition","updatedQuest","completedAt","recalculateQuests","newActiveEvents","eventObj","activeProblems","updatedActiveProblems","projectData","PROJECTS","problemEffect","problem","problemData","PROBLEMS","p","canTriggerProblem","checkProblems","lastConquest","randomCountry","conquestEvent","BUY_COUNTRY","checkConquest","progressIncrement","ship","flightStartTime","flightTime","updatedShip","damageMultiplier","wave","oscillationFactor","sin","hullDamage","shieldDamage","activeShields","_ref2","_","active","_ref3","damagePerShield","_updates$spheres","_updates$spheres$sphe","actualDamage","currentResources","gameOver","gameOverReason","self","onmessage","data","action","postMessage"],"sourceRoot":""}